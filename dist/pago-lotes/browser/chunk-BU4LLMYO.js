import{a as m,b as S,c as pn,e as ft,g as Lp,h as p}from"./chunk-JTGFI4FN.js";function jp(n,e){return Object.is(n,e)}var Pe=null,xu=!1,Vp=1,Ht=Symbol("SIGNAL");function Y(n){let e=Pe;return Pe=n,e}function $p(){return Pe}var Ki={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function rc(n){if(xu)throw new Error("");if(Pe===null)return;Pe.consumerOnSignalRead(n);let e=Pe.nextProducerIndex++;if(Bu(Pe),e<Pe.producerNode.length&&Pe.producerNode[e]!==n&&nc(Pe)){let t=Pe.producerNode[e];Hu(t,Pe.producerIndexOfThis[e])}Pe.producerNode[e]!==n&&(Pe.producerNode[e]=n,Pe.producerIndexOfThis[e]=nc(Pe)?_E(n,Pe,e):0),Pe.producerLastReadVersion[e]=n.version}function DE(){Vp++}function zp(n){if(!(nc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Vp)){if(!n.producerMustRecompute(n)&&!Uu(n)){Bp(n);return}n.producerRecomputeValue(n),Bp(n)}}function Gp(n){if(n.liveConsumerNode===void 0)return;let e=xu;xu=!0;try{for(let t of n.liveConsumerNode)t.dirty||Nb(t)}finally{xu=e}}function qp(){return Pe?.consumerAllowSignalWrites!==!1}function Nb(n){n.dirty=!0,Gp(n),n.consumerMarkedDirty?.(n)}function Bp(n){n.dirty=!1,n.lastCleanEpoch=Vp}function oc(n){return n&&(n.nextProducerIndex=0),Y(n)}function Lu(n,e){if(Y(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(nc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Hu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Uu(n){Bu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(zp(t),r!==t.version))return!0}return!1}function ic(n){if(Bu(n),nc(n))for(let e=0;e<n.producerNode.length;e++)Hu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function _E(n,e,t){if(bE(n),n.liveConsumerNode.length===0&&RE(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=_E(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Hu(n,e){if(bE(n),n.liveConsumerNode.length===1&&RE(n))for(let r=0;r<n.producerNode.length;r++)Hu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],o=n.liveConsumerNode[e];Bu(o),o.producerIndexOfThis[r]=e}}function nc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Bu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function bE(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function RE(n){return n.producerNode!==void 0}function Kp(n,e){let t=Object.create(Ob);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(zp(t),rc(t),t.value===Fu)throw t.error;return t.value};return r[Ht]=t,r}var Up=Symbol("UNSET"),Hp=Symbol("COMPUTING"),Fu=Symbol("ERRORED"),Ob=S(m({},Ki),{value:Up,dirty:!0,error:null,equal:jp,kind:"computed",producerMustRecompute(n){return n.value===Up||n.value===Hp},producerRecomputeValue(n){if(n.value===Hp)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Hp;let t=oc(n),r,o=!1;try{r=n.computation(),Y(null),o=e!==Up&&e!==Fu&&r!==Fu&&n.equal(e,r)}catch(i){r=Fu,n.error=i}finally{Lu(n,t)}if(o){n.value=e;return}n.value=r,n.version++}});function Pb(){throw new Error}var ME=Pb;function kE(n){ME(n)}function Wp(n){ME=n}var xb=null;function Qp(n,e){let t=Object.create(ju);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(rc(t),t.value);return r[Ht]=t,r}function sc(n,e){qp()||kE(n),n.equal(n.value,e)||(n.value=e,Fb(n))}function Yp(n,e){qp()||kE(n),sc(n,e(n.value))}var ju=S(m({},Ki),{equal:jp,value:void 0,kind:"signal"});function Fb(n){n.version++,DE(),Gp(n),xb?.()}function Jp(n){let e=Y(null);try{return n()}finally{Y(e)}}var Zp;function ac(){return Zp}function Jn(n){let e=Zp;return Zp=n,e}var Vu=Symbol("NotFound");function O(n){return typeof n=="function"}function Wi(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var $u=Wi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Io(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Te=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let i of t)i.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(O(r))try{r()}catch(i){e=i instanceof $u?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{NE(i)}catch(s){e=e??[],s instanceof $u?e=[...e,...s.errors]:e.push(s)}}if(e)throw new $u(e)}}add(e){var t;if(e&&e!==this)if(this.closed)NE(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Io(t,e)}remove(e){let{_finalizers:t}=this;t&&Io(t,e),e instanceof n&&e._removeParent(this)}};Te.EMPTY=(()=>{let n=new Te;return n.closed=!0,n})();var Xp=Te.EMPTY;function zu(n){return n instanceof Te||n&&"closed"in n&&O(n.remove)&&O(n.add)&&O(n.unsubscribe)}function NE(n){O(n)?n():n.unsubscribe()}var Zt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Qi={setTimeout(n,e,...t){let{delegate:r}=Qi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Qi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Gu(n){Qi.setTimeout(()=>{let{onUnhandledError:e}=Zt;if(e)e(n);else throw n})}function cc(){}var OE=eg("C",void 0,void 0);function PE(n){return eg("E",void 0,n)}function xE(n){return eg("N",n,void 0)}function eg(n,e,t){return{kind:n,value:e,error:t}}var To=null;function Yi(n){if(Zt.useDeprecatedSynchronousErrorHandling){let e=!To;if(e&&(To={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=To;if(To=null,t)throw r}}else n()}function FE(n){Zt.useDeprecatedSynchronousErrorHandling&&To&&(To.errorThrown=!0,To.error=n)}var wo=class extends Te{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,zu(e)&&e.add(this)):this.destination=Vb}static create(e,t,r){return new Ji(e,t,r)}next(e){this.isStopped?ng(xE(e),this):this._next(e)}error(e){this.isStopped?ng(PE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ng(OE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Bb=Function.prototype.bind;function tg(n,e){return Bb.call(n,e)}var rg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){qu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){qu(r)}else qu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){qu(t)}}},Ji=class extends wo{constructor(e,t,r){super();let o;if(O(e)||!e)o={next:e??void 0,error:t??void 0,complete:r??void 0};else{let i;this&&Zt.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&tg(e.next,i),error:e.error&&tg(e.error,i),complete:e.complete&&tg(e.complete,i)}):o=e}this.destination=new rg(o)}};function qu(n){Zt.useDeprecatedSynchronousErrorHandling?FE(n):Gu(n)}function jb(n){throw n}function ng(n,e){let{onStoppedNotification:t}=Zt;t&&Qi.setTimeout(()=>t(n,e))}var Vb={closed:!0,next:cc,error:jb,complete:cc};var Zi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Rt(n){return n}function og(...n){return ig(n)}function ig(n){return n.length===0?Rt:n.length===1?n[0]:function(t){return n.reduce((r,o)=>o(r),t)}}var X=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,o){let i=zb(t)?t:new Ji(t,r,o);return Yi(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=LE(r),new r((o,i)=>{let s=new Ji({next:a=>{try{t(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Zi](){return this}pipe(...t){return ig(t)(this)}toPromise(t){return t=LE(t),new t((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return n.create=e=>new n(e),n})();function LE(n){var e;return(e=n??Zt.Promise)!==null&&e!==void 0?e:Promise}function $b(n){return n&&O(n.next)&&O(n.error)&&O(n.complete)}function zb(n){return n&&n instanceof wo||$b(n)&&zu(n)}function sg(n){return O(n?.lift)}function J(n){return e=>{if(sg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function W(n,e,t,r,o){return new ag(n,e,t,r,o)}var ag=class extends wo{constructor(e,t,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Xi(){return J((n,e)=>{let t=null;n._refCount++;let r=W(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let o=n._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var es=class extends X{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,sg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Te;let t=this.getSubject();e.add(this.source.subscribe(W(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Te.EMPTY)}return e}refCount(){return Xi()(this)}};var UE=Wi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var we=(()=>{class n extends X{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ku(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new UE}next(t){Yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:o,observers:i}=this;return r||o?Xp:(this.currentObservers=null,i.push(t),new Te(()=>{this.currentObservers=null,Io(i,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:o,isStopped:i}=this;r?t.error(o):i&&t.complete()}asObservable(){let t=new X;return t.source=this,t}}return n.create=(e,t)=>new Ku(e,t),n})(),Ku=class extends we{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Xp}};var xe=class extends we{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var lc={now(){return(lc.delegate||Date).now()},delegate:void 0};var uc=class extends we{constructor(e=1/0,t=1/0,r=lc){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;t||(r.push(e),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!e.closed;s+=r?1:2)e.next(i[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!o){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Wu=class extends Te{constructor(e,t){super()}schedule(e,t=0){return this}};var dc={setInterval(n,e,...t){let{delegate:r}=dc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=dc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Qu=class extends Wu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let o=this.id,i=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(i,o,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,r=0){return dc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&dc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,o;try{this.work(e)}catch(i){r=!0,o=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Io(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ts=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ts.now=lc.now;var Yu=class extends ts{constructor(e,t=ts.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var HE=new Yu(Qu);var nt=new X(n=>n.complete());function BE(n){return n&&O(n.schedule)}function jE(n){return n[n.length-1]}function Ju(n){return O(jE(n))?n.pop():void 0}function Fr(n){return BE(jE(n))?n.pop():void 0}function $E(n,e,t,r){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(h){s(h)}}function c(u){try{l(r.throw(u))}catch(h){s(h)}}function l(u){u.done?i(u.value):o(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function VE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function So(n){return this instanceof So?(this.v=n,this):new So(n)}function zE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(f){return function(C){return Promise.resolve(C).then(f,h)}}function a(f,C){r[f]&&(o[f]=function(I){return new Promise(function(_,x){i.push([f,I,_,x])>1||c(f,I)})},C&&(o[f]=C(o[f])))}function c(f,C){try{l(r[f](C))}catch(I){g(i[0][3],I)}}function l(f){f.value instanceof So?Promise.resolve(f.value.v).then(u,h):g(i[0][2],f)}function u(f){c("next",f)}function h(f){c("throw",f)}function g(f,C){f(C),i.shift(),i.length&&c(i[0][0],i[0][1])}}function GE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof VE=="function"?VE(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,c){s=n[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},s)}}var ns=n=>n&&typeof n.length=="number"&&typeof n!="function";function Zu(n){return O(n?.then)}function Xu(n){return O(n[Zi])}function ed(n){return Symbol.asyncIterator&&O(n?.[Symbol.asyncIterator])}function td(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Gb(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var nd=Gb();function rd(n){return O(n?.[nd])}function od(n){return zE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:o}=yield So(t.read());if(o)return yield So(void 0);yield yield So(r)}}finally{t.releaseLock()}})}function id(n){return O(n?.getReader)}function Se(n){if(n instanceof X)return n;if(n!=null){if(Xu(n))return qb(n);if(ns(n))return Kb(n);if(Zu(n))return Wb(n);if(ed(n))return qE(n);if(rd(n))return Qb(n);if(id(n))return Yb(n)}throw td(n)}function qb(n){return new X(e=>{let t=n[Zi]();if(O(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Kb(n){return new X(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Wb(n){return new X(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Gu)})}function Qb(n){return new X(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function qE(n){return new X(e=>{Jb(n,e).catch(t=>e.error(t))})}function Yb(n){return qE(od(n))}function Jb(n,e){var t,r,o,i;return $E(this,void 0,void 0,function*(){try{for(t=GE(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o.error}}e.complete()})}function pt(n,e,t,r=0,o=!1){let i=e.schedule(function(){t(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!o)return i}function sd(n,e=0){return J((t,r)=>{t.subscribe(W(r,o=>pt(r,n,()=>r.next(o),e),()=>pt(r,n,()=>r.complete(),e),o=>pt(r,n,()=>r.error(o),e)))})}function ad(n,e=0){return J((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function KE(n,e){return Se(n).pipe(ad(e),sd(e))}function WE(n,e){return Se(n).pipe(ad(e),sd(e))}function QE(n,e){return new X(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function YE(n,e){return new X(t=>{let r;return pt(t,e,()=>{r=n[nd](),pt(t,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){t.error(s);return}i?t.complete():t.next(o)},0,!0)}),()=>O(r?.return)&&r.return()})}function cd(n,e){if(!n)throw new Error("Iterable cannot be null");return new X(t=>{pt(t,e,()=>{let r=n[Symbol.asyncIterator]();pt(t,e,()=>{r.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function JE(n,e){return cd(od(n),e)}function ZE(n,e){if(n!=null){if(Xu(n))return KE(n,e);if(ns(n))return QE(n,e);if(Zu(n))return WE(n,e);if(ed(n))return cd(n,e);if(rd(n))return YE(n,e);if(id(n))return JE(n,e)}throw td(n)}function Z(n,e){return e?ZE(n,e):Se(n)}function N(...n){let e=Fr(n);return Z(n,e)}function rs(n,e){let t=O(n)?n:()=>n,r=o=>o.error(t());return new X(e?o=>e.schedule(r,0,o):r)}function cg(n){return!!n&&(n instanceof X||O(n.lift)&&O(n.subscribe))}var Zn=Wi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function V(n,e){return J((t,r)=>{let o=0;t.subscribe(W(r,i=>{r.next(n.call(e,i,o++))}))})}var{isArray:Zb}=Array;function Xb(n,e){return Zb(e)?n(...e):n(e)}function os(n){return V(e=>Xb(n,e))}var{isArray:eR}=Array,{getPrototypeOf:tR,prototype:nR,keys:rR}=Object;function ld(n){if(n.length===1){let e=n[0];if(eR(e))return{args:e,keys:null};if(oR(e)){let t=rR(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function oR(n){return n&&typeof n=="object"&&tR(n)===nR}function ud(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}function hc(...n){let e=Fr(n),t=Ju(n),{args:r,keys:o}=ld(n);if(r.length===0)return Z([],e);let i=new X(iR(r,e,o?s=>ud(o,s):Rt));return t?i.pipe(os(t)):i}function iR(n,e,t=Rt){return r=>{XE(e,()=>{let{length:o}=n,i=new Array(o),s=o,a=o;for(let c=0;c<o;c++)XE(e,()=>{let l=Z(n[c],e),u=!1;l.subscribe(W(r,h=>{i[c]=h,u||(u=!0,a--),a||r.next(t(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function XE(n,e,t){n?pt(t,n,e):e()}function eI(n,e,t,r,o,i,s,a){let c=[],l=0,u=0,h=!1,g=()=>{h&&!c.length&&!l&&e.complete()},f=I=>l<r?C(I):c.push(I),C=I=>{i&&e.next(I),l++;let _=!1;Se(t(I,u++)).subscribe(W(e,x=>{o?.(x),i?f(x):e.next(x)},()=>{_=!0},void 0,()=>{if(_)try{for(l--;c.length&&l<r;){let x=c.shift();s?pt(e,s,()=>C(x)):C(x)}g()}catch(x){e.error(x)}}))};return n.subscribe(W(e,f,()=>{h=!0,g()})),()=>{a?.()}}function pe(n,e,t=1/0){return O(e)?pe((r,o)=>V((i,s)=>e(r,i,o,s))(Se(n(r,o))),t):(typeof e=="number"&&(t=e),J((r,o)=>eI(r,o,n,t)))}function is(n=1/0){return pe(Rt,n)}function tI(){return is(1)}function ss(...n){return tI()(Z(n,Fr(n)))}function dd(n){return new X(e=>{Se(n()).subscribe(e)})}function sR(...n){let e=Ju(n),{args:t,keys:r}=ld(n),o=new X(i=>{let{length:s}=t;if(!s){i.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let h=!1;Se(t[u]).subscribe(W(i,g=>{h||(h=!0,l--),a[u]=g},()=>c--,void 0,()=>{(!c||!h)&&(l||i.next(r?ud(r,a):a),i.complete())}))}});return e?o.pipe(os(e)):o}var aR=["addListener","removeListener"],cR=["addEventListener","removeEventListener"],lR=["on","off"];function lg(n,e,t,r){if(O(t)&&(r=t,t=void 0),r)return lg(n,e,t).pipe(os(r));let[o,i]=hR(n)?cR.map(s=>a=>n[s](e,a,t)):uR(n)?aR.map(nI(n,e)):dR(n)?lR.map(nI(n,e)):[];if(!o&&ns(n))return pe(s=>lg(s,e,t))(Se(n));if(!o)throw new TypeError("Invalid event target");return new X(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return o(a),()=>i(a)})}function nI(n,e){return t=>r=>n[t](e,r)}function uR(n){return O(n.addListener)&&O(n.removeListener)}function dR(n){return O(n.on)&&O(n.off)}function hR(n){return O(n.addEventListener)&&O(n.removeEventListener)}function We(n,e){return J((t,r)=>{let o=0;t.subscribe(W(r,i=>n.call(e,i,o++)&&r.next(i)))})}function Bt(n){return J((e,t)=>{let r=null,o=!1,i;r=e.subscribe(W(t,void 0,void 0,s=>{i=Se(n(s,Bt(n)(e))),r?(r.unsubscribe(),r=null,i.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(t))})}function rI(n,e,t,r,o){return(i,s)=>{let a=t,c=e,l=0;i.subscribe(W(s,u=>{let h=l++;c=a?n(c,u,h):(a=!0,u),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}function Mt(n,e){return O(e)?pe(n,e,1):pe(n,1)}function fR(n,e=HE){return J((t,r)=>{let o=null,i=null,s=null,a=()=>{if(o){o.unsubscribe(),o=null;let l=i;i=null,r.next(l)}};function c(){let l=s+n,u=e.now();if(u<l){o=this.schedule(void 0,l-u),r.add(o);return}a()}t.subscribe(W(r,l=>{i=l,s=e.now(),o||(o=e.schedule(c,n),r.add(o))},()=>{a(),r.complete()},void 0,()=>{i=o=null}))})}function Lr(n){return J((e,t)=>{let r=!1;e.subscribe(W(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function gn(n){return n<=0?()=>nt:J((e,t)=>{let r=0;e.subscribe(W(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function hd(n=pR){return J((e,t)=>{let r=!1;e.subscribe(W(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function pR(){return new Zn}function Xn(n){return J((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function er(n,e){let t=arguments.length>=2;return r=>r.pipe(n?We((o,i)=>n(o,i,r)):Rt,gn(1),t?Lr(e):hd(()=>new Zn))}function as(n){return n<=0?()=>nt:J((e,t)=>{let r=[];e.subscribe(W(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(let o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function ug(n,e){let t=arguments.length>=2;return r=>r.pipe(n?We((o,i)=>n(o,i,r)):Rt,as(1),t?Lr(e):hd(()=>new Zn))}function dg(n,e){return J(rI(n,e,arguments.length>=2,!0))}function hg(...n){let e=Fr(n);return J((t,r)=>{(e?ss(n,t,e):ss(n,t)).subscribe(r)})}function Qe(n,e){return J((t,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();t.subscribe(W(r,c=>{o?.unsubscribe();let l=0,u=i++;Se(n(c,u)).subscribe(o=W(r,h=>r.next(e?e(c,h,u,l++):h),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function fg(n){return J((e,t)=>{Se(n).subscribe(W(t,()=>t.complete(),cc)),!t.closed&&e.subscribe(t)})}function Ve(n,e,t){let r=O(n)||e||t?{next:n,error:e,complete:t}:n;return r?J((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(W(i,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),i.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),i.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Rt}var KI="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",A=class extends Error{code;constructor(e,t){super(Pm(e,t)),this.code=e}};function gR(n){return`NG0${Math.abs(n)}`}function Pm(n,e){return`${gR(n)}${e?": "+e:""}`}var WI=Symbol("InputSignalNode#UNSET"),mR=S(m({},ju),{transformFn:void 0,applyValueToInputSignal(n,e){sc(n,e)}});function QI(n,e){let t=Object.create(mR);t.value=n,t.transformFn=e?.transform;function r(){if(rc(t),t.value===WI){let o=null;throw new A(-950,o)}return t.value}return r[Ht]=t,r}function Ac(n){return{toString:n}.toString()}var fd="__parameters__";function yR(n){return function(...t){if(n){let r=n(...t);for(let o in r)this[o]=r[o]}}}function YI(n,e,t){return Ac(()=>{let r=yR(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;let s=new o(...i);return a.annotation=s,a;function a(c,l,u){let h=c.hasOwnProperty(fd)?c[fd]:Object.defineProperty(c,fd,{value:[]})[fd];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(s),c}}return o.prototype.ngMetadataName=n,o.annotationCls=o,o})}var Ye=globalThis;function se(n){for(let e in n)if(n[e]===se)return e;throw Error("Could not find renamed property on target object.")}function vR(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function vt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(vt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function bg(n,e){return n?e?`${n} ${e}`:n:e||""}var CR=se({__forward_ref__:se});function JI(n){return n.__forward_ref__=JI,n.toString=function(){return vt(this())},n}function rt(n){return ZI(n)?n():n}function ZI(n){return typeof n=="function"&&n.hasOwnProperty(CR)&&n.__forward_ref__===JI}function M(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function zt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Yd(n){return oI(n,eT)||oI(n,tT)}function XI(n){return Yd(n)!==null}function oI(n,e){return n.hasOwnProperty(e)?n[e]:null}function ER(n){let e=n&&(n[eT]||n[tT]);return e||null}function iI(n){return n&&(n.hasOwnProperty(sI)||n.hasOwnProperty(IR))?n[sI]:null}var eT=se({\u0275prov:se}),sI=se({\u0275inj:se}),tT=se({ngInjectableDef:se}),IR=se({ngInjectorDef:se}),D=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=M({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function nT(n){return n&&!!n.\u0275providers}var TR=se({\u0275cmp:se}),wR=se({\u0275dir:se}),SR=se({\u0275pipe:se}),AR=se({\u0275mod:se}),wd=se({\u0275fac:se}),mc=se({__NG_ELEMENT_ID__:se}),aI=se({__NG_ENV_ID__:se});function yc(n){return typeof n=="string"?n:n==null?"":String(n)}function DR(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():yc(n)}function rT(n,e){throw new A(-200,n)}function xm(n,e){throw new A(-201,!1)}var G=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(G||{}),Rg;function oT(){return Rg}function gt(n){let e=Rg;return Rg=n,e}function iT(n,e,t){let r=Yd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&G.Optional)return null;if(e!==void 0)return e;xm(n,"Injector")}var _R={},Do=_R,Mg="__NG_DI_FLAG__",Sd=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?Vu:Do,r)}},Ad="ngTempTokenPath",bR="ngTokenPath",RR=/\n/gm,MR="\u0275",cI="__source";function kR(n,e=G.Default){if(ac()===void 0)throw new A(-203,!1);if(ac()===null)return iT(n,void 0,e);{let t=ac(),r;return t instanceof Sd?r=t.injector:r=t,r.get(n,e&G.Optional?null:void 0,e)}}function R(n,e=G.Default){return(oT()||kR)(rt(n),e)}function T(n,e=G.Default){return R(n,Jd(e))}function Jd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function kg(n){let e=[];for(let t=0;t<n.length;t++){let r=rt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new A(900,!1);let o,i=G.Default;for(let s=0;s<r.length;s++){let a=r[s],c=NR(a);typeof c=="number"?c===-1?o=a.token:i|=c:o=a}e.push(R(o,i))}else e.push(R(r))}return e}function sT(n,e){return n[Mg]=e,n.prototype[Mg]=e,n}function NR(n){return n[Mg]}function OR(n,e,t,r){let o=n[Ad];throw e[cI]&&o.unshift(e[cI]),n.message=PR(`
`+n.message,o,t,r),n[bR]=o,n[Ad]=null,n}function PR(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==MR?n.slice(2):n;let o=vt(e);if(Array.isArray(e))o=e.map(vt).join(" -> ");else if(typeof e=="object"){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+(typeof a=="string"?JSON.stringify(a):vt(a)))}o=`{${i.join(", ")}}`}return`${t}${r?"("+r+")":""}[${o}]: ${n.replace(RR,`
  `)}`}var Fm=sT(YI("Optional"),8);var aT=sT(YI("SkipSelf"),4);function bo(n,e){let t=n.hasOwnProperty(wd);return t?n[wd]:null}function xR(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let o=n[r],i=e[r];if(t&&(o=t(o),i=t(i)),i!==o)return!1}return!0}function FR(n){return n.flat(Number.POSITIVE_INFINITY)}function Lm(n,e){n.forEach(t=>Array.isArray(t)?Lm(t,e):e(t))}function cT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Dd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function LR(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function UR(n,e,t,r){let o=n.length;if(o==e)n.push(t,r);else if(o===1)n.push(r,n[0]),n[0]=t;else{for(o--,n.push(n[o-1],n[o]);o>e;){let i=o-2;n[o]=n[i],o--}n[e]=t,n[e+1]=r}}function Zd(n,e,t){let r=Dc(n,e);return r>=0?n[r|1]=t:(r=~r,UR(n,r,e,t)),r}function pg(n,e){let t=Dc(n,e);if(t>=0)return n[t|1]}function Dc(n,e){return HR(n,e,1)}function HR(n,e,t){let r=0,o=n.length>>t;for(;o!==r;){let i=r+(o-r>>1),s=n[i<<t];if(e===s)return i<<t;s>e?o=i:r=i+1}return~(o<<t)}var Ro={},mt=[],ps=new D(""),lT=new D("",-1),uT=new D(""),_d=class{get(e,t=Do){if(t===Do){let r=new Error(`NullInjectorError: No provider for ${vt(e)}!`);throw r.name="NullInjectorError",r}return t}};function dT(n,e){let t=n[AR]||null;if(!t&&e===!0)throw new Error(`Type ${vt(n)} does not have '\u0275mod' property.`);return t}function Mo(n){return n[TR]||null}function BR(n){return n[wR]||null}function jR(n){return n[SR]||null}function _c(n){return{\u0275providers:n}}function VR(...n){return{\u0275providers:hT(!0,n),\u0275fromNgModule:!0}}function hT(n,...e){let t=[],r=new Set,o,i=s=>{t.push(s)};return Lm(e,s=>{let a=s;Ng(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&fT(o,i),t}function fT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:o}=n[t];Um(o,i=>{e(i,r)})}}function Ng(n,e,t,r){if(n=rt(n),!n)return!1;let o=null,i=iI(n),s=!i&&Mo(n);if(!i&&!s){let c=n.ngModule;if(i=iI(c),i)o=c;else return!1}else{if(s&&!s.standalone)return!1;o=n}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Ng(l,e,t,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let l;try{Lm(i.imports,u=>{Ng(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&fT(l,e)}if(!a){let l=bo(o)||(()=>new o);e({provide:o,useFactory:l,deps:mt},o),e({provide:uT,useValue:o,multi:!0},o),e({provide:ps,useValue:()=>R(o),multi:!0},o)}let c=i.providers;if(c!=null&&!a){let l=n;Um(c,u=>{e(u,l)})}}else return!1;return o!==n&&n.providers!==void 0}function Um(n,e){for(let t of n)nT(t)&&(t=t.\u0275providers),Array.isArray(t)?Um(t,e):e(t)}var $R=se({provide:String,useValue:se});function pT(n){return n!==null&&typeof n=="object"&&$R in n}function zR(n){return!!(n&&n.useExisting)}function GR(n){return!!(n&&n.useFactory)}function gs(n){return typeof n=="function"}function qR(n){return!!n.useClass}var Xd=new D(""),vd={},lI={},gg;function Hm(){return gg===void 0&&(gg=new _d),gg}var Je=class{},vc=class extends Je{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,o){super(),this.parent=t,this.source=r,this.scopes=o,Pg(e,s=>this.processProvider(s)),this.records.set(lT,cs(void 0,this)),o.has("environment")&&this.records.set(Je,cs(void 0,this));let i=this.records.get(Xd);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(uT,mt,G.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?Vu:Do,r)}destroy(){pc(this),this._destroyed=!0;let e=Y(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Y(e)}}onDestroy(e){return pc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){pc(this);let t=Jn(this),r=gt(void 0),o;try{return e()}finally{Jn(t),gt(r)}}get(e,t=Do,r=G.Default){if(pc(this),e.hasOwnProperty(aI))return e[aI](this);r=Jd(r);let o,i=Jn(this),s=gt(void 0);try{if(!(r&G.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=JR(e)&&Yd(e);l&&this.injectableDefInScope(l)?c=cs(Og(e),vd):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let a=r&G.Self?Hm():this.parent;return t=r&G.Optional&&t===Do?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Ad]=a[Ad]||[]).unshift(vt(e)),i)throw a;return OR(a,e,"R3InjectorError",this.source)}else throw a}finally{gt(s),Jn(i)}}resolveInjectorInitializers(){let e=Y(null),t=Jn(this),r=gt(void 0),o;try{let i=this.get(ps,mt,G.Self);for(let s of i)s()}finally{Jn(t),gt(r),Y(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(vt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=rt(e);let t=gs(e)?e:rt(e&&e.provide),r=WR(e);if(!gs(e)&&e.multi===!0){let o=this.records.get(t);o||(o=cs(void 0,vd,!0),o.factory=()=>kg(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let o=Y(null);try{return t.value===lI?rT(vt(e)):t.value===vd&&(t.value=lI,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&YR(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Y(o)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=rt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Og(n){let e=Yd(n),t=e!==null?e.factory:bo(n);if(t!==null)return t;if(n instanceof D)throw new A(204,!1);if(n instanceof Function)return KR(n);throw new A(204,!1)}function KR(n){if(n.length>0)throw new A(204,!1);let t=ER(n);return t!==null?()=>t.factory(n):()=>new n}function WR(n){if(pT(n))return cs(void 0,n.useValue);{let e=gT(n);return cs(e,vd)}}function gT(n,e,t){let r;if(gs(n)){let o=rt(n);return bo(o)||Og(o)}else if(pT(n))r=()=>rt(n.useValue);else if(GR(n))r=()=>n.useFactory(...kg(n.deps||[]));else if(zR(n))r=(o,i)=>R(rt(n.useExisting),i!==void 0&&i&G.Optional?G.Optional:void 0);else{let o=rt(n&&(n.useClass||n.provide));if(QR(n))r=()=>new o(...kg(n.deps));else return bo(o)||Og(o)}return r}function pc(n){if(n.destroyed)throw new A(205,!1)}function cs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function QR(n){return!!n.deps}function YR(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function JR(n){return typeof n=="function"||typeof n=="object"&&n instanceof D}function Pg(n,e){for(let t of n)Array.isArray(t)?Pg(t,e):t&&nT(t)?Pg(t.\u0275providers,e):e(t)}function Et(n,e){let t;n instanceof vc?(pc(n),t=n):t=new Sd(n);let r,o=Jn(t),i=gt(void 0);try{return e()}finally{Jn(o),gt(i)}}function Bm(){return oT()!==void 0||ac()!=null}function mT(n){if(!Bm())throw new A(-203,!1)}function ZR(n){let e=Ye.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function XR(n){return typeof n=="function"}var or=0,K=1,L=2,Ze=3,en=4,It=5,Cc=6,bd=7,Ct=8,ms=9,Br=10,ge=11,Ec=12,uI=13,Ds=14,Vt=15,ko=16,ls=17,tr=18,eh=19,yT=20,Ur=21,mg=22,No=23,jt=24,hs=25,ot=26,vT=1;var Oo=7,Rd=8,ys=9,kt=10;function Hr(n){return Array.isArray(n)&&typeof n[vT]=="object"}function ir(n){return Array.isArray(n)&&n[vT]===!0}function jm(n){return(n.flags&4)!==0}function _s(n){return n.componentOffset>-1}function th(n){return(n.flags&1)===1}function yn(n){return!!n.template}function Md(n){return(n[L]&512)!==0}function bs(n){return(n[L]&256)===256}var xg=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function CT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var bc=(()=>{let n=()=>ET;return n.ngInherit=!0,n})();function ET(n){return n.type.prototype.ngOnChanges&&(n.setInput=tM),eM}function eM(){let n=TT(this),e=n?.current;if(e){let t=n.previous;if(t===Ro)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function tM(n,e,t,r,o){let i=this.declaredInputs[r],s=TT(n)||nM(n,{previous:Ro,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[i];a[i]=new xg(l&&l.currentValue,t,c===Ro),CT(n,e,o,t)}var IT="__ngSimpleChanges__";function TT(n){return n[IT]||null}function nM(n,e){return n[IT]=e}var dI=null;var ae=function(n,e=null,t){dI?.(n,e,t)},wT="svg",rM="math";function vn(n){for(;Array.isArray(n);)n=n[or];return n}function ST(n,e){return vn(e[n])}function wn(n,e){return vn(e[n.index])}function AT(n,e){return n.data[e]}function DT(n,e){return n[e]}function oM(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Cn(n,e){let t=e[n];return Hr(t)?t:t[or]}function iM(n){return(n[L]&4)===4}function Vm(n){return(n[L]&128)===128}function sM(n){return ir(n[Ze])}function vs(n,e){return e==null?null:n[e]}function _T(n){n[ls]=0}function bT(n){n[L]&1024||(n[L]|=1024,Vm(n)&&Rs(n))}function aM(n,e){for(;n>0;)e=e[Ds],n--;return e}function nh(n){return!!(n[L]&9216||n[jt]?.dirty)}function Fg(n){n[Br].changeDetectionScheduler?.notify(8),n[L]&64&&(n[L]|=1024),nh(n)&&Rs(n)}function Rs(n){n[Br].changeDetectionScheduler?.notify(0);let e=Po(n);for(;e!==null&&!(e[L]&8192||(e[L]|=8192,!Vm(e)));)e=Po(e)}function RT(n,e){if(bs(n))throw new A(911,!1);n[Ur]===null&&(n[Ur]=[]),n[Ur].push(e)}function cM(n,e){if(n[Ur]===null)return;let t=n[Ur].indexOf(e);t!==-1&&n[Ur].splice(t,1)}function Po(n){let e=n[Ze];return ir(e)?e[Ze]:e}function $m(n){return n[bd]??=[]}function zm(n){return n.cleanup??=[]}function lM(n,e,t,r){let o=$m(e);o.push(t),n.firstCreatePass&&zm(n).push(r,o.length-1)}var q={lFrame:FT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Lg=!1;function uM(){return q.lFrame.elementDepthCount}function dM(){q.lFrame.elementDepthCount++}function hM(){q.lFrame.elementDepthCount--}function Gm(){return q.bindingsEnabled}function MT(){return q.skipHydrationRootTNode!==null}function fM(n){return q.skipHydrationRootTNode===n}function pM(){q.skipHydrationRootTNode=null}function U(){return q.lFrame.lView}function Ae(){return q.lFrame.tView}function pz(n){return q.lFrame.contextLView=n,n[Ct]}function gz(n){return q.lFrame.contextLView=null,n}function it(){let n=kT();for(;n!==null&&n.type===64;)n=n.parent;return n}function kT(){return q.lFrame.currentTNode}function gM(){let n=q.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Bo(n,e){let t=q.lFrame;t.currentTNode=n,t.isParent=e}function qm(){return q.lFrame.isParent}function Km(){q.lFrame.isParent=!1}function mM(){return q.lFrame.contextLView}function NT(){return Lg}function kd(n){let e=Lg;return Lg=n,e}function Sn(){let n=q.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function yM(){return q.lFrame.bindingIndex}function vM(n){return q.lFrame.bindingIndex=n}function rh(){return q.lFrame.bindingIndex++}function Wm(n){let e=q.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function CM(){return q.lFrame.inI18n}function EM(n,e){let t=q.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ug(e)}function IM(){return q.lFrame.currentDirectiveIndex}function Ug(n){q.lFrame.currentDirectiveIndex=n}function TM(n){let e=q.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function OT(){return q.lFrame.currentQueryIndex}function Qm(n){q.lFrame.currentQueryIndex=n}function wM(n){let e=n[K];return e.type===2?e.declTNode:e.type===1?n[It]:null}function PT(n,e,t){if(t&G.SkipSelf){let o=e,i=n;for(;o=o.parent,o===null&&!(t&G.Host);)if(o=wM(i),o===null||(i=i[Ds],o.type&10))break;if(o===null)return!1;e=o,n=i}let r=q.lFrame=xT();return r.currentTNode=e,r.lView=n,!0}function Ym(n){let e=xT(),t=n[K];q.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function xT(){let n=q.lFrame,e=n===null?null:n.child;return e===null?FT(n):e}function FT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function LT(){let n=q.lFrame;return q.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var UT=LT;function Jm(){let n=LT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function SM(n){return(q.lFrame.contextLView=aM(n,q.lFrame.contextLView))[Ct]}function jr(){return q.lFrame.selectedIndex}function xo(n){q.lFrame.selectedIndex=n}function oh(){let n=q.lFrame;return AT(n.tView,n.selectedIndex)}function mz(){q.lFrame.currentNamespace=wT}function AM(){return q.lFrame.currentNamespace}var HT=!0;function ih(){return HT}function sh(n){HT=n}function DM(n,e,t){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){let s=ET(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}o&&(t.preOrderHooks??=[]).push(0-n,o),i&&((t.preOrderHooks??=[]).push(n,i),(t.preOrderCheckHooks??=[]).push(n,i))}function Zm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let i=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Cd(n,e,t){BT(n,e,3,t)}function Ed(n,e,t,r){(n[L]&3)===t&&BT(n,e,t,r)}function yg(n,e){let t=n[L];(t&3)===e&&(t&=16383,t+=1,n[L]=t)}function BT(n,e,t,r){let o=r!==void 0?n[ls]&65535:0,i=r??-1,s=e.length-1,a=0;for(let c=o;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[ls]+=65536),(a<i||i==-1)&&(_M(n,t,e,c),n[ls]=(n[ls]&4294901760)+c+2),c++}function hI(n,e){ae(4,n,e);let t=Y(null);try{e.call(n)}finally{Y(t),ae(5,n,e)}}function _M(n,e,t,r){let o=t[r]<0,i=t[r+1],s=o?-t[r]:t[r],a=n[s];o?n[L]>>14<n[ls]>>16&&(n[L]&3)===e&&(n[L]+=16384,hI(a,i)):hI(a,i)}var fs=-1,Fo=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function bM(n){return(n.flags&8)!==0}function RM(n){return(n.flags&16)!==0}function MM(n,e,t){let r=0;for(;r<t.length;){let o=t[r];if(typeof o=="number"){if(o!==0)break;r++;let i=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,i)}else{let i=o,s=t[++r];NM(i)?n.setProperty(e,i,s):n.setAttribute(e,i,s),r++}}return r}function kM(n){return n===3||n===4||n===6}function NM(n){return n.charCodeAt(0)===64}function Cs(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let o=e[r];typeof o=="number"?t=o:t===0||(t===-1||t===2?fI(n,t,o,null,e[++r]):fI(n,t,o,null,null))}}return n}function fI(n,e,t,r,o){let i=0,s=n.length;if(e===-1)s=-1;else for(;i<n.length;){let a=n[i++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=i-1;break}}}for(;i<n.length;){let a=n[i];if(typeof a=="number")break;if(a===t){o!==null&&(n[i+1]=o);return}i++,o!==null&&i++}s!==-1&&(n.splice(s,0,e),i=s+1),n.splice(i++,0,t),o!==null&&n.splice(i++,0,o)}function jT(n){return n!==fs}function Nd(n){return n&32767}function OM(n){return n>>16}function Od(n,e){let t=OM(n),r=e;for(;t>0;)r=r[Ds],t--;return r}var Hg=!0;function Pd(n){let e=Hg;return Hg=n,e}var PM=256,VT=PM-1,$T=5,xM=0,mn={};function FM(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(mc)&&(r=t[mc]),r==null&&(r=t[mc]=xM++);let o=r&VT,i=1<<o;e.data[n+(o>>$T)]|=i}function xd(n,e){let t=zT(n,e);if(t!==-1)return t;let r=e[K];r.firstCreatePass&&(n.injectorIndex=e.length,vg(r.data,n),vg(e,null),vg(r.blueprint,null));let o=Xm(n,e),i=n.injectorIndex;if(jT(o)){let s=Nd(o),a=Od(o,e),c=a[K].data;for(let l=0;l<8;l++)e[i+l]=a[s+l]|c[s+l]}return e[i+8]=o,i}function vg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function zT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Xm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,o=e;for(;o!==null;){if(r=QT(o),r===null)return fs;if(t++,o=o[Ds],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return fs}function Bg(n,e,t){FM(n,e,t)}function GT(n,e,t){if(t&G.Optional||n!==void 0)return n;xm(e,"NodeInjector")}function qT(n,e,t,r){if(t&G.Optional&&r===void 0&&(r=null),(t&(G.Self|G.Host))===0){let o=n[ms],i=gt(void 0);try{return o?o.get(e,r,t&G.Optional):iT(e,r,t&G.Optional)}finally{gt(i)}}return GT(r,e,t)}function KT(n,e,t,r=G.Default,o){if(n!==null){if(e[L]&2048&&!(r&G.Self)){let s=BM(n,e,t,r,mn);if(s!==mn)return s}let i=WT(n,e,t,r,mn);if(i!==mn)return i}return qT(e,t,r,o)}function WT(n,e,t,r,o){let i=UM(t);if(typeof i=="function"){if(!PT(e,n,r))return r&G.Host?GT(o,t,r):qT(e,t,r,o);try{let s;if(s=i(r),s==null&&!(r&G.Optional))xm(t);else return s}finally{UT()}}else if(typeof i=="number"){let s=null,a=zT(n,e),c=fs,l=r&G.Host?e[Vt][It]:null;for((a===-1||r&G.SkipSelf)&&(c=a===-1?Xm(n,e):e[a+8],c===fs||!gI(r,!1)?a=-1:(s=e[K],a=Nd(c),e=Od(c,e)));a!==-1;){let u=e[K];if(pI(i,a,u.data)){let h=LM(a,e,t,s,r,l);if(h!==mn)return h}c=e[a+8],c!==fs&&gI(r,e[K].data[a+8]===l)&&pI(i,a,e)?(s=u,a=Nd(c),e=Od(c,e)):a=-1}}return o}function LM(n,e,t,r,o,i){let s=e[K],a=s.data[n+8],c=r==null?_s(a)&&Hg:r!=s&&(a.type&3)!==0,l=o&G.Host&&i===a,u=Id(a,s,t,c,l);return u!==null?Ic(e,s,u,a,o):mn}function Id(n,e,t,r,o){let i=n.providerIndexes,s=e.data,a=i&1048575,c=n.directiveStart,l=n.directiveEnd,u=i>>20,h=r?a:a+u,g=o?a+u:l;for(let f=h;f<g;f++){let C=s[f];if(f<c&&t===C||f>=c&&C.type===t)return f}if(o){let f=s[c];if(f&&yn(f)&&f.type===t)return c}return null}function Ic(n,e,t,r,o){let i=n[t],s=e.data;if(i instanceof Fo){let a=i;a.resolving&&rT(DR(s[t]));let c=Pd(a.canSeeViewProviders);a.resolving=!0;let l,u=a.injectImpl?gt(a.injectImpl):null,h=PT(n,r,G.Default);try{i=n[t]=a.factory(void 0,o,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&DM(t,s[t],e)}finally{u!==null&&gt(u),Pd(c),a.resolving=!1,UT()}}return i}function UM(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(mc)?n[mc]:void 0;return typeof e=="number"?e>=0?e&VT:HM:e}function pI(n,e,t){let r=1<<n;return!!(t[e+(n>>$T)]&r)}function gI(n,e){return!(n&G.Self)&&!(n&G.Host&&e)}var _o=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return KT(this._tNode,this._lView,e,Jd(r),t)}};function HM(){return new _o(it(),U())}function ey(n){return Ac(()=>{let e=n.prototype.constructor,t=e[wd]||jg(e),r=Object.prototype,o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){let i=o[wd]||jg(o);if(i&&i!==t)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function jg(n){return ZI(n)?()=>{let e=jg(rt(n));return e&&e()}:bo(n)}function BM(n,e,t,r,o){let i=n,s=e;for(;i!==null&&s!==null&&s[L]&2048&&!Md(s);){let a=WT(i,s,t,r|G.Self,mn);if(a!==mn)return a;let c=i.parent;if(!c){let l=s[yT];if(l){let u=l.get(t,mn,r);if(u!==mn)return u}c=QT(s),s=s[Ds]}i=c}return o}function QT(n){let e=n[K],t=e.type;return t===2?e.declTNode:t===1?n[It]:null}function mI(n,e=null,t=null,r){let o=YT(n,e,t,r);return o.resolveInjectorInitializers(),o}function YT(n,e=null,t=null,r,o=new Set){let i=[t||mt,VR(n)];return r=r||(typeof n=="object"?void 0:vt(n)),new vc(i,e||Hm(),r||null,o)}var qe=class n{static THROW_IF_NOT_FOUND=Do;static NULL=new _d;static create(e,t){if(Array.isArray(e))return mI({name:""},t,e,"");{let r=e.name??"";return mI({name:r},e.parent,e.providers,r)}}static \u0275prov=M({token:n,providedIn:"any",factory:()=>R(lT)});static __NG_ELEMENT_ID__=-1};var jM=new D("");jM.__NG_ELEMENT_ID__=n=>{let e=it();if(e===null)throw new A(204,!1);if(e.type&2)return e.value;if(n&G.Optional)return null;throw new A(204,!1)};var JT=!1,Vr=(()=>{class n{static __NG_ELEMENT_ID__=VM;static __NG_ENV_ID__=t=>t}return n})(),Fd=class extends Vr{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return bs(t)?(e(),()=>{}):(RT(t,e),()=>cM(t,e))}};function VM(){return new Fd(U())}var Lo=class{},ty=new D("",{providedIn:"root",factory:()=>!1});var ZT=new D(""),XT=new D(""),sr=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new xe(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=M({token:n,providedIn:"root",factory:()=>new n})}return n})();var Vg=class extends we{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Bm()&&(this.destroyRef=T(Vr,{optional:!0})??void 0,this.pendingTasks=T(sr,{optional:!0})??void 0)}emit(e){let t=Y(null);try{super.next(e)}finally{Y(t)}}subscribe(e,t,r){let o=e,i=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return e instanceof Te&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},yt=Vg;function Tc(...n){}function ew(n){let e,t;function r(){n=Tc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function yI(n){return queueMicrotask(()=>n()),()=>{n=Tc}}var ny="isAngularZone",Ld=ny+"_ID",$M=0,ie=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new yt(!1);onMicrotaskEmpty=new yt(!1);onStable=new yt(!1);onError=new yt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=JT}=e;if(typeof Zone>"u")throw new A(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,qM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ny)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new A(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new A(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,zM,Tc,Tc);try{return i.runTask(s,t,r)}finally{i.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},zM={};function ry(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function GM(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){ew(()=>{n.callbackScheduled=!1,$g(n),n.isCheckStableRunning=!0,ry(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),$g(n)}function qM(n){let e=()=>{GM(n)},t=$M++;n._inner=n._inner.fork({name:"angular",properties:{[ny]:!0,[Ld]:t,[Ld+t]:!0},onInvokeTask:(r,o,i,s,a,c)=>{if(KM(c))return r.invokeTask(i,s,a,c);try{return vI(n),r.invokeTask(i,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),CI(n)}},onInvoke:(r,o,i,s,a,c,l)=>{try{return vI(n),r.invoke(i,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!WM(c)&&e(),CI(n)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,$g(n),ry(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function $g(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function vI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function CI(n){n._nesting--,ry(n)}var Ud=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new yt;onMicrotaskEmpty=new yt;onStable=new yt;onError=new yt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,o){return e.apply(t,r)}};function KM(n){return tw(n,"__ignore_ng_zone__")}function WM(n){return tw(n,"__scheduler_tick__")}function tw(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function QM(n="zone.js",e){return n==="noop"?new Ud:n==="zone.js"?new ie(e):n}var En=class{_console=console;handleError(e){this._console.error("ERROR",e)}},YM=new D("",{providedIn:"root",factory:()=>{let n=T(ie),e=T(En);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function EI(n,e){return QI(n,e)}function JM(n){return QI(WI,n)}var nw=(EI.required=JM,EI);function ZM(){return Ms(it(),U())}function Ms(n,e){return new ar(wn(n,e))}var ar=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=ZM}return n})();function XM(n){return n instanceof ar?n.nativeElement:n}function ek(n){return typeof n=="function"&&n[Ht]!==void 0}function yz(n,e){let t=Qp(n,e?.equal),r=t[Ht];return t.set=o=>sc(r,o),t.update=o=>Yp(r,o),t.asReadonly=tk.bind(t),t}function tk(){let n=this[Ht];if(n.readonlyFn===void 0){let e=()=>this();e[Ht]=n,n.readonlyFn=e}return n.readonlyFn}function rw(n){return ek(n)&&typeof n.set=="function"}function nk(){return this._results[Symbol.iterator]()}var zg=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new we}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=FR(e);(this._changesDetected=!xR(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=nk};function ow(n){return(n.flags&128)===128}var iw=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(iw||{}),sw=new Map,rk=0;function ok(){return rk++}function ik(n){sw.set(n[eh],n)}function Gg(n){sw.delete(n[eh])}var II="__ngContext__";function ks(n,e){Hr(e)?(n[II]=e[eh],ik(e)):n[II]=e}function aw(n){return lw(n[Ec])}function cw(n){return lw(n[en])}function lw(n){for(;n!==null&&!ir(n);)n=n[en];return n}var qg;function uw(n){qg=n}function sk(){if(qg!==void 0)return qg;if(typeof document<"u")return document;throw new A(210,!1)}var oy=new D("",{providedIn:"root",factory:()=>ak}),ak="ng",iy=new D(""),Ns=new D("",{providedIn:"platform",factory:()=>"unknown"});var vz=new D(""),sy=new D("",{providedIn:"root",factory:()=>sk().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ck="h",lk="b";var dw=!1,uk=new D("",{providedIn:"root",factory:()=>dw});var ay=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(ay||{}),Os=new D(""),TI=new Set;function Rc(n){TI.has(n)||(TI.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var cy=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=dk}return n})();function dk(){return new cy(U(),it())}var us=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(us||{}),hw=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=M({token:n,providedIn:"root",factory:()=>new n})}return n})(),hk=[us.EarlyRead,us.Write,us.MixedReadWrite,us.Read],fk=(()=>{class n{ngZone=T(ie);scheduler=T(Lo);errorHandler=T(En,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){T(Os,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ae(16),this.executing=!0;for(let r of hk)for(let o of this.sequences)if(!(o.erroredOrDestroyed||!o.hooks[r]))try{o.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let i=o.hooks[r];return i(o.pipelinedValue)},o.snapshot))}catch(i){o.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ae(17)}register(t){let{view:r}=t;r!==void 0?((r[hs]??=[]).push(t),Rs(r),r[L]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(ay.AFTER_NEXT_RENDER,t):t()}static \u0275prov=M({token:n,providedIn:"root",factory:()=>new n})}return n})(),Kg=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,o,i,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=o,this.snapshot=s,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[hs];e&&(this.view[hs]=e.filter(t=>t!==this))}};function ly(n,e){!e?.injector&&mT(ly);let t=e?.injector??T(qe);return Rc("NgAfterNextRender"),gk(n,t,e,!0)}function pk(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function gk(n,e,t,r){let o=e.get(hw);o.impl??=e.get(fk);let i=e.get(Os,null,{optional:!0}),s=t?.phase??us.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(Vr):null,c=e.get(cy,null,{optional:!0}),l=new Kg(o.impl,pk(n,s),c?.view,r,a,i?.snapshot(null));return o.impl.register(l),l}var mk=(n,e,t,r)=>{};function yk(n,e,t,r){mk(n,e,t,r)}var vk=()=>null;function fw(n,e,t=!1){return vk(n,e,t)}function pw(n,e){let t=n.contentQueries;if(t!==null){let r=Y(null);try{for(let o=0;o<t.length;o+=2){let i=t[o],s=t[o+1];if(s!==-1){let a=n.data[s];Qm(i),a.contentQueries(2,e[s],s)}}}finally{Y(r)}}}function Wg(n,e,t){Qm(0);let r=Y(null);try{e(n,t)}finally{Y(r)}}function uy(n,e,t){if(jm(e)){let r=Y(null);try{let o=e.directiveStart,i=e.directiveEnd;for(let s=o;s<i;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Y(r)}}}var In=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(In||{}),pd;function Ck(){if(pd===void 0&&(pd=null,Ye.trustedTypes))try{pd=Ye.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return pd}function ah(n){return Ck()?.createHTML(n)||n}var nr=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${KI})`}},Qg=class extends nr{getTypeName(){return"HTML"}},Yg=class extends nr{getTypeName(){return"Style"}},Jg=class extends nr{getTypeName(){return"Script"}},Zg=class extends nr{getTypeName(){return"URL"}},Xg=class extends nr{getTypeName(){return"ResourceURL"}};function An(n){return n instanceof nr?n.changingThisBreaksApplicationSecurity:n}function Ps(n,e){let t=Ek(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${KI})`)}return t===e}function Ek(n){return n instanceof nr&&n.getTypeName()||null}function gw(n){return new Qg(n)}function mw(n){return new Yg(n)}function yw(n){return new Jg(n)}function vw(n){return new Zg(n)}function Cw(n){return new Xg(n)}function Ik(n){let e=new tm(n);return Tk()?new em(e):e}var em=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(ah(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},tm=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=ah(e),t}};function Tk(){try{return!!new window.DOMParser().parseFromString(ah(""),"text/html")}catch{return!1}}var wk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function dy(n){return n=String(n),n.match(wk)?n:"unsafe:"+n}function cr(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Mc(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var Ew=cr("area,br,col,hr,img,wbr"),Iw=cr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Tw=cr("rp,rt"),Sk=Mc(Tw,Iw),Ak=Mc(Iw,cr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Dk=Mc(Tw,cr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),wI=Mc(Ew,Ak,Dk,Sk),ww=cr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_k=cr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),bk=cr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Rk=Mc(ww,_k,bk),Mk=cr("script,style,template"),nm=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,r=!0,o=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){o.push(t),t=Ok(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=Nk(t);if(i){t=i;break}t=o.pop()}}return this.buf.join("")}startElement(e){let t=SI(e).toLowerCase();if(!wI.hasOwnProperty(t))return this.sanitizedSomething=!0,!Mk.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let o=0;o<r.length;o++){let i=r.item(o),s=i.name,a=s.toLowerCase();if(!Rk.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=i.value;ww[a]&&(c=dy(c)),this.buf.push(" ",s,'="',AI(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=SI(e).toLowerCase();wI.hasOwnProperty(t)&&!Ew.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(AI(e))}};function kk(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function Nk(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw Sw(e);return e}function Ok(n){let e=n.firstChild;if(e&&kk(n,e))throw Sw(e);return e}function SI(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function Sw(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var Pk=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xk=/([^\#-~ |!])/g;function AI(n){return n.replace(/&/g,"&amp;").replace(Pk,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(xk,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var gd;function Aw(n,e){let t=null;try{gd=gd||Ik(n);let r=e?String(e):"";t=gd.getInertBodyElement(r);let o=5,i=r;do{if(o===0)throw new Error("Failed to sanitize html because the input is unstable");o--,r=i,i=t.innerHTML,t=gd.getInertBodyElement(r)}while(r!==i);let a=new nm().sanitizeChildren(DI(t)||t);return ah(a)}finally{if(t){let r=DI(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function DI(n){return"content"in n&&Fk(n)?n.content:null}function Fk(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var $r=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}($r||{});var Lk=/^>|^->|<!--|-->|--!>|<!-$/g,Uk=/(<|>)/g,Hk="\u200B$1\u200B";function Bk(n){return n.replace(Lk,e=>e.replace(Uk,Hk))}function Dw(n){return n instanceof Function?n():n}function jk(n,e,t){let r=n.length;for(;;){let o=n.indexOf(e,t);if(o===-1)return o;if(o===0||n.charCodeAt(o-1)<=32){let i=e.length;if(o+i===r||n.charCodeAt(o+i)<=32)return o}t=o+1}}var _w="ng-template";function Vk(n,e,t,r){let o=0;if(r){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&jk(e[o+1].toLowerCase(),t,0)!==-1)return!0}else if(hy(n))return!1;if(o=e.indexOf(1,o),o>-1){let i;for(;++o<e.length&&typeof(i=e[o])=="string";)if(i.toLowerCase()===t)return!0}return!1}function hy(n){return n.type===4&&n.value!==_w}function $k(n,e,t){let r=n.type===4&&!t?_w:n.value;return e===r}function zk(n,e,t){let r=4,o=n.attrs,i=o!==null?Kk(o):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Xt(r)&&!Xt(c))return!1;if(s&&Xt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!$k(n,c,t)||c===""&&e.length===1){if(Xt(r))return!1;s=!0}}else if(r&8){if(o===null||!Vk(n,o,c,t)){if(Xt(r))return!1;s=!0}}else{let l=e[++a],u=Gk(c,o,hy(n),t);if(u===-1){if(Xt(r))return!1;s=!0;continue}if(l!==""){let h;if(u>i?h="":h=o[u+1].toLowerCase(),r&2&&l!==h){if(Xt(r))return!1;s=!0}}}}return Xt(r)||s}function Xt(n){return(n&1)===0}function Gk(n,e,t,r){if(e===null)return-1;let o=0;if(r||!t){let i=!1;for(;o<e.length;){let s=e[o];if(s===n)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return Wk(e,n)}function bw(n,e,t=!1){for(let r=0;r<e.length;r++)if(zk(n,e[r],t))return!0;return!1}function qk(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function Kk(n){for(let e=0;e<n.length;e++){let t=n[e];if(kM(t))return e}return n.length}function Wk(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Qk(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let o=0;o<n.length;o++)if(n[o]!==r[o])continue e;return!0}}return!1}function _I(n,e){return n?":not("+e.trim()+")":e}function Yk(n){let e=n[0],t=1,r=2,o="",i=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!Xt(s)&&(e+=_I(i,o),o=""),r=s,i=i||!Xt(r);t++}return o!==""&&(e+=_I(i,o)),e}function Jk(n){return n.map(Yk).join(",")}function Zk(n){let e=[],t=[],r=1,o=2;for(;r<n.length;){let i=n[r];if(typeof i=="string")o===2?i!==""&&e.push(i,n[++r]):o===8&&t.push(i);else{if(!Xt(o))break;o=i}r++}return t.length&&e.push(1,...t),e}var Nt={};function Xk(n,e){return n.createText(e)}function eN(n,e,t){n.setValue(e,t)}function tN(n,e){return n.createComment(Bk(e))}function Rw(n,e,t){return n.createElement(e,t)}function Hd(n,e,t,r,o){n.insertBefore(e,t,r,o)}function Mw(n,e,t){n.appendChild(e,t)}function bI(n,e,t,r,o){r!==null?Hd(n,e,t,r,o):Mw(n,e,t)}function nN(n,e,t){n.removeChild(null,e,t)}function rN(n,e,t){n.setAttribute(e,"style",t)}function oN(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function kw(n,e,t){let{mergedAttrs:r,classes:o,styles:i}=t;r!==null&&MM(n,e,r),o!==null&&oN(n,e,o),i!==null&&rN(n,e,i)}function fy(n,e,t,r,o,i,s,a,c,l,u){let h=ot+r,g=h+o,f=iN(h,g),C=typeof l=="function"?l():l;return f[K]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:C,incompleteFirstPass:!1,ssrId:u}}function iN(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Nt);return t}function sN(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=fy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function py(n,e,t,r,o,i,s,a,c,l,u){let h=e.blueprint.slice();return h[or]=o,h[L]=r|4|128|8|64|1024,(l!==null||n&&n[L]&2048)&&(h[L]|=2048),_T(h),h[Ze]=h[Ds]=n,h[Ct]=t,h[Br]=s||n&&n[Br],h[ge]=a||n&&n[ge],h[ms]=c||n&&n[ms]||null,h[It]=i,h[eh]=ok(),h[Cc]=u,h[yT]=l,h[Vt]=e.type==2?n[Vt]:h,h}function aN(n,e,t){let r=wn(e,n),o=sN(t),i=n[Br].rendererFactory,s=gy(n,py(n,o,null,Nw(t),r,e,null,i.createRenderer(r,t),null,null,null));return n[e.index]=s}function Nw(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Ow(n,e,t,r){if(t===0)return-1;let o=e.length;for(let i=0;i<t;i++)e.push(r),n.blueprint.push(r),n.data.push(null);return o}function gy(n,e){return n[Ec]?n[uI][en]=e:n[Ec]=e,n[uI]=e,e}function Cz(n=1){Pw(Ae(),U(),jr()+n,!1)}function Pw(n,e,t,r){if(!r)if((e[L]&3)===3){let i=n.preOrderCheckHooks;i!==null&&Cd(e,i,t)}else{let i=n.preOrderHooks;i!==null&&Ed(e,i,0,t)}xo(t)}var ch=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ch||{});function rm(n,e,t,r){let o=Y(null);try{let[i,s,a]=n.inputs[t],c=null;(s&ch.SignalBased)!==0&&(c=e[i][Ht]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,i):CT(e,c,i,r)}finally{Y(o)}}function xw(n,e,t,r,o){let i=jr(),s=r&2;try{xo(-1),s&&e.length>ot&&Pw(n,e,ot,!1),ae(s?2:0,o),t(r,o)}finally{xo(i),ae(s?3:1,o)}}function lh(n,e,t){fN(n,e,t),(t.flags&64)===64&&pN(n,e,t)}function my(n,e,t=wn){let r=e.localNames;if(r!==null){let o=e.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?t(e,n):n[s];n[o++]=a}}}function cN(n,e,t,r){let i=r.get(uk,dw)||t===In.ShadowDom,s=n.selectRootElement(e,i);return lN(s),s}function lN(n){uN(n)}var uN=()=>null;function dN(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function yy(n,e,t,r,o,i,s,a){if(!a&&Cy(e,n,t,r,o)){_s(e)&&hN(t,e.index);return}if(e.type&3){let c=wn(e,t);r=dN(r),o=s!=null?s(o,e.value||"",r):o,i.setProperty(c,r,o)}else e.type&12}function hN(n,e){let t=Cn(e,n);t[L]&16||(t[L]|=64)}function fN(n,e,t){let r=t.directiveStart,o=t.directiveEnd;_s(t)&&aN(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||xd(t,e);let i=t.initialInputs;for(let s=r;s<o;s++){let a=n.data[s],c=Ic(e,n,s,t);if(ks(c,e),i!==null&&vN(e,s-r,c,a,t,i),yn(a)){let l=Cn(t.index,e);l[Ct]=Ic(e,n,s,t)}}}function pN(n,e,t){let r=t.directiveStart,o=t.directiveEnd,i=t.index,s=IM();try{xo(i);for(let a=r;a<o;a++){let c=n.data[a],l=e[a];Ug(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&gN(c,l)}}finally{xo(-1),Ug(s)}}function gN(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function vy(n,e){let t=n.directiveRegistry,r=null;if(t)for(let o=0;o<t.length;o++){let i=t[o];bw(e,i.selectors,!1)&&(r??=[],yn(i)?r.unshift(i):r.push(i))}return r}function mN(n,e,t,r,o,i){let s=wn(n,e);yN(e[ge],s,i,n.value,t,r,o)}function yN(n,e,t,r,o,i,s){if(i==null)n.removeAttribute(e,o,t);else{let a=s==null?yc(i):s(i,r||"",o);n.setAttribute(e,o,a,t)}}function vN(n,e,t,r,o,i){let s=i[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];rm(r,t,c,l)}}function CN(n,e){let t=n[ms],r=t?t.get(En,null):null;r&&r.handleError(e)}function Cy(n,e,t,r,o){let i=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],h=e.data[l];rm(h,t[l],u,o),a=!0}if(i)for(let c of i){let l=t[c],u=e.data[c];rm(u,l,r,o),a=!0}return a}function EN(n,e){let t=Cn(e,n),r=t[K];IN(r,t);let o=t[or];o!==null&&t[Cc]===null&&(t[Cc]=fw(o,t[ms])),ae(18),Ey(r,t,t[Ct]),ae(19,t[Ct])}function IN(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Ey(n,e,t){Ym(e);try{let r=n.viewQuery;r!==null&&Wg(1,r,t);let o=n.template;o!==null&&xw(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[tr]?.finishViewCreation(n),n.staticContentQueries&&pw(n,e),n.staticViewQueries&&Wg(2,n.viewQuery,t);let i=n.components;i!==null&&TN(e,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[L]&=-5,Jm()}}function TN(n,e){for(let t=0;t<e.length;t++)EN(n,e[t])}function Fw(n,e,t,r){let o=Y(null);try{let i=e.tView,a=n[L]&4096?4096:16,c=py(n,i,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[ko]=l;let u=n[tr];return u!==null&&(c[tr]=u.createEmbeddedView(i)),Ey(i,c,t),c}finally{Y(o)}}function om(n,e){return!e||e.firstChild===null||ow(n)}var wN;function Iy(n,e){return wN(n,e)}var Tn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Tn||{});function Ty(n){return(n.flags&32)===32}function ds(n,e,t,r,o){if(r!=null){let i,s=!1;ir(r)?i=r:Hr(r)&&(s=!0,r=r[or]);let a=vn(r);n===0&&t!==null?o==null?Mw(e,t,a):Hd(e,t,a,o||null,!0):n===1&&t!==null?Hd(e,t,a,o||null,!0):n===2?nN(e,a,s):n===3&&e.destroyNode(a),i!=null&&ON(e,n,i,t,o)}}function SN(n,e){Lw(n,e),e[or]=null,e[It]=null}function AN(n,e,t,r,o,i){r[or]=o,r[It]=e,dh(n,r,t,1,o,i)}function Lw(n,e){e[Br].changeDetectionScheduler?.notify(9),dh(n,e,e[ge],2,null,null)}function DN(n){let e=n[Ec];if(!e)return Cg(n[K],n);for(;e;){let t=null;if(Hr(e))t=e[Ec];else{let r=e[kt];r&&(t=r)}if(!t){for(;e&&!e[en]&&e!==n;)Hr(e)&&Cg(e[K],e),e=e[Ze];e===null&&(e=n),Hr(e)&&Cg(e[K],e),t=e&&e[en]}e=t}}function wy(n,e){let t=n[ys],r=t.indexOf(e);t.splice(r,1)}function Uw(n,e){if(bs(e))return;let t=e[ge];t.destroyNode&&dh(n,e,t,3,null,null),DN(e)}function Cg(n,e){if(bs(e))return;let t=Y(null);try{e[L]&=-129,e[L]|=256,e[jt]&&ic(e[jt]),bN(n,e),_N(n,e),e[K].type===1&&e[ge].destroy();let r=e[ko];if(r!==null&&ir(e[Ze])){r!==e[Ze]&&wy(r,e);let o=e[tr];o!==null&&o.detachView(n)}Gg(e)}finally{Y(t)}}function _N(n,e){let t=n.cleanup,r=e[bd];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[bd]=null);let o=e[Ur];if(o!==null){e[Ur]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let i=e[No];if(i!==null){e[No]=null;for(let s of i)s.destroy()}}function bN(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let o=e[t[r]];if(!(o instanceof Fo)){let i=t[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],c=i[s+1];ae(4,a,c);try{c.call(a)}finally{ae(5,a,c)}}else{ae(4,o,i);try{i.call(o)}finally{ae(5,o,i)}}}}}function Hw(n,e,t){return RN(n,e.parent,t)}function RN(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[or];if(_s(r)){let{encapsulation:o}=n.data[r.directiveStart+r.componentOffset];if(o===In.None||o===In.Emulated)return null}return wn(r,t)}function Bw(n,e,t){return kN(n,e,t)}function MN(n,e,t){return n.type&40?wn(n,t):null}var kN=MN,RI;function uh(n,e,t,r){let o=Hw(n,r,e),i=e[ge],s=r.parent||e[It],a=Bw(s,r,e);if(o!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)bI(i,o,t[c],a,!1);else bI(i,o,t,a,!1);RI!==void 0&&RI(i,r,e,t,o)}function gc(n,e){if(e!==null){let t=e.type;if(t&3)return wn(e,n);if(t&4)return im(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return gc(n,r);{let o=n[e.index];return ir(o)?im(-1,o):vn(o)}}else{if(t&128)return gc(n,e.next);if(t&32)return Iy(e,n)()||vn(n[e.index]);{let r=jw(n,e);if(r!==null){if(Array.isArray(r))return r[0];let o=Po(n[Vt]);return gc(o,r)}else return gc(n,e.next)}}}return null}function jw(n,e){if(e!==null){let r=n[Vt][It],o=e.projection;return r.projection[o]}return null}function im(n,e){let t=kt+n+1;if(t<e.length){let r=e[t],o=r[K].firstChild;if(o!==null)return gc(r,o)}return e[Oo]}function Sy(n,e,t,r,o,i,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&ks(vn(a),r),t.flags|=2),!Ty(t))if(c&8)Sy(n,e,t.child,r,o,i,!1),ds(e,n,o,a,i);else if(c&32){let l=Iy(t,r),u;for(;u=l();)ds(e,n,o,u,i);ds(e,n,o,a,i)}else c&16?Vw(n,e,r,t,o,i):ds(e,n,o,a,i);t=s?t.projectionNext:t.next}}function dh(n,e,t,r,o,i){Sy(t,r,n.firstChild,e,o,i,!1)}function NN(n,e,t){let r=e[ge],o=Hw(n,t,e),i=t.parent||e[It],s=Bw(i,t,e);Vw(r,0,e,t,o,s)}function Vw(n,e,t,r,o,i){let s=t[Vt],c=s[It].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];ds(e,n,o,u,i)}else{let l=c,u=s[Ze];ow(r)&&(l.flags|=128),Sy(n,e,l,u,o,i,!0)}}function ON(n,e,t,r,o){let i=t[Oo],s=vn(t);i!==s&&ds(e,n,r,i,o);for(let a=kt;a<t.length;a++){let c=t[a];dh(c[K],c,n,e,r,i)}}function PN(n,e,t,r,o){if(e)o?n.addClass(t,r):n.removeClass(t,r);else{let i=r.indexOf("-")===-1?void 0:Tn.DashCase;o==null?n.removeStyle(t,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=Tn.Important),n.setStyle(t,r,o,i))}}function Bd(n,e,t,r,o=!1){for(;t!==null;){if(t.type===128){t=o?t.projectionNext:t.next;continue}let i=e[t.index];i!==null&&r.push(vn(i)),ir(i)&&xN(i,r);let s=t.type;if(s&8)Bd(n,e,t.child,r);else if(s&32){let a=Iy(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=jw(e,t);if(Array.isArray(a))r.push(...a);else{let c=Po(e[Vt]);Bd(c[K],c,a,r,!0)}}t=o?t.projectionNext:t.next}return r}function xN(n,e){for(let t=kt;t<n.length;t++){let r=n[t],o=r[K].firstChild;o!==null&&Bd(r[K],r,o,e)}n[Oo]!==n[or]&&e.push(n[Oo])}function $w(n){if(n[hs]!==null){for(let e of n[hs])e.impl.addSequence(e);n[hs].length=0}}var zw=[];function FN(n){return n[jt]??LN(n)}function LN(n){let e=zw.pop()??Object.create(HN);return e.lView=n,e}function UN(n){n.lView[jt]!==n&&(n.lView=null,zw.push(n))}var HN=S(m({},Ki),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Rs(n.lView)},consumerOnSignalRead(){this.lView[jt]=this}});function BN(n){let e=n[jt]??Object.create(jN);return e.lView=n,e}var jN=S(m({},Ki),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Po(n.lView);for(;e&&!Gw(e[K]);)e=Po(e);e&&bT(e)},consumerOnSignalRead(){this.lView[jt]=this}});function Gw(n){return n.type!==2}function qw(n){if(n[No]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[No])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[L]&8192)}}var VN=100;function Kw(n,e=!0,t=0){let o=n[Br].rendererFactory,i=!1;i||o.begin?.();try{$N(n,t)}catch(s){throw e&&CN(n,s),s}finally{i||o.end?.()}}function $N(n,e){let t=NT();try{kd(!0),sm(n,e);let r=0;for(;nh(n);){if(r===VN)throw new A(103,!1);r++,sm(n,1)}}finally{kd(t)}}function zN(n,e,t,r){if(bs(e))return;let o=e[L],i=!1,s=!1;Ym(e);let a=!0,c=null,l=null;i||(Gw(n)?(l=FN(e),c=oc(l)):$p()===null?(a=!1,l=BN(e),c=oc(l)):e[jt]&&(ic(e[jt]),e[jt]=null));try{_T(e),vM(n.bindingStartIndex),t!==null&&xw(n,e,t,2,r);let u=(o&3)===3;if(!i)if(u){let f=n.preOrderCheckHooks;f!==null&&Cd(e,f,null)}else{let f=n.preOrderHooks;f!==null&&Ed(e,f,0,null),yg(e,0)}if(s||GN(e),qw(e),Ww(e,0),n.contentQueries!==null&&pw(n,e),!i)if(u){let f=n.contentCheckHooks;f!==null&&Cd(e,f)}else{let f=n.contentHooks;f!==null&&Ed(e,f,1),yg(e,1)}KN(n,e);let h=n.components;h!==null&&Yw(e,h,0);let g=n.viewQuery;if(g!==null&&Wg(2,g,r),!i)if(u){let f=n.viewCheckHooks;f!==null&&Cd(e,f)}else{let f=n.viewHooks;f!==null&&Ed(e,f,2),yg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[mg]){for(let f of e[mg])f();e[mg]=null}i||($w(e),e[L]&=-73)}catch(u){throw i||Rs(e),u}finally{l!==null&&(Lu(l,c),a&&UN(l)),Jm()}}function Ww(n,e){for(let t=aw(n);t!==null;t=cw(t))for(let r=kt;r<t.length;r++){let o=t[r];Qw(o,e)}}function GN(n){for(let e=aw(n);e!==null;e=cw(e)){if(!(e[L]&2))continue;let t=e[ys];for(let r=0;r<t.length;r++){let o=t[r];bT(o)}}}function qN(n,e,t){ae(18);let r=Cn(e,n);Qw(r,t),ae(19,r[Ct])}function Qw(n,e){Vm(n)&&sm(n,e)}function sm(n,e){let r=n[K],o=n[L],i=n[jt],s=!!(e===0&&o&16);if(s||=!!(o&64&&e===0),s||=!!(o&1024),s||=!!(i?.dirty&&Uu(i)),s||=!1,i&&(i.dirty=!1),n[L]&=-9217,s)zN(r,n,r.template,n[Ct]);else if(o&8192){qw(n),Ww(n,1);let a=r.components;a!==null&&Yw(n,a,1),$w(n)}}function Yw(n,e,t){for(let r=0;r<e.length;r++)qN(n,e[r],t)}function KN(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let o=t[r];if(o<0)xo(~o);else{let i=o,s=t[++r],a=t[++r];EM(s,i);let c=e[i];ae(24,c),a(2,c),ae(25,c)}}}finally{xo(-1)}}function Ay(n,e){let t=NT()?64:1088;for(n[Br].changeDetectionScheduler?.notify(e);n;){n[L]|=t;let r=Po(n);if(Md(n)&&!r)return n;n=r}return null}function Jw(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Zw(n,e,t,r=!0){let o=e[K];if(WN(o,e,n,t),r){let s=im(t,n),a=e[ge],c=a.parentNode(n[Oo]);c!==null&&AN(o,n[It],a,e,c,s)}let i=e[Cc];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function am(n,e){if(n.length<=kt)return;let t=kt+e,r=n[t];if(r){let o=r[ko];o!==null&&o!==n&&wy(o,r),e>0&&(n[t-1][en]=r[en]);let i=Dd(n,kt+e);SN(r[K],r);let s=i[tr];s!==null&&s.detachView(i[K]),r[Ze]=null,r[en]=null,r[L]&=-129}return r}function WN(n,e,t,r){let o=kt+r,i=t.length;r>0&&(t[o-1][en]=e),r<i-kt?(e[en]=t[o],cT(t,kt+r,e)):(t.push(e),e[en]=null),e[Ze]=t;let s=e[ko];s!==null&&t!==s&&Xw(s,e);let a=e[tr];a!==null&&a.insertView(n),Fg(e),e[L]|=128}function Xw(n,e){let t=n[ys],r=e[Ze];if(Hr(r))n[L]|=2;else{let o=r[Ze][Vt];e[Vt]!==o&&(n[L]|=2)}t===null?n[ys]=[e]:t.push(e)}var wc=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[K];return Bd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Ct]}set context(e){this._lView[Ct]=e}get destroyed(){return bs(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ze];if(ir(e)){let t=e[Rd],r=t?t.indexOf(this):-1;r>-1&&(am(e,r),Dd(t,r))}this._attachedToViewContainer=!1}Uw(this._lView[K],this._lView)}onDestroy(e){RT(this._lView,e)}markForCheck(){Ay(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[L]&=-129}reattach(){Fg(this._lView),this._lView[L]|=128}detectChanges(){this._lView[L]|=1024,Kw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new A(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Md(this._lView),t=this._lView[ko];t!==null&&!e&&wy(t,this._lView),Lw(this._lView[K],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new A(902,!1);this._appRef=e;let t=Md(this._lView),r=this._lView[ko];r!==null&&!t&&Xw(r,this._lView),Fg(this._lView)}};var Uo=(()=>{class n{static __NG_ELEMENT_ID__=JN}return n})(),QN=Uo,YN=class extends QN{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let o=Fw(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new wc(o)}};function JN(){return hh(it(),U())}function hh(n,e){return n.type&4?new YN(e,n,Ms(n,e)):null}function kc(n,e,t,r,o){let i=n.data[e];if(i===null)i=ZN(n,e,t,r,o),CM()&&(i.flags|=32);else if(i.type&64){i.type=t,i.value=r,i.attrs=o;let s=gM();i.injectorIndex=s===null?-1:s.injectorIndex}return Bo(i,!0),i}function ZN(n,e,t,r,o){let i=kT(),s=qm(),a=s?i:i&&i.parent,c=n.data[e]=eO(n,a,t,e,r,o);return XN(n,c,i,s),c}function XN(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function eO(n,e,t,r,o,i){let s=e?e.injectorIndex:-1,a=0;return MT()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Tz=new RegExp(`^(\\d+)*(${lk}|${ck})*(.*)`);var tO=()=>null;function cm(n,e){return tO(n,e)}var nO=class{},eS=class{},lm=class{resolveComponentFactory(e){throw Error(`No component factory found for ${vt(e)}.`)}},fh=class{static NULL=new lm},Es=class{},Nc=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>rO()}return n})();function rO(){let n=U(),e=it(),t=Cn(e.index,n);return(Hr(t)?t:n)[ge]}var oO=(()=>{class n{static \u0275prov=M({token:n,providedIn:"root",factory:()=>null})}return n})();var Eg={},um=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Jd(r);let o=this.injector.get(e,Eg,r);return o!==Eg||t===Eg?o:this.parentInjector.get(e,t,r)}};function dm(n,e,t){let r=t?n.styles:null,o=t?n.classes:null,i=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")i=a;else if(i==1)o=bg(o,a);else if(i==2){let c=a,l=e[++s];r=bg(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=o:n.classesWithoutHost=o}function me(n,e=G.Default){let t=U();if(t===null)return R(n,e);let r=it();return KT(r,t,rt(n),e)}function tS(){let n="invalid";throw new Error(n)}function Dy(n,e,t,r,o){let i=r===null?null:{"":-1},s=o(n,t);if(s!==null){let a,c=null,l=null,u=sO(s);u===null?a=s:[a,c,l]=u,lO(n,e,t,a,i,c,l)}i!==null&&r!==null&&iO(t,r,i)}function iO(n,e,t){let r=n.localNames=[];for(let o=0;o<e.length;o+=2){let i=t[e[o+1]];if(i==null)throw new A(-301,!1);r.push(e[o],i)}}function sO(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&yn(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,o=null,i=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],o??=new Map,i??=new Map,aO(s,r,i,o)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,o,i]):null}function aO(n,e,t,r){let o=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[o,e.length-1])}function cO(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function lO(n,e,t,r,o,i,s){let a=r.length,c=!1;for(let g=0;g<a;g++){let f=r[g];!c&&yn(f)&&(c=!0,cO(n,t,g)),Bg(xd(t,e),n,f.type)}gO(t,n.data.length,a);for(let g=0;g<a;g++){let f=r[g];f.providersResolver&&f.providersResolver(f)}let l=!1,u=!1,h=Ow(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let f=r[g];if(t.mergedAttrs=Cs(t.mergedAttrs,f.hostAttrs),dO(n,t,e,h,f),pO(h,f,o),s!==null&&s.has(f)){let[I,_]=s.get(f);t.directiveToIndex.set(f.type,[h,I+t.directiveStart,_+t.directiveStart])}else(i===null||!i.has(f))&&t.directiveToIndex.set(f.type,h);f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let C=f.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(C.ngOnChanges||C.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),h++}uO(n,t,i)}function uO(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let o=n.data[r];if(t===null||!t.has(o))MI(0,e,o,r),MI(1,e,o,r),NI(e,r,!1);else{let i=t.get(o);kI(0,e,i,r),kI(1,e,i,r),NI(e,r,!0)}}}function MI(n,e,t,r){let o=n===0?t.inputs:t.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[i]??=[],s[i].push(r),nS(e,i)}}function kI(n,e,t,r){let o=n===0?t.inputs:t.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s=o[i],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,i),nS(e,s)}}function nS(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function NI(n,e,t){let{attrs:r,inputs:o,hostDirectiveInputs:i}=n;if(r===null||!t&&o===null||t&&i===null||hy(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&o.hasOwnProperty(c)){let l=o[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&i.hasOwnProperty(c)){let l=i[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function dO(n,e,t,r,o){n.data[r]=o;let i=o.factory||(o.factory=bo(o.type,!0)),s=new Fo(i,yn(o),me);n.blueprint[r]=s,t[r]=s,hO(n,e,r,Ow(n,t,o.hostVars,Nt),o)}function hO(n,e,t,r,o){let i=o.hostBindings;if(i){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;fO(s)!=a&&s.push(a),s.push(t,r,i)}}function fO(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function pO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;yn(e)&&(t[""]=n)}}function gO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function rS(n,e,t,r,o,i,s,a){let c=e.consts,l=vs(c,s),u=kc(e,n,2,r,l);return i&&Dy(e,t,u,vs(c,a),o),u.mergedAttrs=Cs(u.mergedAttrs,u.attrs),u.attrs!==null&&dm(u,u.attrs,!1),u.mergedAttrs!==null&&dm(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function oS(n,e){Zm(n,e),jm(e)&&n.queries.elementEnd(e)}var jd=class extends fh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Mo(e);return new Is(t,this.ngModule)}};function mO(n){return Object.keys(n).map(e=>{let[t,r,o]=n[e],i={propName:t,templateName:e,isSignal:(r&ch.SignalBased)!==0};return o&&(i.transform=o),i})}function yO(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function vO(n,e,t){let r=e instanceof Je?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new um(t,r):t}function CO(n){let e=n.get(Es,null);if(e===null)throw new A(407,!1);let t=n.get(oO,null),r=n.get(Lo,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function EO(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return Rw(e,t,t==="svg"?wT:t==="math"?rM:null)}var Is=class extends eS{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=mO(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=yO(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Jk(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,o){ae(22);let i=Y(null);try{let s=this.componentDef,a=r?["ng-version","19.2.15"]:Zk(this.componentDef.selectors[0]),c=fy(0,null,null,1,0,null,null,null,null,[a],null),l=vO(s,o||this.ngModule,e),u=CO(l),h=u.rendererFactory.createRenderer(null,s),g=r?cN(h,r,s.encapsulation,l):EO(s,h),f=py(null,c,null,512|Nw(s),null,null,u,h,l,null,fw(g,l,!0));f[ot]=g,Ym(f);let C=null;try{let I=rS(ot,c,f,"#host",()=>[this.componentDef],!0,0);g&&(kw(h,g,I),ks(g,f)),lh(c,f,I),uy(c,I,f),oS(c,I),t!==void 0&&IO(I,this.ngContentSelectors,t),C=Cn(I.index,f),f[Ct]=C[Ct],Ey(c,f,null)}catch(I){throw C!==null&&Gg(C),Gg(f),I}finally{ae(23),Jm()}return new hm(this.componentType,f)}finally{Y(i)}}},hm=class extends nO{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=AT(t[K],ot),this.location=Ms(this._tNode,t),this.instance=Cn(this._tNode.index,t)[Ct],this.hostView=this.changeDetectorRef=new wc(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView,i=Cy(r,o[K],o,e,t);this.previousInputValues.set(e,t);let s=Cn(r.index,o);Ay(s,1)}get injector(){return new _o(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function IO(n,e,t){let r=n.projection=[];for(let o=0;o<e.length;o++){let i=t[o];r.push(i!=null&&i.length?Array.from(i):null)}}var lr=(()=>{class n{static __NG_ELEMENT_ID__=TO}return n})();function TO(){let n=it();return sS(n,U())}var wO=lr,iS=class extends wO{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ms(this._hostTNode,this._hostLView)}get injector(){return new _o(this._hostTNode,this._hostLView)}get parentInjector(){let e=Xm(this._hostTNode,this._hostLView);if(jT(e)){let t=Od(e,this._hostLView),r=Nd(e),o=t[K].data[r+8];return new _o(o,t)}else return new _o(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=OI(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-kt}createEmbeddedView(e,t,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=cm(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},i,s);return this.insertImpl(a,o,om(this._hostTNode,s)),a}createComponent(e,t,r,o,i){let s=e&&!XR(e),a;if(s)a=t;else{let C=t||{};a=C.index,r=C.injector,o=C.projectableNodes,i=C.environmentInjector||C.ngModuleRef}let c=s?e:new Is(Mo(e)),l=r||this.parentInjector;if(!i&&c.ngModule==null){let I=(s?l:this.parentInjector).get(Je,null);I&&(i=I)}let u=Mo(c.componentType??{}),h=cm(this._lContainer,u?.id??null),g=h?.firstChild??null,f=c.create(l,o,g,i);return this.insertImpl(f.hostView,a,om(this._hostTNode,h)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let o=e._lView;if(sM(o)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=o[Ze],l=new iS(c,c[It],c[Ze]);l.detach(l.indexOf(e))}}let i=this._adjustIndex(t),s=this._lContainer;return Zw(s,o,i,r),e.attachToViewContainerRef(),cT(Ig(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=OI(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=am(this._lContainer,t);r&&(Dd(Ig(this._lContainer),t),Uw(r[K],r))}detach(e){let t=this._adjustIndex(e,-1),r=am(this._lContainer,t);return r&&Dd(Ig(this._lContainer),t)!=null?new wc(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function OI(n){return n[Rd]}function Ig(n){return n[Rd]||(n[Rd]=[])}function sS(n,e){let t,r=e[n.index];return ir(r)?t=r:(t=Jw(r,e,null,n),e[n.index]=t,gy(e,t)),AO(t,e,n,r),new iS(t,n,e)}function SO(n,e){let t=n[ge],r=t.createComment(""),o=wn(e,n),i=t.parentNode(o);return Hd(t,i,r,t.nextSibling(o),!1),r}var AO=bO,DO=()=>!1;function _O(n,e,t){return DO(n,e,t)}function bO(n,e,t,r){if(n[Oo])return;let o;t.type&8?o=vn(r):o=SO(e,t),n[Oo]=o}var fm=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},pm=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,o=[];for(let i=0;i<r;i++){let s=t.getByIndex(i),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new n(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)_y(e,t).matches!==null&&this.queries[t].setDirty()}},Vd=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=FO(e):this.predicate=e}},gm=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let o=t!==null?t.length:0,i=this.getByIndex(r).embeddedTView(e,o);i&&(i.indexInDeclarationView=r,t!==null?t.push(i):t=[i])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},mm=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let i=r[o];this.matchTNodeWithReadOption(e,t,RO(t,i)),this.matchTNodeWithReadOption(e,t,Id(t,e,i,!1,!1))}else r===Uo?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Id(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===ar||o===lr||o===Uo&&t.type&4)this.addMatch(t.index,-2);else{let i=Id(t,e,o,!1,!1);i!==null&&this.addMatch(t.index,i)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function RO(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function MO(n,e){return n.type&11?Ms(n,e):n.type&4?hh(n,e):null}function kO(n,e,t,r){return t===-1?MO(e,n):t===-2?NO(n,e,r):Ic(n,n[K],t,e)}function NO(n,e,t){if(t===ar)return Ms(e,n);if(t===Uo)return hh(e,n);if(t===lr)return sS(e,n)}function aS(n,e,t,r){let o=e[tr].queries[r];if(o.matches===null){let i=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=i[l];a.push(kO(e,u,s[c+1],t.metadata.read))}}o.matches=a}return o.matches}function ym(n,e,t,r){let o=n.queries.getByIndex(t),i=o.matches;if(i!==null){let s=aS(n,e,o,t);for(let a=0;a<i.length;a+=2){let c=i[a];if(c>0)r.push(s[a/2]);else{let l=i[a+1],u=e[-c];for(let h=kt;h<u.length;h++){let g=u[h];g[ko]===g[Ze]&&ym(g[K],g,l,r)}if(u[ys]!==null){let h=u[ys];for(let g=0;g<h.length;g++){let f=h[g];ym(f[K],f,l,r)}}}}}return r}function OO(n,e){return n[tr].queries[e].queryList}function cS(n,e,t){let r=new zg((t&4)===4);return lM(n,e,r,r.destroy),(e[tr]??=new pm).queries.push(new fm(r))-1}function PO(n,e,t){let r=Ae();return r.firstCreatePass&&(lS(r,new Vd(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),cS(r,U(),e)}function xO(n,e,t,r){let o=Ae();if(o.firstCreatePass){let i=it();lS(o,new Vd(e,t,r),i.index),LO(o,n),(t&2)===2&&(o.staticContentQueries=!0)}return cS(o,U(),t)}function FO(n){return n.split(",").map(e=>e.trim())}function lS(n,e,t){n.queries===null&&(n.queries=new gm),n.queries.track(new mm(e,t))}function LO(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function _y(n,e){return n.queries.getByIndex(e)}function UO(n,e){let t=n[K],r=_y(t,e);return r.crossesNgTemplate?ym(t,n,e,[]):aS(t,n,r,e)}function HO(n){let e=[],t=new Map;function r(o){let i=t.get(o);if(!i){let s=n(o);t.set(o,i=s.then($O))}return i}return $d.forEach((o,i)=>{let s=[];o.templateUrl&&s.push(r(o.templateUrl).then(l=>{o.template=l}));let a=typeof o.styles=="string"?[o.styles]:o.styles||[];if(o.styles=a,o.styleUrl&&o.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(o.styleUrls?.length){let l=o.styles.length,u=o.styleUrls;o.styleUrls.forEach((h,g)=>{a.push(""),s.push(r(h).then(f=>{a[l+g]=f,u.splice(u.indexOf(h),1),u.length==0&&(o.styleUrls=void 0)}))})}else o.styleUrl&&s.push(r(o.styleUrl).then(l=>{a.push(l),o.styleUrl=void 0}));let c=Promise.all(s).then(()=>zO(i));e.push(c)}),jO(),Promise.all(e).then(()=>{})}var $d=new Map,BO=new Set;function jO(){let n=$d;return $d=new Map,n}function VO(){return $d.size===0}function $O(n){return typeof n=="string"?n:n.text()}function zO(n){BO.delete(n)}var Ts=class{},by=class{};var zd=class extends Ts{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new jd(this);constructor(e,t,r,o=!0){super(),this.ngModuleType=e,this._parent=t;let i=dT(e);this._bootstrapComponents=Dw(i.bootstrap),this._r3Injector=YT(e,t,[{provide:Ts,useValue:this},{provide:fh,useValue:this.componentFactoryResolver},...r],vt(e),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Gd=class extends by{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new zd(this.moduleType,e,[])}};function GO(n,e,t){return new zd(n,e,t,!1)}var vm=class extends Ts{injector;componentFactoryResolver=new jd(this);instance=null;constructor(e){super();let t=new vc([...e.providers,{provide:Ts,useValue:this},{provide:fh,useValue:this.componentFactoryResolver}],e.parent||Hm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Oc(n,e,t=null){return new vm({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var qO=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=hT(!1,t.type),o=r.length>0?Oc([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=M({token:n,providedIn:"environment",factory:()=>new n(R(Je))})}return n})();function Ry(n){return Ac(()=>{let e=uS(n),t=S(m({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===iw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?o=>o.get(qO).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||In.Emulated,styles:n.styles||mt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Rc("NgStandalone"),dS(t);let r=n.dependencies;return t.directiveDefs=PI(r,!1),t.pipeDefs=PI(r,!0),t.id=JO(t),t})}function KO(n){return Mo(n)||BR(n)}function WO(n){return n!==null}function Gt(n){return Ac(()=>({type:n.type,bootstrap:n.bootstrap||mt,declarations:n.declarations||mt,imports:n.imports||mt,exports:n.exports||mt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function QO(n,e){if(n==null)return Ro;let t={};for(let r in n)if(n.hasOwnProperty(r)){let o=n[r],i,s,a,c;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i,c=o[3]||null):(i=o,s=o,a=ch.None,c=null),t[i]=[r,a,c],e[i]=s}return t}function YO(n){if(n==null)return Ro;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ur(n){return Ac(()=>{let e=uS(n);return dS(e),e})}function My(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function uS(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Ro,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||mt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:QO(n.inputs,e),outputs:YO(n.outputs),debugInfo:null}}function dS(n){n.features?.forEach(e=>e(n))}function PI(n,e){if(!n)return null;let t=e?jR:KO;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(WO)}function JO(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let i of r.join("|"))e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ZO(n){return Object.getPrototypeOf(n.prototype).constructor}function XO(n){let e=ZO(n.type),t=!0,r=[n];for(;e;){let o;if(yn(n))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new A(903,!1);o=e.\u0275dir}if(o){if(t){r.push(o);let s=n;s.inputs=Tg(n.inputs),s.declaredInputs=Tg(n.declaredInputs),s.outputs=Tg(n.outputs);let a=o.hostBindings;a&&oP(n,a);let c=o.viewQuery,l=o.contentQueries;if(c&&nP(n,c),l&&rP(n,l),eP(n,o),vR(n.outputs,o.outputs),yn(o)&&o.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(n),a===XO&&(t=!1)}}e=Object.getPrototypeOf(e)}tP(r)}function eP(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function tP(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let o=n[r];o.hostVars=e+=o.hostVars,o.hostAttrs=Cs(o.hostAttrs,t=Cs(t,o.hostAttrs))}}function Tg(n){return n===Ro?{}:n===mt?[]:n}function nP(n,e){let t=n.viewQuery;t?n.viewQuery=(r,o)=>{e(r,o),t(r,o)}:n.viewQuery=e}function rP(n,e){let t=n.contentQueries;t?n.contentQueries=(r,o,i)=>{e(r,o,i),t(r,o,i)}:n.contentQueries=e}function oP(n,e){let t=n.hostBindings;t?n.hostBindings=(r,o)=>{e(r,o),t(r,o)}:n.hostBindings=e}function hS(n){return ky(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function iP(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function ky(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function dr(n,e,t){return n[e]=t}function ph(n,e){return n[e]}function $t(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function ws(n,e,t,r){let o=$t(n,e,t);return $t(n,e+1,r)||o}function fS(n,e,t,r,o){let i=ws(n,e,t,r);return $t(n,e+2,o)||i}function gh(n,e,t,r,o,i){let s=ws(n,e,t,r);return ws(n,e+2,o,i)||s}function sP(n,e,t,r,o,i,s,a,c){let l=e.consts,u=kc(e,n,4,s||null,a||null);Gm()&&Dy(e,t,u,vs(l,c),vy),u.mergedAttrs=Cs(u.mergedAttrs,u.attrs),Zm(e,u);let h=u.tView=fy(2,u,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}function pS(n,e,t,r,o,i,s,a,c,l){let u=t+ot,h=e.firstCreatePass?sP(u,e,n,r,o,i,s,a,c):e.data[u];Bo(h,!1);let g=cP(e,n,h,t);ih()&&uh(e,n,g,h),ks(g,n);let f=Jw(g,n,g,h);return n[u]=f,gy(n,f),_O(f,h,n),th(h)&&lh(e,n,h),c!=null&&my(n,h,l),h}function aP(n,e,t,r,o,i,s,a){let c=U(),l=Ae(),u=vs(l.consts,i);return pS(c,l,n,e,t,r,o,u,s,a),aP}var cP=lP;function lP(n,e,t,r){return sh(!0),e[ge].createComment("")}var Ny=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Oy=new D(""),Pc=new D(""),mh=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(t,r,o){this._ngZone=t,this.registry=r,Bm()&&(this._destroyRef=T(Vr,{optional:!0})??void 0),Py||(uP(o),o.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let t=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{ie.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{t.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),t()},r)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:o})}whenStable(t,r,o){if(o&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,o),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,o){return[]}static \u0275fac=function(r){return new(r||n)(R(ie),R(yh),R(Pc))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),yh=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Py?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function uP(n){Py=n}var Py,gS=(()=>{class n{static \u0275prov=M({token:n,providedIn:"root",factory:()=>new Cm})}return n})(),Cm=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function xc(n){return!!n&&typeof n.then=="function"}function mS(n){return!!n&&typeof n.subscribe=="function"}var yS=new D("");function xy(n){return _c([{provide:yS,multi:!0,useValue:n}])}var vS=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=T(yS,{optional:!0})??[];injector=T(qe);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let o of this.appInits){let i=Et(this.injector,o);if(xc(i))t.push(i);else if(mS(i)){let s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fy=new D("");function dP(){Wp(()=>{throw new A(600,!1)})}function hP(n){return n.isBoundToModule}var fP=10;function CS(n,e){return Array.isArray(e)?e.reduce(CS,n):m(m({},n),e)}var rr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=T(YM);afterRenderManager=T(hw);zonelessEnabled=T(ty);rootEffectScheduler=T(gS);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new we;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=T(sr).hasPendingTasks.pipe(V(t=>!t));constructor(){T(Os,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=T(Je);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,o=qe.NULL){ae(10);let i=t instanceof eS;if(!this._injector.get(vS).done){let f="";throw new A(405,f)}let a;i?a=t:a=this._injector.get(fh).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=hP(a)?void 0:this._injector.get(Ts),l=r||a.selector,u=a.create(o,[],l,c),h=u.location.nativeElement,g=u.injector.get(Oy,null);return g?.registerApplication(h),u.onDestroy(()=>{this.detachView(u.hostView),Td(this.components,u),g?.unregisterApplication(h)}),this._loadComponent(u),ae(11,u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ae(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(ay.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new A(101,!1);let t=Y(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Y(t),this.afterTick.next(),ae(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Es,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<fP;)ae(14),this.synchronizeOnce(),ae(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:o}of this.allViews)pP(r,o,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>nh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Td(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Fy,[]).forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Td(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new A(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Td(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function pP(n,e,t,r){if(!t&&!nh(n))return;Kw(n,e,t&&!r?0:1)}function ES(n,e,t,r){let o=U(),i=rh();if($t(o,i,e)){let s=Ae(),a=oh();mN(a,o,n,e,t,r)}return ES}function gP(n,e,t,r){return $t(n,rh(),t)?e+yc(t)+r:Nt}function IS(n,e,t,r,o,i){let s=yM(),a=ws(n,s,t,o);return Wm(2),a?e+yc(t)+r+yc(o)+i:Nt}function md(n,e){return n<<17|e<<2}function Ho(n){return n>>17&32767}function mP(n){return(n&2)==2}function yP(n,e){return n&131071|e<<17}function Em(n){return n|2}function Ss(n){return(n&131068)>>2}function wg(n,e){return n&-131069|e<<2}function vP(n){return(n&1)===1}function Im(n){return n|1}function CP(n,e,t,r,o,i){let s=i?e.classBindings:e.styleBindings,a=Ho(s),c=Ss(s);n[r]=t;let l=!1,u;if(Array.isArray(t)){let h=t;u=h[1],(u===null||Dc(h,u)>0)&&(l=!0)}else u=t;if(o)if(c!==0){let g=Ho(n[a+1]);n[r+1]=md(g,a),g!==0&&(n[g+1]=wg(n[g+1],r)),n[a+1]=yP(n[a+1],r)}else n[r+1]=md(a,0),a!==0&&(n[a+1]=wg(n[a+1],r)),a=r;else n[r+1]=md(c,0),a===0?a=r:n[c+1]=wg(n[c+1],r),c=r;l&&(n[r+1]=Em(n[r+1])),xI(n,u,r,!0),xI(n,u,r,!1),EP(e,u,n,r,i),s=md(a,c),i?e.classBindings=s:e.styleBindings=s}function EP(n,e,t,r,o){let i=o?n.residualClasses:n.residualStyles;i!=null&&typeof e=="string"&&Dc(i,e)>=0&&(t[r+1]=Im(t[r+1]))}function xI(n,e,t,r){let o=n[t+1],i=e===null,s=r?Ho(o):Ss(o),a=!1;for(;s!==0&&(a===!1||i);){let c=n[s],l=n[s+1];IP(c,e)&&(a=!0,n[s+1]=r?Im(l):Em(l)),s=r?Ho(l):Ss(l)}a&&(n[t+1]=r?Em(o):Im(o))}function IP(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Dc(n,e)>=0:!1}var Fe={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function TS(n){return n.substring(Fe.key,Fe.keyEnd)}function TP(n){return n.substring(Fe.value,Fe.valueEnd)}function wP(n){return AS(n),wS(n,As(n,0,Fe.textEnd))}function wS(n,e){let t=Fe.textEnd;return t===e?-1:(e=Fe.keyEnd=AP(n,Fe.key=e,t),As(n,e,t))}function SP(n){return AS(n),SS(n,As(n,0,Fe.textEnd))}function SS(n,e){let t=Fe.textEnd,r=Fe.key=As(n,e,t);return t===r?-1:(r=Fe.keyEnd=DP(n,r,t),r=FI(n,r,t,58),r=Fe.value=As(n,r,t),r=Fe.valueEnd=_P(n,r,t),FI(n,r,t,59))}function AS(n){Fe.key=0,Fe.keyEnd=0,Fe.value=0,Fe.valueEnd=0,Fe.textEnd=n.length}function As(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function AP(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function DP(n,e,t){let r;for(;e<t&&((r=n.charCodeAt(e))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)e++;return e}function FI(n,e,t,r){return e=As(n,e,t),e<t&&e++,e}function _P(n,e,t){let r=-1,o=-1,i=-1,s=e,a=s;for(;s<t;){let c=n.charCodeAt(s++);if(c===59)return a;c===34||c===39?a=s=LI(n,c,s,t):e===s-4&&i===85&&o===82&&r===76&&c===40?a=s=LI(n,41,s,t):c>32&&(a=s),i=o,o=r,r=c&-33}return a}function LI(n,e,t,r){let o=-1,i=t;for(;i<r;){let s=n.charCodeAt(i++);if(s==e&&o!==92)return i;s==92&&o===92?o=0:o=s}throw new Error}function bP(n,e,t){let r=U(),o=rh();if($t(r,o,e)){let i=Ae(),s=oh();yy(i,s,r,n,e,r[ge],t,!1)}return bP}function Tm(n,e,t,r,o){Cy(e,n,t,o?"class":"style",r)}function RP(n,e,t){return DS(n,e,t,!1),RP}function MP(n,e){return DS(n,e,null,!0),MP}function Rz(n){_S(MS,kP,n,!1)}function kP(n,e){for(let t=SP(e);t>=0;t=SS(e,t))MS(n,TS(e),TP(e))}function Mz(n){_S(UP,NP,n,!0)}function NP(n,e){for(let t=wP(e);t>=0;t=wS(e,t))Zd(n,TS(e),!0)}function DS(n,e,t,r){let o=U(),i=Ae(),s=Wm(2);if(i.firstUpdatePass&&RS(i,n,s,r),e!==Nt&&$t(o,s,e)){let a=i.data[jr()];kS(i,a,o,o[ge],n,o[s+1]=BP(e,t),r,s)}}function _S(n,e,t,r){let o=Ae(),i=Wm(2);o.firstUpdatePass&&RS(o,null,i,r);let s=U();if(t!==Nt&&$t(s,i,t)){let a=o.data[jr()];if(NS(a,r)&&!bS(o,i)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=bg(c,t||"")),Tm(o,a,s,t,r)}else HP(o,a,s,s[ge],s[i+1],s[i+1]=LP(n,e,t),r,i)}}function bS(n,e){return e>=n.expandoStartIndex}function RS(n,e,t,r){let o=n.data;if(o[t+1]===null){let i=o[jr()],s=bS(n,t);NS(i,r)&&e===null&&!s&&(e=!1),e=OP(o,i,e,r),CP(o,i,e,t,s,r)}}function OP(n,e,t,r){let o=TM(n),i=r?e.residualClasses:e.residualStyles;if(o===null)(r?e.classBindings:e.styleBindings)===0&&(t=Sg(null,n,e,t,r),t=Sc(t,e.attrs,r),i=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==o)if(t=Sg(o,n,e,t,r),i===null){let c=PP(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Sg(null,n,e,c[1],r),c=Sc(c,e.attrs,r),xP(n,e,r,c))}else i=FP(n,e,r)}return i!==void 0&&(r?e.residualClasses=i:e.residualStyles=i),t}function PP(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ss(r)!==0)return n[Ho(r)]}function xP(n,e,t,r){let o=t?e.classBindings:e.styleBindings;n[Ho(o)]=r}function FP(n,e,t){let r,o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++){let s=n[i].hostAttrs;r=Sc(r,s,t)}return Sc(r,e.attrs,t)}function Sg(n,e,t,r,o){let i=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(i=e[a],r=Sc(r,i.hostAttrs,o),i!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Sc(n,e,t){let r=t?1:2,o=-1;if(e!==null)for(let i=0;i<e.length;i++){let s=e[i];typeof s=="number"?o=s:o===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Zd(n,s,t?!0:e[++i]))}return n===void 0?null:n}function LP(n,e,t){if(t==null||t==="")return mt;let r=[],o=An(t);if(Array.isArray(o))for(let i=0;i<o.length;i++)n(r,o[i],!0);else if(typeof o=="object")for(let i in o)o.hasOwnProperty(i)&&n(r,i,o[i]);else typeof o=="string"&&e(r,o);return r}function MS(n,e,t){Zd(n,e,An(t))}function UP(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Zd(n,r,t)}function HP(n,e,t,r,o,i,s,a){o===Nt&&(o=mt);let c=0,l=0,u=0<o.length?o[0]:null,h=0<i.length?i[0]:null;for(;u!==null||h!==null;){let g=c<o.length?o[c+1]:void 0,f=l<i.length?i[l+1]:void 0,C=null,I;u===h?(c+=2,l+=2,g!==f&&(C=h,I=f)):h===null||u!==null&&u<h?(c+=2,C=u):(l+=2,C=h,I=f),C!==null&&kS(n,e,t,r,C,I,s,a),u=c<o.length?o[c]:null,h=l<i.length?i[l]:null}}function kS(n,e,t,r,o,i,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=vP(l)?UI(c,e,t,o,Ss(l),s):void 0;if(!qd(u)){qd(i)||mP(l)&&(i=UI(c,null,t,o,a,s));let h=ST(jr(),t);PN(r,s,h,o,i)}}function UI(n,e,t,r,o,i){let s=e===null,a;for(;o>0;){let c=n[o],l=Array.isArray(c),u=l?c[1]:c,h=u===null,g=t[o+1];g===Nt&&(g=h?mt:void 0);let f=h?pg(g,r):u===r?g:void 0;if(l&&!qd(f)&&(f=pg(c,r)),qd(f)&&(a=f,s))return a;let C=n[o+1];o=s?Ho(C):Ss(C)}if(e!==null){let c=i?e.residualClasses:e.residualStyles;c!=null&&(a=pg(c,r))}return a}function qd(n){return n!==void 0}function BP(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=vt(An(n)))),n}function NS(n,e){return(n.flags&(e?8:16))!==0}function OS(n,e,t,r){let o=U(),i=Ae(),s=ot+n,a=o[ge],c=i.firstCreatePass?rS(s,i,o,e,vy,Gm(),t,r):i.data[s],l=jP(i,o,c,a,e,n);o[s]=l;let u=th(c);return Bo(c,!0),kw(a,l,c),!Ty(c)&&ih()&&uh(i,o,l,c),(uM()===0||u)&&ks(l,o),dM(),u&&(lh(i,o,c),uy(i,c,o)),r!==null&&my(o,c),OS}function PS(){let n=it();qm()?Km():(n=n.parent,Bo(n,!1));let e=n;fM(e)&&pM(),hM();let t=Ae();return t.firstCreatePass&&oS(t,e),e.classesWithoutHost!=null&&bM(e)&&Tm(t,e,U(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&RM(e)&&Tm(t,e,U(),e.stylesWithoutHost,!1),PS}function Ly(n,e,t,r){return OS(n,e,t,r),PS(),Ly}var jP=(n,e,t,r,o,i)=>(sh(!0),Rw(r,o,AM()));function VP(n,e,t,r,o){let i=e.consts,s=vs(i,r),a=kc(e,n,8,"ng-container",s);s!==null&&dm(a,s,!0);let c=vs(i,o);return Gm()&&Dy(e,t,a,c,vy),a.mergedAttrs=Cs(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function xS(n,e,t){let r=U(),o=Ae(),i=n+ot,s=o.firstCreatePass?VP(i,o,r,e,t):o.data[i];Bo(s,!0);let a=zP(o,r,s,n);return r[i]=a,ih()&&uh(o,r,a,s),ks(a,r),th(s)&&(lh(o,r,s),uy(o,s,r)),t!=null&&my(r,s),xS}function FS(){let n=it(),e=Ae();return qm()?Km():(n=n.parent,Bo(n,!1)),e.firstCreatePass&&(Zm(e,n),jm(n)&&e.queries.elementEnd(n)),FS}function $P(n,e,t){return xS(n,e,t),FS(),$P}var zP=(n,e,t,r)=>(sh(!0),tN(e[ge],""));function kz(){return U()}var Ao=void 0;function GP(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var qP=["en",[["a","p"],["AM","PM"],Ao],[["AM","PM"],Ao,Ao],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ao,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ao,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ao,"{1} 'at' {0}",Ao],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",GP],Ag={};function Tt(n){let e=KP(n),t=HI(e);if(t)return t;let r=e.split("-")[0];if(t=HI(r),t)return t;if(r==="en")return qP;throw new A(701,!1)}function HI(n){return n in Ag||(Ag[n]=Ye.ng&&Ye.ng.common&&Ye.ng.common.locales&&Ye.ng.common.locales[n]),Ag[n]}var ye=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(ye||{});function KP(n){return n.toLowerCase().replace(/_/g,"-")}var Kd="en-US",WP="USD";var QP=Kd;function YP(n){typeof n=="string"&&(QP=n.toLowerCase().replace(/_/g,"-"))}function BI(n,e,t){return function r(o){if(o===Function)return t;let i=_s(n)?Cn(n.index,e):e;Ay(i,5);let s=e[Ct],a=jI(e,s,t,o),c=r.__ngNextListenerFn__;for(;c;)a=jI(e,s,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function jI(n,e,t,r){let o=Y(null);try{return ae(6,e,t),t(r)!==!1}catch(i){return JP(n,i),!1}finally{ae(7,e,t),Y(o)}}function JP(n,e){let t=n[ms],r=t?t.get(En,null):null;r&&r.handleError(e)}function VI(n,e,t,r,o,i){let s=e[t],a=e[K],l=a.data[t].outputs[r],u=s[l],h=a.firstCreatePass?zm(a):null,g=$m(e),f=u.subscribe(i),C=g.length;g.push(i,f),h&&h.push(o,n.index,C,-(C+1))}function LS(n,e,t,r){let o=U(),i=Ae(),s=it();return US(i,o,o[ge],s,n,e,r),LS}function ZP(n,e,t,r){let o=n.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===t&&o[i+1]===r){let a=e[bd],c=o[i+2];return a.length>c?a[c]:null}typeof s=="string"&&(i+=2)}return null}function US(n,e,t,r,o,i,s){let a=th(r),l=n.firstCreatePass?zm(n):null,u=$m(e),h=!0;if(r.type&3||s){let g=wn(r,e),f=s?s(g):g,C=u.length,I=s?x=>s(vn(x[r.index])):r.index,_=null;if(!s&&a&&(_=ZP(n,e,o,r.index)),_!==null){let x=_.__ngLastListenerFn__||_;x.__ngNextListenerFn__=i,_.__ngLastListenerFn__=i,h=!1}else{i=BI(r,e,i),yk(e,f,o,i);let x=t.listen(f,o,i);u.push(i,x),l&&l.push(o,I,C,C+1)}}else i=BI(r,e,i);if(h){let g=r.outputs?.[o],f=r.hostDirectiveOutputs?.[o];if(f&&f.length)for(let C=0;C<f.length;C+=2){let I=f[C],_=f[C+1];VI(r,e,I,_,o,i)}if(g&&g.length)for(let C of g)VI(r,e,C,o,o,i)}}function Nz(n=1){return SM(n)}function XP(n,e){let t=null,r=qk(n);for(let o=0;o<e.length;o++){let i=e[o];if(i==="*"){t=o;continue}if(r===null?bw(n,i,!0):Qk(r,i))return o}return t}function Oz(n){let e=U()[Vt][It];if(!e.projection){let t=n?n.length:1,r=e.projection=LR(t,null),o=r.slice(),i=e.child;for(;i!==null;){if(i.type!==128){let s=n?XP(i,n):0;s!==null&&(o[s]?o[s].projectionNext=i:r[s]=i,o[s]=i)}i=i.next}}}function Pz(n,e=0,t,r,o,i){let s=U(),a=Ae(),c=r?n+1:null;c!==null&&pS(s,a,c,r,o,i,null,t);let l=kc(a,ot+n,16,null,t||null);l.projection===null&&(l.projection=e),Km();let h=!s[Cc]||MT();s[Vt][It].projection[l.projection]===null&&c!==null?ex(s,a,c):h&&!Ty(l)&&NN(a,s,l)}function ex(n,e,t){let r=ot+t,o=e.data[r],i=n[r],s=cm(i,o.tView.ssrId),a=Fw(n,o,void 0,{dehydratedView:s});Zw(i,a,0,om(o,s))}function tx(n,e,t,r,o,i,s){let a=U(),c=IS(a,e,t,r,o,i);if(c!==Nt){let l=Ae(),u=oh();yy(l,u,a,n,c,a[ge],s,!1)}return tx}function nx(n,e,t,r){xO(n,e,t,r)}function xz(n,e,t){PO(n,e,t)}function rx(n){let e=U(),t=Ae(),r=OT();Qm(r+1);let o=_y(t,r);if(n.dirty&&iM(e)===((o.metadata.flags&2)===2)){if(o.matches===null)n.reset([]);else{let i=UO(e,r);n.reset(i,XM),n.notifyOnChanges()}return!0}return!1}function ox(){return OO(U(),OT())}function Fz(n){let e=mM();return DT(e,ot+n)}function Lz(n,e=""){let t=U(),r=Ae(),o=n+ot,i=r.firstCreatePass?kc(r,o,1,e,null):r.data[o],s=ix(r,t,i,e,n);t[o]=s,ih()&&uh(r,t,s,i),Bo(i,!1)}var ix=(n,e,t,r,o)=>(sh(!0),Xk(e[ge],r));function sx(n){return HS("",n,""),sx}function HS(n,e,t){let r=U(),o=gP(r,n,e,t);return o!==Nt&&BS(r,jr(),o),HS}function ax(n,e,t,r,o){let i=U(),s=IS(i,n,e,t,r,o);return s!==Nt&&BS(i,jr(),s),ax}function BS(n,e,t){let r=ST(e,n);eN(n[ge],r,t)}function cx(n,e,t){rw(e)&&(e=e());let r=U(),o=rh();if($t(r,o,e)){let i=Ae(),s=oh();yy(i,s,r,n,e,r[ge],t,!1)}return cx}function Uz(n,e){let t=rw(n);return t&&n.set(e),t}function lx(n,e){let t=U(),r=Ae(),o=it();return US(r,t,t[ge],o,n,e),lx}function ux(n,e,t){let r=Ae();if(r.firstCreatePass){let o=yn(n);wm(t,r.data,r.blueprint,o,!0),wm(e,r.data,r.blueprint,o,!1)}}function wm(n,e,t,r,o){if(n=rt(n),Array.isArray(n))for(let i=0;i<n.length;i++)wm(n[i],e,t,r,o);else{let i=Ae(),s=U(),a=it(),c=gs(n)?n:rt(n.provide),l=gT(n),u=a.providerIndexes&1048575,h=a.directiveStart,g=a.providerIndexes>>20;if(gs(n)||!n.multi){let f=new Fo(l,o,me),C=_g(c,e,o?u:u+g,h);C===-1?(Bg(xd(a,s),i,c),Dg(i,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),t.push(f),s.push(f)):(t[C]=f,s[C]=f)}else{let f=_g(c,e,u+g,h),C=_g(c,e,u,u+g),I=f>=0&&t[f],_=C>=0&&t[C];if(o&&!_||!o&&!I){Bg(xd(a,s),i,c);let x=fx(o?hx:dx,t.length,o,r,l);!o&&_&&(t[C].providerFactory=x),Dg(i,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),t.push(x),s.push(x)}else{let x=jS(t[o?C:f],l,!o&&r);Dg(i,n,f>-1?f:C,x)}!o&&r&&_&&t[C].componentProviders++}}}function Dg(n,e,t,r){let o=gs(e),i=qR(e);if(o||i){let c=(i?rt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!o&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function jS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function _g(n,e,t,r){for(let o=t;o<r;o++)if(e[o]===n)return o;return-1}function dx(n,e,t,r,o){return Sm(this.multi,[])}function hx(n,e,t,r,o){let i=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Ic(r,r[K],this.providerFactory.index,o);s=c.slice(0,a),Sm(i,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],Sm(i,s);return s}function Sm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function fx(n,e,t,r,o){let i=new Fo(n,t,me);return i.multi=[],i.index=e,i.componentProviders=0,jS(i,o,r&&!t),i}function Hz(n,e=[]){return t=>{t.providersResolver=(r,o)=>ux(r,o?o(n):n,e)}}function Bz(n,e,t){let r=Sn()+n,o=U();return o[r]===Nt?dr(o,r,t?e.call(t):e()):ph(o,r)}function jz(n,e,t,r){return px(U(),Sn(),n,e,t,r)}function Vz(n,e,t,r,o){return VS(U(),Sn(),n,e,t,r,o)}function $z(n,e,t,r,o,i){return gx(U(),Sn(),n,e,t,r,o,i)}function zz(n,e,t,r,o,i,s){return mx(U(),Sn(),n,e,t,r,o,i,s)}function Gz(n,e,t,r,o,i,s,a){let c=Sn()+n,l=U(),u=gh(l,c,t,r,o,i);return $t(l,c+4,s)||u?dr(l,c+5,a?e.call(a,t,r,o,i,s):e(t,r,o,i,s)):ph(l,c+5)}function qz(n,e,t,r,o,i,s,a,c){let l=Sn()+n,u=U(),h=gh(u,l,t,r,o,i);return ws(u,l+4,s,a)||h?dr(u,l+6,c?e.call(c,t,r,o,i,s,a):e(t,r,o,i,s,a)):ph(u,l+6)}function Kz(n,e,t,r,o,i,s,a,c,l){let u=Sn()+n,h=U(),g=gh(h,u,t,r,o,i);return fS(h,u+4,s,a,c)||g?dr(h,u+7,l?e.call(l,t,r,o,i,s,a,c):e(t,r,o,i,s,a,c)):ph(h,u+7)}function Wz(n,e,t,r){return yx(U(),Sn(),n,e,t,r)}function Fc(n,e){let t=n[e];return t===Nt?void 0:t}function px(n,e,t,r,o,i){let s=e+t;return $t(n,s,o)?dr(n,s+1,i?r.call(i,o):r(o)):Fc(n,s+1)}function VS(n,e,t,r,o,i,s){let a=e+t;return ws(n,a,o,i)?dr(n,a+2,s?r.call(s,o,i):r(o,i)):Fc(n,a+2)}function gx(n,e,t,r,o,i,s,a){let c=e+t;return fS(n,c,o,i,s)?dr(n,c+3,a?r.call(a,o,i,s):r(o,i,s)):Fc(n,c+3)}function mx(n,e,t,r,o,i,s,a,c){let l=e+t;return gh(n,l,o,i,s,a)?dr(n,l+4,c?r.call(c,o,i,s,a):r(o,i,s,a)):Fc(n,l+4)}function yx(n,e,t,r,o,i){let s=e+t,a=!1;for(let c=0;c<o.length;c++)$t(n,s++,o[c])&&(a=!0);return a?dr(n,s,r.apply(i,o)):Fc(n,s)}function Qz(n,e){let t=Ae(),r,o=n+ot;t.firstCreatePass?(r=vx(e,t.pipeRegistry),t.data[o]=r,r.onDestroy&&(t.destroyHooks??=[]).push(o,r.onDestroy)):r=t.data[o];let i=r.factory||(r.factory=bo(r.type,!0)),s,a=gt(me);try{let c=Pd(!1),l=i();return Pd(c),oM(t,U(),o,l),l}finally{gt(a)}}function vx(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Yz(n,e,t,r){let o=n+ot,i=U(),s=DT(i,o);return Cx(i,o)?VS(i,Sn(),e,s.transform,t,r,s):s.transform(t,r)}function Cx(n,e){return n[K].data[e].pure}function Jz(n,e){return hh(n,e)}var yd=null;function Ex(n){yd!==null&&(n.defaultEncapsulation!==yd.defaultEncapsulation||n.preserveWhitespaces!==yd.preserveWhitespaces)||(yd=n)}var Am=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},$S=(()=>{class n{compileModuleSync(t){return new Gd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),o=dT(t),i=Dw(o.declarations).reduce((s,a)=>{let c=Mo(a);return c&&s.push(new Is(c)),s},[]);return new Am(r,i)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ix=new D("");function Tx(n,e,t){let r=new Gd(t);return Promise.resolve(r)}function $I(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var wx=(()=>{class n{zone=T(ie);changeDetectionScheduler=T(Lo);applicationRef=T(rr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sx({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ie(S(m({},zS()),{scheduleInRootZone:t})),[{provide:ie,useFactory:n},{provide:ps,multi:!0,useFactory:()=>{let r=T(wx,{optional:!0});return()=>r.initialize()}},{provide:ps,multi:!0,useFactory:()=>{let r=T(Ax);return()=>{r.initialize()}}},e===!0?{provide:ZT,useValue:!0}:[],{provide:XT,useValue:t??JT}]}function zS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Ax=(()=>{class n{subscription=new Te;initialized=!1;zone=T(ie);pendingTasks=T(sr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ie.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ie.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Dx=(()=>{class n{appRef=T(rr);taskService=T(sr);ngZone=T(ie);zonelessEnabled=T(ty);tracing=T(Os,{optional:!0});disableScheduling=T(ZT,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Te;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ld):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(T(XT,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ud||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let o=this.useMicrotaskScheduler?yI:ew;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ld+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,yI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _x(){return typeof $localize<"u"&&$localize.locale||Kd}var Lc=new D("",{providedIn:"root",factory:()=>T(Lc,G.Optional|G.SkipSelf)||_x()}),GS=new D("",{providedIn:"root",factory:()=>WP});var Wd=new D(""),bx=new D("");function fc(n){return!n.moduleRef}function Rx(n){let e=fc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ie);return t.run(()=>{fc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(En,null),o;if(t.runOutsideAngular(()=>{o=t.onError.subscribe({next:i=>{r.handleError(i)}})}),fc(n)){let i=()=>e.destroy(),s=n.platformInjector.get(Wd);s.add(i),e.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Wd);s.add(i),n.moduleRef.onDestroy(()=>{Td(n.allPlatformModules,n.moduleRef),o.unsubscribe(),s.delete(i)})}return kx(r,t,()=>{let i=e.get(vS);return i.runInitializers(),i.donePromise.then(()=>{let s=e.get(Lc,Kd);if(YP(s||Kd),!e.get(bx,!0))return fc(n)?e.get(rr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(fc(n)){let c=e.get(rr);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return Mx(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function Mx(n,e){let t=n.injector.get(rr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new A(-403,!1);e.push(n)}function kx(n,e,t){try{let r=t();return xc(r)?r.catch(o=>{throw e.runOutsideAngular(()=>n.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var qS=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){let o=r?.scheduleInRootZone,i=()=>QM(r?.ngZone,S(m({},zS({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:o})),s=r?.ignoreChangesOutsideZone,a=[Sx({ngZoneFactory:i,ignoreChangesOutsideZone:s}),{provide:Lo,useExisting:Dx}],c=GO(t.moduleType,this.injector,a);return Rx({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let o=CS({},r);return Tx(this.injector,o,t).then(i=>this.bootstrapModuleFactory(i,o))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new A(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Wd,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(R(qe))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Uy=null;function Nx(n){if(By())throw new A(400,!1);dP(),Uy=n;let e=n.get(qS);return xx(n),e}function Hy(n,e,t=[]){let r=`Platform: ${e}`,o=new D(r);return(i=[])=>{let s=By();if(!s){let a=[...t,...i,{provide:o,useValue:!0}];s=n?.(a)??Nx(Ox(a,r))}return Px(o)}}function Ox(n=[],e){return qe.create({name:e,providers:[{provide:Xd,useValue:"platform"},{provide:Wd,useValue:new Set([()=>Uy=null])},...n]})}function Px(n){let e=By();if(!e)throw new A(401,!1);return e}function By(){return Uy?.get(qS)??null}function xx(n){let e=n.get(iy,null);Et(n,()=>{e?.forEach(t=>t())})}var Uc=(()=>{class n{static __NG_ELEMENT_ID__=Fx}return n})();function Fx(n){return Lx(it(),U(),(n&16)===16)}function Lx(n,e,t){if(_s(n)&&!t){let r=Cn(n.index,e);return new wc(r,r)}else if(n.type&175){let r=e[Vt];return new wc(r,e)}return null}var Dm=class{constructor(){}supports(e){return hS(e)}create(e){return new _m(e)}},Ux=(n,e)=>e,_m=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Ux}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,o=0,i=null;for(;t||r;){let s=!r||t&&t.currentIndex<zI(r,o,i)?t:r,a=zI(s,o,i),c=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)o++;else{i||(i=[]);let l=a-o,u=c-o;if(l!=u){for(let g=0;g<l;g++){let f=g<i.length?i[g]:i[g]=0,C=f+g;u<=C&&C<l&&(i[g]=f+1)}let h=s.previousIndex;i[h]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!hS(e))throw new A(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,o,i,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],s=this._trackByFn(a,i),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,i,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,i,s,a)),Object.is(t.item,i)||this._addIdentityChange(t,i)),t=t._next}else o=0,iP(e,a=>{s=this._trackByFn(o,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,o),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,o)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,o++}),this.length=o;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,o){let i;return e===null?i=this._itTail:(i=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,o)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,o),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,o)):e=this._addAfter(new bm(t,r),i,o)),e}_verifyReinsertion(e,t,r,o){let i=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return i!==null?e=this._reinsertAfter(i,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let o=e._prevRemoved,i=e._nextRemoved;return o===null?this._removalsHead=i:o._nextRemoved=i,i===null?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let o=t===null?this._itHead:t._next;return e._next=o,e._prev=t,o===null?this._itTail=e:o._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Qd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Qd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},bm=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Rm=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Qd=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Rm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,o=this.map.get(r);return o?o.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function zI(n,e,t){let r=n.previousIndex;if(r===null)return r;let o=0;return t&&r<t.length&&(o=t[r]),r+e+o}var Mm=class{constructor(){}supports(e){return e instanceof Map||ky(e)}create(){return new km}},km=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||ky(e)))throw new A(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,o)=>{if(t&&t.key===o)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let i=this._getOrCreateRecordForKey(o,r);t=this._insertBeforeOrAppend(t,i)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let o=this._records.get(e);this._maybeAddToChanges(o,t);let i=o._prev,s=o._next;return i&&(i._next=s),s&&(s._prev=i),o._next=null,o._prev=null,o}let r=new Nm(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},Nm=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function GI(){return new jy([new Dm])}var jy=(()=>{class n{factories;static \u0275prov=M({token:n,providedIn:"root",factory:GI});constructor(t){this.factories=t}static create(t,r){if(r!=null){let o=r.factories.slice();t=t.concat(o)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||GI()),deps:[[n,new aT,new Fm]]}}find(t){let r=this.factories.find(o=>o.supports(t));if(r!=null)return r;throw new A(901,!1)}}return n})();function qI(){return new Vy([new Mm])}var Vy=(()=>{class n{static \u0275prov=M({token:n,providedIn:"root",factory:qI});factories;constructor(t){this.factories=t}static create(t,r){if(r){let o=r.factories.slice();t=t.concat(o)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||qI()),deps:[[n,new aT,new Fm]]}}find(t){let r=this.factories.find(o=>o.supports(t));if(r)return r;throw new A(901,!1)}}return n})();var KS=Hy(null,"core",[]),WS=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(R(rr))};static \u0275mod=Gt({type:n});static \u0275inj=zt({})}return n})();function QS(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Hx(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function Bx(n){return Jp(n)}function Zz(n,e){return Kp(n,e?.equal)}var Om=class{[Ht];constructor(e){this[Ht]=e}destroy(){this[Ht].destroy()}};function jx(n,e){!e?.injector&&mT(jx);let t=e?.injector??T(qe),r=e?.manualCleanup!==!0?t.get(Vr):null,o,i=t.get(cy,null,{optional:!0}),s=t.get(Lo);return i!==null&&!e?.forceRoot?(o=zx(i.view,s,n),r instanceof Fd&&r._lView===i.view&&(r=null)):o=Gx(n,t.get(gS),s),o.injector=t,r!==null&&(o.onDestroyFn=r.onDestroy(()=>o.destroy())),new Om(o)}var YS=S(m({},Ki),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:Tc,run(){if(this.dirty=!1,this.hasRun&&!Uu(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=oc(this),t=kd(!1);try{this.maybeCleanup(),this.fn(n)}finally{kd(t),Lu(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),Vx=S(m({},YS),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){ic(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),$x=S(m({},YS),{consumerMarkedDirty(){this.view[L]|=8192,Rs(this.view),this.notifier.notify(13)},destroy(){ic(this),this.onDestroyFn(),this.maybeCleanup(),this.view[No]?.delete(this)}});function zx(n,e,t){let r=Object.create($x);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[No]??=new Set,n[No].add(r),r.consumerMarkedDirty(r),r}function Gx(n,e,t){let r=Object.create(Vx);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(12),r}function JS(n){let e=Mo(n);if(!e)return null;let t=new Is(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var De=new D("");var eA=null;function Dn(){return eA}function $y(n){eA??=n}var Hc=class{},Bc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:()=>T(tA),providedIn:"platform"})}return n})(),zy=new D(""),tA=(()=>{class n extends Bc{_location;_history;_doc=T(De);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Dn().getBaseHref(this._doc)}onPopState(t){let r=Dn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Dn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function vh(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function ZS(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function tn(n){return n&&n[0]!=="?"?`?${n}`:n}var fr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:()=>T(Eh),providedIn:"root"})}return n})(),Ch=new D(""),Eh=(()=>{class n extends fr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??T(De).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return vh(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+tn(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+tn(i));this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+tn(i));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(R(Bc),R(Ch,8))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nn=(()=>{class n{_subject=new we;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Wx(ZS(XS(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+tn(r))}normalize(t){return n.stripTrailingSlash(Kx(this._basePath,XS(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tn(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tn(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=tn;static joinWithSlash=vh;static stripTrailingSlash=ZS;static \u0275fac=function(r){return new(r||n)(R(fr))};static \u0275prov=M({token:n,factory:()=>qx(),providedIn:"root"})}return n})();function qx(){return new nn(R(fr))}function Kx(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function XS(n){return n.replace(/\/index.html$/,"")}function Wx(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Jy=(()=>{class n extends fr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=vh(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+tn(i))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+tn(i))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(R(Bc),R(Ch,8))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),cA={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},Zy=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(Zy||{});var Xe=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Xe||{}),re=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(re||{}),wt=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(wt||{}),St={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function lA(n){return Tt(n)[ye.LocaleId]}function uA(n,e,t){let r=Tt(n),o=[r[ye.DayPeriodsFormat],r[ye.DayPeriodsStandalone]],i=qt(o,e);return qt(i,t)}function dA(n,e,t){let r=Tt(n),o=[r[ye.DaysFormat],r[ye.DaysStandalone]],i=qt(o,e);return qt(i,t)}function hA(n,e,t){let r=Tt(n),o=[r[ye.MonthsFormat],r[ye.MonthsStandalone]],i=qt(o,e);return qt(i,t)}function fA(n,e){let r=Tt(n)[ye.Eras];return qt(r,e)}function jc(n,e){let t=Tt(n);return qt(t[ye.DateFormat],e)}function Vc(n,e){let t=Tt(n);return qt(t[ye.TimeFormat],e)}function $c(n,e){let r=Tt(n)[ye.DateTimeFormat];return qt(r,e)}function _n(n,e){let t=Tt(n),r=t[ye.NumberSymbols][e];if(typeof r>"u"){if(e===St.CurrencyDecimal)return t[ye.NumberSymbols][St.Decimal];if(e===St.CurrencyGroup)return t[ye.NumberSymbols][St.Group]}return r}function pA(n,e){return Tt(n)[ye.NumberFormats][e]}function Yx(n){return Tt(n)[ye.Currencies]}function gA(n){if(!n[ye.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[ye.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function mA(n){let e=Tt(n);return gA(e),(e[ye.ExtraData][2]||[]).map(r=>typeof r=="string"?Gy(r):[Gy(r[0]),Gy(r[1])])}function yA(n,e,t){let r=Tt(n);gA(r);let o=[r[ye.ExtraData][0],r[ye.ExtraData][1]],i=qt(o,e)||[];return qt(i,t)||[]}function qt(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Gy(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}function vA(n,e,t="en"){let r=Yx(t)[n]||cA[n]||[],o=r[1];return e==="narrow"&&typeof o=="string"?o:r[0]||n}var Jx=2;function CA(n){let e,t=cA[n];return t&&(e=t[2]),typeof e=="number"?e:Jx}var Zx=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ih={},Xx=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function EA(n,e,t,r){let o=c0(n);e=pr(t,e)||e;let s=[],a;for(;e;)if(a=Xx.exec(e),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;e=u}else{s.push(e);break}let c=o.getTimezoneOffset();r&&(c=TA(r,c),o=a0(o,r));let l="";return s.forEach(u=>{let h=i0(u);l+=h?h(o,t,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Dh(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function pr(n,e){let t=lA(n);if(Ih[t]??={},Ih[t][e])return Ih[t][e];let r="";switch(e){case"shortDate":r=jc(n,wt.Short);break;case"mediumDate":r=jc(n,wt.Medium);break;case"longDate":r=jc(n,wt.Long);break;case"fullDate":r=jc(n,wt.Full);break;case"shortTime":r=Vc(n,wt.Short);break;case"mediumTime":r=Vc(n,wt.Medium);break;case"longTime":r=Vc(n,wt.Long);break;case"fullTime":r=Vc(n,wt.Full);break;case"short":let o=pr(n,"shortTime"),i=pr(n,"shortDate");r=Th($c(n,wt.Short),[o,i]);break;case"medium":let s=pr(n,"mediumTime"),a=pr(n,"mediumDate");r=Th($c(n,wt.Medium),[s,a]);break;case"long":let c=pr(n,"longTime"),l=pr(n,"longDate");r=Th($c(n,wt.Long),[c,l]);break;case"full":let u=pr(n,"fullTime"),h=pr(n,"fullDate");r=Th($c(n,wt.Full),[u,h]);break}return r&&(Ih[t][e]=r),r}function Th(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function rn(n,e,t="-",r,o){let i="";(n<0||o&&n<=0)&&(o?n=-n+1:(n=-n,i=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),i+s}function e0(n,e){return rn(n,3).substring(0,e)}function Ne(n,e,t=0,r=!1,o=!1){return function(i,s){let a=t0(n,i);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return e0(a,e);let c=_n(s,St.MinusSign);return rn(a,e,c,r,o)}}function t0(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function ce(n,e,t=Xe.Format,r=!1){return function(o,i){return n0(o,i,n,e,t,r)}}function n0(n,e,t,r,o,i){switch(t){case 2:return hA(e,o,r)[n.getMonth()];case 1:return dA(e,o,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(i){let l=mA(e),u=yA(e,o,r),h=l.findIndex(g=>{if(Array.isArray(g)){let[f,C]=g,I=s>=f.hours&&a>=f.minutes,_=s<C.hours||s===C.hours&&a<C.minutes;if(f.hours<C.hours){if(I&&_)return!0}else if(I||_)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(h!==-1)return u[h]}return uA(e,o,r)[s<12?0:1];case 3:return fA(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function wh(n){return function(e,t,r){let o=-1*r,i=_n(t,St.MinusSign),s=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case 0:return(o>=0?"+":"")+rn(s,2,i)+rn(Math.abs(o%60),2,i);case 1:return"GMT"+(o>=0?"+":"")+rn(s,1,i);case 2:return"GMT"+(o>=0?"+":"")+rn(s,2,i)+":"+rn(Math.abs(o%60),2,i);case 3:return r===0?"Z":(o>=0?"+":"")+rn(s,2,i)+":"+rn(Math.abs(o%60),2,i);default:throw new Error(`Unknown zone width "${n}"`)}}}var r0=0,Ah=4;function o0(n){let e=Dh(n,r0,1).getDay();return Dh(n,0,1+(e<=Ah?Ah:Ah+7)-e)}function IA(n){let e=n.getDay(),t=e===0?-3:Ah-e;return Dh(n.getFullYear(),n.getMonth(),n.getDate()+t)}function qy(n,e=!1){return function(t,r){let o;if(e){let i=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();o=1+Math.floor((s+i)/7)}else{let i=IA(t),s=o0(i.getFullYear()),a=i.getTime()-s.getTime();o=1+Math.round(a/6048e5)}return rn(o,n,_n(r,St.MinusSign))}}function Sh(n,e=!1){return function(t,r){let i=IA(t).getFullYear();return rn(i,n,_n(r,St.MinusSign),e)}}var Ky={};function i0(n){if(Ky[n])return Ky[n];let e;switch(n){case"G":case"GG":case"GGG":e=ce(3,re.Abbreviated);break;case"GGGG":e=ce(3,re.Wide);break;case"GGGGG":e=ce(3,re.Narrow);break;case"y":e=Ne(0,1,0,!1,!0);break;case"yy":e=Ne(0,2,0,!0,!0);break;case"yyy":e=Ne(0,3,0,!1,!0);break;case"yyyy":e=Ne(0,4,0,!1,!0);break;case"Y":e=Sh(1);break;case"YY":e=Sh(2,!0);break;case"YYY":e=Sh(3);break;case"YYYY":e=Sh(4);break;case"M":case"L":e=Ne(1,1,1);break;case"MM":case"LL":e=Ne(1,2,1);break;case"MMM":e=ce(2,re.Abbreviated);break;case"MMMM":e=ce(2,re.Wide);break;case"MMMMM":e=ce(2,re.Narrow);break;case"LLL":e=ce(2,re.Abbreviated,Xe.Standalone);break;case"LLLL":e=ce(2,re.Wide,Xe.Standalone);break;case"LLLLL":e=ce(2,re.Narrow,Xe.Standalone);break;case"w":e=qy(1);break;case"ww":e=qy(2);break;case"W":e=qy(1,!0);break;case"d":e=Ne(2,1);break;case"dd":e=Ne(2,2);break;case"c":case"cc":e=Ne(7,1);break;case"ccc":e=ce(1,re.Abbreviated,Xe.Standalone);break;case"cccc":e=ce(1,re.Wide,Xe.Standalone);break;case"ccccc":e=ce(1,re.Narrow,Xe.Standalone);break;case"cccccc":e=ce(1,re.Short,Xe.Standalone);break;case"E":case"EE":case"EEE":e=ce(1,re.Abbreviated);break;case"EEEE":e=ce(1,re.Wide);break;case"EEEEE":e=ce(1,re.Narrow);break;case"EEEEEE":e=ce(1,re.Short);break;case"a":case"aa":case"aaa":e=ce(0,re.Abbreviated);break;case"aaaa":e=ce(0,re.Wide);break;case"aaaaa":e=ce(0,re.Narrow);break;case"b":case"bb":case"bbb":e=ce(0,re.Abbreviated,Xe.Standalone,!0);break;case"bbbb":e=ce(0,re.Wide,Xe.Standalone,!0);break;case"bbbbb":e=ce(0,re.Narrow,Xe.Standalone,!0);break;case"B":case"BB":case"BBB":e=ce(0,re.Abbreviated,Xe.Format,!0);break;case"BBBB":e=ce(0,re.Wide,Xe.Format,!0);break;case"BBBBB":e=ce(0,re.Narrow,Xe.Format,!0);break;case"h":e=Ne(3,1,-12);break;case"hh":e=Ne(3,2,-12);break;case"H":e=Ne(3,1);break;case"HH":e=Ne(3,2);break;case"m":e=Ne(4,1);break;case"mm":e=Ne(4,2);break;case"s":e=Ne(5,1);break;case"ss":e=Ne(5,2);break;case"S":e=Ne(6,1);break;case"SS":e=Ne(6,2);break;case"SSS":e=Ne(6,3);break;case"Z":case"ZZ":case"ZZZ":e=wh(0);break;case"ZZZZZ":e=wh(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=wh(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=wh(2);break;default:return null}return Ky[n]=e,e}function TA(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function s0(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function a0(n,e,t){let o=n.getTimezoneOffset(),i=TA(e,o);return s0(n,-1*(i-o))}function c0(n){if(nA(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[o,i=1,s=1]=n.split("-").map(a=>+a);return Dh(o,i-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Zx))return l0(r)}let e=new Date(n);if(!nA(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function l0(n){let e=new Date(0),t=0,r=0,o=n[8]?e.setUTCFullYear:e.setFullYear,i=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),o.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return i.call(e,s,a,c,l),e}function nA(n){return n instanceof Date&&!isNaN(n.valueOf())}var u0=/^(\d+)?\.((\d+)(-(\d+))?)?$/,rA=22,_h=".",zc="0",d0=";",h0=",",Wy="#",oA="\xA4";function f0(n,e,t,r,o,i,s=!1){let a="",c=!1;if(!isFinite(n))a=_n(t,St.Infinity);else{let l=m0(n);s&&(l=g0(l));let u=e.minInt,h=e.minFrac,g=e.maxFrac;if(i){let de=i.match(u0);if(de===null)throw new Error(`${i} is not a valid digit info`);let ne=de[1],Jt=de[3],Yn=de[5];ne!=null&&(u=Qy(ne)),Jt!=null&&(h=Qy(Jt)),Yn!=null?g=Qy(Yn):Jt!=null&&h>g&&(g=h)}y0(l,h,g);let f=l.digits,C=l.integerLen,I=l.exponent,_=[];for(c=f.every(de=>!de);C<u;C++)f.unshift(0);for(;C<0;C++)f.unshift(0);C>0?_=f.splice(C,f.length):(_=f,f=[0]);let x=[];for(f.length>=e.lgSize&&x.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)x.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&x.unshift(f.join("")),a=x.join(_n(t,r)),_.length&&(a+=_n(t,o)+_.join("")),I&&(a+=_n(t,St.Exponential)+"+"+I)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function wA(n,e,t,r,o){let i=pA(e,Zy.Currency),s=p0(i,_n(e,St.MinusSign));return s.minFrac=CA(r),s.maxFrac=s.minFrac,f0(n,s,e,St.CurrencyGroup,St.CurrencyDecimal,o).replace(oA,t).replace(oA,"").trim()}function p0(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(d0),o=r[0],i=r[1],s=o.indexOf(_h)!==-1?o.split(_h):[o.substring(0,o.lastIndexOf(zc)+1),o.substring(o.lastIndexOf(zc)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(Wy));for(let u=0;u<c.length;u++){let h=c.charAt(u);h===zc?t.minFrac=t.maxFrac=u+1:h===Wy?t.maxFrac=u+1:t.posSuf+=h}let l=a.split(h0);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,i){let u=o.length-t.posPre.length-t.posSuf.length,h=i.indexOf(Wy);t.negPre=i.substring(0,h).replace(/'/g,""),t.negSuf=i.slice(h+u).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function g0(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function m0(n){let e=Math.abs(n)+"",t=0,r,o,i,s,a;for((o=e.indexOf(_h))>-1&&(e=e.replace(_h,"")),(i=e.search(/e/i))>0?(o<0&&(o=i),o+=+e.slice(i+1),e=e.substring(0,i)):o<0&&(o=e.length),i=0;e.charAt(i)===zc;i++);if(i===(a=e.length))r=[0],o=1;else{for(a--;e.charAt(a)===zc;)a--;for(o-=i,r=[],s=0;i<=a;i++,s++)r[s]=Number(e.charAt(i))}return o>rA&&(r=r.splice(0,rA-1),t=o-1,o=1),{digits:r,exponent:t,integerLen:o}}function y0(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,o=r.length-n.integerLen,i=Math.min(Math.max(e,o),t),s=i+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let h=s;h<r.length;h++)r[h]=0}else{o=Math.max(0,o),n.integerLen=1,r.length=Math.max(1,s=i+1),r[0]=0;for(let h=1;h<s;h++)r[h]=0}if(a>=5)if(s-1<0){for(let h=0;h>s;h--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;o<Math.max(0,i);o++)r.push(0);let c=i!==0,l=e+n.integerLen,u=r.reduceRight(function(h,g,f,C){return g=g+h,C[f]=g<10?g:g-10,c&&(C[f]===0&&f>=l?C.pop():c=!1),g>=10?1:0},0);u&&(r.unshift(u),n.integerLen++)}function Qy(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}var Yy=/\s+/,iA=[],v0=(()=>{class n{_ngEl;_renderer;initialClasses=iA;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(Yy):iA}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Yy):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let o=this.stateMap.get(t);o!==void 0?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],o=t[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Yy).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static \u0275fac=function(r){return new(r||n)(me(ar),me(Nc))};static \u0275dir=ur({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var bh=class{$implicit;ngForOf;index;count;constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},SA=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((o,i,s)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new bh(o.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(i===null?void 0:i);else if(i!==null){let a=r.get(i);r.move(a,s),sA(a,o)}});for(let o=0,i=r.length;o<i;o++){let a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{let i=r.get(o.currentIndex);sA(i,o)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(me(lr),me(Uo),me(jy))};static \u0275dir=ur({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function sA(n,e){n.context.$implicit=e.item}var C0=(()=>{class n{_viewContainer;_context=new Rh;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){aA(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){aA(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(me(lr),me(Uo))};static \u0275dir=ur({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Rh=class{$implicit=null;ngIf=null};function aA(n,e){if(n&&!n.createEmbeddedView)throw new A(2020,!1)}var E0=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(t,r,o){this._ngEl=t,this._differs=r,this._renderer=o}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[o,i]=t.split("."),s=o.indexOf("-")===-1?void 0:Tn.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,o,i?`${r}${i}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,o,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||n)(me(ar),me(Vy),me(Nc))};static \u0275dir=ur({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})(),I0=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let o=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,o,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,o)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,o):!1,get:(t,r,o)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,o)}})}static \u0275fac=function(r){return new(r||n)(me(lr))};static \u0275dir=ur({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[bc]})}return n})();function AA(n,e){return new A(2100,!1)}var T0="mediumDate",DA=new D(""),_A=new D(""),w0=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,o){this.locale=t,this.defaultTimezone=r,this.defaultOptions=o}transform(t,r,o,i){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??T0,a=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return EA(t,s,i||this.locale,a)}catch(s){throw AA(n,s.message)}}static \u0275fac=function(r){return new(r||n)(me(Lc,16),me(DA,24),me(_A,24))};static \u0275pipe=My({name:"date",type:n,pure:!0})}return n})();var S0=(()=>{class n{_locale;_defaultCurrencyCode;constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,o="symbol",i,s){if(!A0(t))return null;s||=this._locale,typeof o=="boolean"&&(o=o?"symbol":"code");let a=r||this._defaultCurrencyCode;o!=="code"&&(o==="symbol"||o==="symbol-narrow"?a=vA(a,o==="symbol"?"wide":"narrow",s):a=o);try{let c=D0(t);return wA(c,s,a,r,i)}catch(c){throw AA(n,c.message)}}static \u0275fac=function(r){return new(r||n)(me(Lc,16),me(GS,16))};static \u0275pipe=My({name:"currency",type:n,pure:!0})}return n})();function A0(n){return!(n==null||n===""||n!==n)}function D0(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var Gc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gt({type:n});static \u0275inj=zt({})}return n})();function qc(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[o,i]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}var Mh="browser",bA="server";function _0(n){return n===Mh}function kh(n){return n===bA}var jo=class{};var RA=(()=>{class n{static \u0275prov=M({token:n,providedIn:"root",factory:()=>new Xy(T(De),window)})}return n})(),Xy=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=R0(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}};function R0(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;for(;o;){let i=o.shadowRoot;if(i){let s=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(s)return s}o=r.nextNode()}}return null}var Ph=new D(""),rv=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o,i){return this._findPluginFor(r).addEventListener(t,r,o,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(i=>i.supports(t)),!r)throw new A(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(R(Ph),R(ie))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),Kc=class{_doc;constructor(e){this._doc=e}manager},Nh="ng-app-id";function MA(n){for(let e of n)e.remove()}function kA(n,e){let t=e.createElement("style");return t.textContent=n,t}function k0(n,e,t,r){let o=n.head?.querySelectorAll(`style[${Nh}="${e}"],link[${Nh}="${e}"]`);if(o)for(let i of o)i.removeAttribute(Nh),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&t.set(i.textContent,{usage:0,elements:[i]})}function tv(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var ov=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,o,i={}){this.doc=t,this.appId=r,this.nonce=o,this.isServer=kh(i),k0(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let o of t)this.addUsage(o,this.inline,kA);r?.forEach(o=>this.addUsage(o,this.external,tv))}removeStyles(t,r){for(let o of t)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(t,r,o){let i=r.get(t);i?i.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(t,this.doc)))})}removeUsage(t,r){let o=r.get(t);o&&(o.usage--,o.usage<=0&&(MA(o.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])MA(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:o}]of this.inline)o.push(this.addElement(t,kA(r,this.doc)));for(let[r,{elements:o}]of this.external)o.push(this.addElement(t,tv(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Nh,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(R(De),R(oy),R(sy,8),R(Ns))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),ev={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},iv=/%COMP%/g;var OA="%COMP%",N0=`_nghost-${OA}`,O0=`_ngcontent-${OA}`,P0=!0,x0=new D("",{providedIn:"root",factory:()=>P0});function F0(n){return O0.replace(iv,n)}function L0(n){return N0.replace(iv,n)}function PA(n,e){return e.map(t=>t.replace(iv,n))}var sv=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,o,i,s,a,c,l=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=kh(a),this.defaultRenderer=new Wc(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===In.ShadowDom&&(r=S(m({},r),{encapsulation:In.Emulated}));let o=this.getOrCreateRenderer(t,r);return o instanceof Oh?o.applyToHost(t):o instanceof Qc&&o.applyStyles(),o}getOrCreateRenderer(t,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case In.Emulated:i=new Oh(c,l,r,this.appId,u,s,a,h,g);break;case In.ShadowDom:return new nv(c,l,t,r,s,a,this.nonce,h,g);default:i=new Qc(c,l,r,u,s,a,h,g);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(R(rv),R(ov),R(oy),R(x0),R(De),R(Ns),R(ie),R(sy),R(Os,8))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),Wc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,o,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(ev[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(NA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(NA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new A(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;let i=ev[o];i?e.setAttributeNS(i,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let o=ev[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(Tn.DashCase|Tn.Important)?e.style.setProperty(t,r,o&Tn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Tn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,o){if(typeof e=="string"&&(e=Dn().getGlobalEventTarget(this.doc,e),!e))throw new A(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(e,t,i)),this.eventManager.addEventListener(e,t,i,o)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function NA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var nv=class extends Wc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,o,i,s,a,c,l){super(e,i,s,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=o.styles;u=PA(o.id,u);for(let g of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=g,this.shadowRoot.appendChild(f)}let h=o.getExternalStyles?.();if(h)for(let g of h){let f=tv(g,i);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Qc=class extends Wc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,o,i,s,a,c,l){super(e,i,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o;let u=r.styles;this.styles=l?PA(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Oh=class extends Qc{contentAttr;hostAttr;constructor(e,t,r,o,i,s,a,c,l){let u=o+"-"+r.id;super(e,t,r,i,s,a,c,l,u),this.contentAttr=F0(u),this.hostAttr=L0(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var xh=class n extends Hc{supportsDOMEvents=!0;static makeCurrent(){$y(new n)}onAndCancel(e,t,r,o){return e.addEventListener(t,r,o),()=>{e.removeEventListener(t,r,o)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=U0();return t==null?null:H0(t)}resetBaseElement(){Yc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return qc(document.cookie,e)}},Yc=null;function U0(){return Yc=Yc||document.head.querySelector("base"),Yc?Yc.getAttribute("href"):null}function H0(n){return new URL(n,document.baseURI).pathname}var Fh=class{addToWindow(e){Ye.getAngularTestability=(r,o=!0)=>{let i=e.findTestabilityInTree(r,o);if(i==null)throw new A(5103,!1);return i},Ye.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ye.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let o=Ye.getAllAngularTestabilities(),i=o.length,s=function(){i--,i==0&&r()};o.forEach(a=>{a.whenStable(s)})};Ye.frameworkStabilizers||(Ye.frameworkStabilizers=[]),Ye.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let o=e.getTestability(t);return o??(r?Dn().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},B0=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),FA=(()=>{class n extends Kc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o,i){return t.addEventListener(r,o,i),()=>this.removeEventListener(t,r,o,i)}removeEventListener(t,r,o,i){return t.removeEventListener(r,o,i)}static \u0275fac=function(r){return new(r||n)(R(De))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),xA=["alt","control","meta","shift"],j0={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},V0={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},LA=(()=>{class n extends Kc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,o,i){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dn().onAndCancel(t,s.domEventName,a,i))}static parseEventName(t){let r=t.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),xA.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=i,r.length!=0||i.length===0)return null;let c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let o=j0[t.key]||t.key,i="";return r.indexOf("code.")>-1&&(o=t.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),xA.forEach(s=>{if(s!==o){let a=V0[s];a(t)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(t,r,o){return i=>{n.matchEventFullKeyCode(i,t)&&o.runGuarded(()=>r(i))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(R(De))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})();function $0(){xh.makeCurrent()}function z0(){return new En}function G0(){return uw(document),document}var q0=[{provide:Ns,useValue:Mh},{provide:iy,useValue:$0,multi:!0},{provide:De,useFactory:G0}],K0=Hy(KS,"browser",q0);var W0=[{provide:Pc,useClass:Fh},{provide:Oy,useClass:mh,deps:[ie,yh,Pc]},{provide:mh,useClass:mh,deps:[ie,yh,Pc]}],Q0=[{provide:Xd,useValue:"root"},{provide:En,useFactory:z0},{provide:Ph,useClass:FA,multi:!0,deps:[De]},{provide:Ph,useClass:LA,multi:!0,deps:[De]},sv,ov,rv,{provide:Es,useExisting:sv},{provide:jo,useClass:B0},[]],Y0=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gt({type:n});static \u0275inj=zt({providers:[...Q0,...W0],imports:[Gc,WS]})}return n})();var Fs=class{},Jc=class{},zr=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let o=t.slice(0,r),i=t.slice(r+1).trim();this.addHeaderEntry(o,i)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let o=(e.op==="a"?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":let i=e.value;if(!i)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>i.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(i=>i.toString()),o=e.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Uh=class{encodeKey(e){return UA(e)}encodeValue(e){return UA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function J0(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{let i=o.indexOf("="),[s,a]=i==-1?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var Z0=/%(\d[a-f0-9])/gi,X0={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function UA(n){return encodeURIComponent(n).replace(Z0,(e,t)=>X0[t]??e)}function Lh(n){return`${n}`}var gr=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Uh,e.fromString){if(e.fromObject)throw new A(2805,!1);this.map=J0(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],o=Array.isArray(r)?r.map(Lh):[Lh(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let o=e[r];Array.isArray(o)?o.forEach(i=>{t.push({param:r,value:i,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Lh(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],o=r.indexOf(Lh(e.value));o!==-1&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Hh=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function eF(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function HA(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function BA(n){return typeof Blob<"u"&&n instanceof Blob}function jA(n){return typeof FormData<"u"&&n instanceof FormData}function tF(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var VA="Content-Type",$A="Accept",GA="X-Request-URL",qA="text/plain",KA="application/json",nF=`${KA}, ${qA}, */*`,xs=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,o){this.url=t,this.method=e.toUpperCase();let i;if(eF(this.method)||o?(this.body=r!==void 0?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new zr,this.context??=new Hh,!this.params)this.params=new gr,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||HA(this.body)||BA(this.body)||jA(this.body)||tF(this.body)?this.body:this.body instanceof gr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||jA(this.body)?null:BA(this.body)?this.body.type||null:HA(this.body)?null:typeof this.body=="string"?qA:this.body instanceof gr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?KA:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,i=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,u=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((g,f)=>g.set(f,e.setHeaders[f]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((g,f)=>g.set(f,e.setParams[f]),u)),new n(t,r,s,{params:u,headers:l,context:h,reportProgress:c,responseType:o,withCredentials:a,transferCache:i})}},Vo=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Vo||{}),Ls=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new zr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Bh=class n extends Ls{constructor(e={}){super(e)}type=Vo.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Zc=class n extends Ls{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Vo.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Xc=class extends Ls{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},rF=200,oF=204;function av(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var WA=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,o={}){let i;if(t instanceof xs)i=t;else{let c;o.headers instanceof zr?c=o.headers:c=new zr(o.headers);let l;o.params&&(o.params instanceof gr?l=o.params:l=new gr({fromObject:o.params})),i=new xs(t,r,o.body!==void 0?o.body:null,{headers:c,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let s=N(i).pipe(Mt(c=>this.handler.handle(c)));if(t instanceof xs||o.observe==="events")return s;let a=s.pipe(We(c=>c instanceof Zc));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(V(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new A(2806,!1);return c.body}));case"blob":return a.pipe(V(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new A(2807,!1);return c.body}));case"text":return a.pipe(V(c=>{if(c.body!==null&&typeof c.body!="string")throw new A(2808,!1);return c.body}));case"json":default:return a.pipe(V(c=>c.body))}case"response":return a;default:throw new A(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new gr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,av(o,r))}post(t,r,o={}){return this.request("POST",t,av(o,r))}put(t,r,o={}){return this.request("PUT",t,av(o,r))}static \u0275fac=function(r){return new(r||n)(R(Fs))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})();var iF=new D("");function QA(n,e){return e(n)}function sF(n,e){return(t,r)=>e.intercept(t,{handle:o=>n(o,r)})}function aF(n,e,t){return(r,o)=>Et(t,()=>e(r,i=>n(i,o)))}var YA=new D(""),lv=new D(""),JA=new D(""),uv=new D("",{providedIn:"root",factory:()=>!0});function cF(){let n=null;return(e,t)=>{n===null&&(n=(T(YA,{optional:!0})??[]).reduceRight(sF,QA));let r=T(sr);if(T(uv)){let i=r.add();return n(e,t).pipe(Xn(()=>r.remove(i)))}else return n(e,t)}}var jh=(()=>{class n extends Fs{backend;injector;chain=null;pendingTasks=T(sr);contributeToStability=T(uv);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(lv),...this.injector.get(JA,[])]));this.chain=r.reduceRight((o,i)=>aF(o,i,this.injector),QA)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(Xn(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(R(Jc),R(Je))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})();var lF=/^\)\]\}',?\n/,uF=RegExp(`^${GA}:`,"m");function dF(n){return"responseURL"in n&&n.responseURL?n.responseURL:uF.test(n.getAllResponseHeaders())?n.getResponseHeader(GA):null}var cv=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new A(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Z(r.\u0275loadImpl()):N(null)).pipe(Qe(()=>new X(i=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((I,_)=>s.setRequestHeader(I,_.join(","))),t.headers.has($A)||s.setRequestHeader($A,nF),!t.headers.has(VA)){let I=t.detectContentTypeHeader();I!==null&&s.setRequestHeader(VA,I)}if(t.responseType){let I=t.responseType.toLowerCase();s.responseType=I!=="json"?I:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let I=s.statusText||"OK",_=new zr(s.getAllResponseHeaders()),x=dF(s)||t.url;return c=new Bh({headers:_,status:s.status,statusText:I,url:x}),c},u=()=>{let{headers:I,status:_,statusText:x,url:de}=l(),ne=null;_!==oF&&(ne=typeof s.response>"u"?s.responseText:s.response),_===0&&(_=ne?rF:0);let Jt=_>=200&&_<300;if(t.responseType==="json"&&typeof ne=="string"){let Yn=ne;ne=ne.replace(lF,"");try{ne=ne!==""?JSON.parse(ne):null}catch(kb){ne=Yn,Jt&&(Jt=!1,ne={error:kb,text:ne})}}Jt?(i.next(new Zc({body:ne,headers:I,status:_,statusText:x,url:de||void 0})),i.complete()):i.error(new Xc({error:ne,headers:I,status:_,statusText:x,url:de||void 0}))},h=I=>{let{url:_}=l(),x=new Xc({error:I,status:s.status||0,statusText:s.statusText||"Unknown Error",url:_||void 0});i.error(x)},g=!1,f=I=>{g||(i.next(l()),g=!0);let _={type:Vo.DownloadProgress,loaded:I.loaded};I.lengthComputable&&(_.total=I.total),t.responseType==="text"&&s.responseText&&(_.partialText=s.responseText),i.next(_)},C=I=>{let _={type:Vo.UploadProgress,loaded:I.loaded};I.lengthComputable&&(_.total=I.total),i.next(_)};return s.addEventListener("load",u),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),t.reportProgress&&(s.addEventListener("progress",f),a!==null&&s.upload&&s.upload.addEventListener("progress",C)),s.send(a),i.next({type:Vo.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",u),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",f),a!==null&&s.upload&&s.upload.removeEventListener("progress",C)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(R(jo))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),ZA=new D(""),hF="XSRF-TOKEN",fF=new D("",{providedIn:"root",factory:()=>hF}),pF="X-XSRF-TOKEN",gF=new D("",{providedIn:"root",factory:()=>pF}),el=class{},mF=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=qc(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(R(De),R(fF))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})();function yF(n,e){let t=n.url.toLowerCase();if(!T(ZA)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=T(el).getToken(),o=T(gF);return r!=null&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),e(n)}var dv=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(dv||{});function vF(n,e){return{\u0275kind:n,\u0275providers:e}}function XA(...n){let e=[WA,cv,jh,{provide:Fs,useExisting:jh},{provide:Jc,useFactory:()=>T(iF,{optional:!0})??T(cv)},{provide:lv,useValue:yF,multi:!0},{provide:ZA,useValue:!0},{provide:el,useClass:mF}];for(let t of n)e.push(...t.\u0275providers);return _c(e)}var zA=new D("");function eD(){return vF(dv.LegacyInterceptors,[{provide:zA,useFactory:cF},{provide:lv,useExisting:zA,multi:!0}])}var CF=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gt({type:n});static \u0275inj=zt({providers:[XA(eD())]})}return n})();var tD=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(R(De))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var EF=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:function(r){let o=null;return r?o=new(r||n):o=R(IF),o},providedIn:"root"})}return n})(),IF=(()=>{class n extends EF{_doc;constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case $r.NONE:return r;case $r.HTML:return Ps(r,"HTML")?An(r):Aw(this._doc,String(r)).toString();case $r.STYLE:return Ps(r,"Style")?An(r):r;case $r.SCRIPT:if(Ps(r,"Script"))return An(r);throw new A(5200,!1);case $r.URL:return Ps(r,"URL")?An(r):dy(String(r));case $r.RESOURCE_URL:if(Ps(r,"ResourceURL"))return An(r);throw new A(5201,!1);default:throw new A(5202,!1)}}bypassSecurityTrustHtml(t){return gw(t)}bypassSecurityTrustStyle(t){return mw(t)}bypassSecurityTrustScript(t){return yw(t)}bypassSecurityTrustUrl(t){return vw(t)}bypassSecurityTrustResourceUrl(t){return Cw(t)}static \u0275fac=function(r){return new(r||n)(R(De))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $="primary",fl=Symbol("RouteTitle"),mv=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Go(n){return new mv(n)}function lD(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=n[i];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function wF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!bn(n[t],e[t]))return!1;return!0}function bn(n,e){let t=n?yv(n):void 0,r=e?yv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let i=0;i<t.length;i++)if(o=t[i],!uD(n[o],e[o]))return!1;return!0}function yv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function uD(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((o,i)=>r[i]===o)}else return n===e}function dD(n){return n.length>0?n[n.length-1]:null}function Qr(n){return cg(n)?n:xc(n)?Z(Promise.resolve(n)):N(n)}var SF={exact:fD,subset:pD},hD={exact:AF,subset:DF,ignored:()=>!0};function nD(n,e,t){return SF[t.paths](n.root,e.root,t.matrixParams)&&hD[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function AF(n,e){return bn(n,e)}function fD(n,e,t){if(!$o(n.segments,e.segments)||!zh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!fD(n.children[r],e.children[r],t))return!1;return!0}function DF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>uD(n[t],e[t]))}function pD(n,e,t){return gD(n,e,e.segments,t)}function gD(n,e,t,r){if(n.segments.length>t.length){let o=n.segments.slice(0,t.length);return!(!$o(o,t)||e.hasChildren()||!zh(o,t,r))}else if(n.segments.length===t.length){if(!$o(n.segments,t)||!zh(n.segments,t,r))return!1;for(let o in e.children)if(!n.children[o]||!pD(n.children[o],e.children[o],r))return!1;return!0}else{let o=t.slice(0,n.segments.length),i=t.slice(n.segments.length);return!$o(n.segments,o)||!zh(n.segments,o,r)||!n.children[$]?!1:gD(n.children[$],e,i,r)}}function zh(n,e,t){return e.every((r,o)=>hD[t](n[o].parameters,r.parameters))}var Mn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new te([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Go(this.queryParams),this._queryParamMap}toString(){return RF.serialize(this)}},te=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gh(this)}},Gr=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Go(this.parameters),this._parameterMap}toString(){return yD(this)}};function _F(n,e){return $o(n,e)&&n.every((t,r)=>bn(t.parameters,e[r].parameters))}function $o(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function bF(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===$&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==$&&(t=t.concat(e(o,r)))}),t}var qo=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:()=>new qr,providedIn:"root"})}return n})(),qr=class{parse(e){let t=new Cv(e);return new Mn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${tl(e.root,!0)}`,r=NF(e.queryParams),o=typeof e.fragment=="string"?`#${MF(e.fragment)}`:"";return`${t}${r}${o}`}},RF=new qr;function Gh(n){return n.segments.map(e=>yD(e)).join("/")}function tl(n,e){if(!n.hasChildren())return Gh(n);if(e){let t=n.children[$]?tl(n.children[$],!1):"",r=[];return Object.entries(n.children).forEach(([o,i])=>{o!==$&&r.push(`${o}:${tl(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=bF(n,(r,o)=>o===$?[tl(n.children[$],!1)]:[`${o}:${tl(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[$]!=null?`${Gh(n)}/${t[0]}`:`${Gh(n)}/(${t.join("//")})`}}function mD(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vh(n){return mD(n).replace(/%3B/gi,";")}function MF(n){return encodeURI(n)}function vv(n){return mD(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qh(n){return decodeURIComponent(n)}function rD(n){return qh(n.replace(/\+/g,"%20"))}function yD(n){return`${vv(n.path)}${kF(n.parameters)}`}function kF(n){return Object.entries(n).map(([e,t])=>`;${vv(e)}=${vv(t)}`).join("")}function NF(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(o=>`${Vh(t)}=${Vh(o)}`).join("&"):`${Vh(t)}=${Vh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var OF=/^[^\/()?;#]+/;function hv(n){let e=n.match(OF);return e?e[0]:""}var PF=/^[^\/()?;=#]+/;function xF(n){let e=n.match(PF);return e?e[0]:""}var FF=/^[^=?&#]+/;function LF(n){let e=n.match(FF);return e?e[0]:""}var UF=/^[^&#]+/;function HF(n){let e=n.match(UF);return e?e[0]:""}var Cv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new te([],{}):new te([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[$]=new te(e,t)),r}parseSegment(){let e=hv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new A(4009,!1);return this.capture(e),new Gr(qh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=xF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=hv(this.remaining);o&&(r=o,this.capture(r))}e[qh(t)]=qh(r)}parseQueryParam(e){let t=LF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=HF(this.remaining);s&&(r=s,this.capture(r))}let o=rD(t),i=rD(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=hv(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new A(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=$);let s=this.parseChildren();t[i]=Object.keys(s).length===1?s[$]:new te([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new A(4011,!1)}};function vD(n){return n.segments.length>0?new te([],{[$]:n}):n}function CD(n){let e={};for(let[r,o]of Object.entries(n.children)){let i=CD(o);if(r===$&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}let t=new te(n.segments,e);return BF(t)}function BF(n){if(n.numberOfChildren===1&&n.children[$]){let e=n.children[$];return new te(n.segments.concat(e.segments),e.children)}return n}function Vs(n){return n instanceof Mn}function ED(n,e,t=null,r=null){let o=ID(n);return TD(o,e,t,r)}function ID(n){let e;function t(i){let s={};for(let c of i.children){let l=t(c);s[c.outlet]=l}let a=new te(i.url,s);return i===n&&(e=a),a}let r=t(n.root),o=vD(r);return e??o}function TD(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return fv(o,o,o,t,r);let i=jF(e);if(i.toRoot())return fv(o,o,new te([],{}),t,r);let s=VF(i,o,n),a=s.processChildren?rl(s.segmentGroup,s.index,i.commands):SD(s.segmentGroup,s.index,i.commands);return fv(o,s.segmentGroup,a,t,r)}function Wh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function il(n){return typeof n=="object"&&n!=null&&n.outlets}function fv(n,e,t,r,o){let i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;n===e?s=t:s=wD(n,e,t);let a=vD(CD(s));return new Mn(a,i,o)}function wD(n,e,t){let r={};return Object.entries(n.children).forEach(([o,i])=>{i===e?r[o]=t:r[o]=wD(i,e,t)}),new te(n.segments,r)}var Qh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Wh(r[0]))throw new A(4003,!1);let o=r.find(il);if(o&&o!==dD(r))throw new A(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function jF(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Qh(!0,0,n);let e=0,t=!1,r=n.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new Qh(t,e,r)}var Bs=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function VF(n,e,t){if(n.isAbsolute)return new Bs(e,!0,0);if(!t)return new Bs(e,!1,NaN);if(t.parent===null)return new Bs(t,!0,0);let r=Wh(n.commands[0])?0:1,o=t.segments.length-1+r;return $F(t,o,n.numberOfDoubleDots)}function $F(n,e,t){let r=n,o=e,i=t;for(;i>o;){if(i-=o,r=r.parent,!r)throw new A(4005,!1);o=r.segments.length}return new Bs(r,!1,o-i)}function zF(n){return il(n[0])?n[0].outlets:{[$]:n}}function SD(n,e,t){if(n??=new te([],{}),n.segments.length===0&&n.hasChildren())return rl(n,e,t);let r=GF(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let i=new te(n.segments.slice(0,r.pathIndex),{});return i.children[$]=new te(n.segments.slice(r.pathIndex),n.children),rl(i,0,o)}else return r.match&&o.length===0?new te(n.segments,{}):r.match&&!n.hasChildren()?Ev(n,e,t):r.match?rl(n,0,o):Ev(n,e,t)}function rl(n,e,t){if(t.length===0)return new te(n.segments,{});{let r=zF(t),o={};if(Object.keys(r).some(i=>i!==$)&&n.children[$]&&n.numberOfChildren===1&&n.children[$].segments.length===0){let i=rl(n.children[$],e,t);return new te(n.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=SD(n.children[i],e,s))}),Object.entries(n.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new te(n.segments,o)}}function GF(n,e,t){let r=0,o=e,i={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return i;let s=n.segments[o],a=t[r];if(il(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(o>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!iD(c,l,s))return i;r+=2}else{if(!iD(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function Ev(n,e,t){let r=n.segments.slice(0,e),o=0;for(;o<t.length;){let i=t[o];if(il(i)){let c=qF(i.outlets);return new te(r,c)}if(o===0&&Wh(t[0])){let c=n.segments[e];r.push(new Gr(c.path,oD(t[0]))),o++;continue}let s=il(i)?i.outlets[$]:`${i}`,a=o<t.length-1?t[o+1]:null;s&&a&&Wh(a)?(r.push(new Gr(s,oD(a))),o+=2):(r.push(new Gr(s,{})),o++)}return new te(r,{})}function qF(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Ev(new te([],{}),0,r))}),e}function oD(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function iD(n,e,t){return n==t.path&&bn(e,t.parameters)}var Kh="imperative",Le=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Le||{}),Pt=class{id;url;constructor(e,t){this.id=e,this.url=t}},Kr=class extends Pt{type=Le.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},sn=class extends Pt{urlAfterRedirects;type=Le.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},At=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(At||{}),$s=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}($s||{}),Rn=class extends Pt{reason;code;type=Le.NavigationCancel;constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},kn=class extends Pt{reason;code;type=Le.NavigationSkipped;constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o}},zs=class extends Pt{error;target;type=Le.NavigationError;constructor(e,t,r,o){super(e,t),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},sl=class extends Pt{urlAfterRedirects;state;type=Le.RoutesRecognized;constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yh=class extends Pt{urlAfterRedirects;state;type=Le.GuardsCheckStart;constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jh=class extends Pt{urlAfterRedirects;state;shouldActivate;type=Le.GuardsCheckEnd;constructor(e,t,r,o,i){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Zh=class extends Pt{urlAfterRedirects;state;type=Le.ResolveStart;constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xh=class extends Pt{urlAfterRedirects;state;type=Le.ResolveEnd;constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ef=class{route;type=Le.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},tf=class{route;type=Le.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},nf=class{snapshot;type=Le.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rf=class{snapshot;type=Le.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},of=class{snapshot;type=Le.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sf=class{snapshot;type=Le.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gs=class{routerEvent;position;anchor;type=Le.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},al=class{},qs=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function KF(n,e){return n.providers&&!n._injector&&(n._injector=Oc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function on(n){return n.outlet||$}function WF(n,e){let t=n.filter(r=>on(r)===e);return t.push(...n.filter(r=>on(r)!==e)),t}function pl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var af=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return pl(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ko(this.rootInjector)}},Ko=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new af(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(R(Je))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Iv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Iv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Tv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Tv(e,this._root).map(t=>t.value)}};function Iv(n,e){if(n===e.value)return e;for(let t of e.children){let r=Iv(n,t);if(r)return r}return null}function Tv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Tv(n,t);if(r.length)return r.unshift(e),r}return[]}var Ot=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Hs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var cl=class extends cf{snapshot;constructor(e,t){super(e),this.snapshot=t,Mv(this,e)}toString(){return this.snapshot.toString()}};function AD(n){let e=QF(n),t=new xe([new Gr("",{})]),r=new xe({}),o=new xe({}),i=new xe({}),s=new xe(""),a=new Wr(t,r,i,s,o,$,n,e.root);return a.snapshot=e.root,new cl(new Ot(a,[]),e)}function QF(n){let e={},t={},r={},o="",i=new zo([],e,r,o,t,$,n,null,{});return new ll("",new Ot(i,[]))}var Wr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,o,i,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(V(l=>l[fl]))??N(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(V(e=>Go(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(V(e=>Go(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function lf(n,e,t="emptyOnly"){let r,{routeConfig:o}=n;return e!==null&&(t==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:m(m({},e.params),n.params),data:m(m({},e.data),n.data),resolve:m(m(m(m({},n.data),e.data),o?.data),n._resolvedData)}:r={params:m({},n.params),data:m({},n.data),resolve:m(m({},n.data),n._resolvedData??{})},o&&_D(o)&&(r.resolve[fl]=o.title),r}var zo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[fl]}constructor(e,t,r,o,i,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Go(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Go(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ll=class extends cf{url;constructor(e,t){super(t),this.url=e,Mv(this,t)}toString(){return DD(this._root)}};function Mv(n,e){e.value._routerState=n,e.children.forEach(t=>Mv(n,t))}function DD(n){let e=n.children.length>0?` { ${n.children.map(DD).join(", ")} } `:"";return`${n.value}${e}`}function pv(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,bn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),bn(e.params,t.params)||n.paramsSubject.next(t.params),wF(e.url,t.url)||n.urlSubject.next(t.url),bn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function wv(n,e){let t=bn(n.params,e.params)&&_F(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||wv(n.parent,e.parent))}function _D(n){return typeof n.title=="string"||n.title===null}var bD=new D(""),kv=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=$;activateEvents=new yt;deactivateEvents=new yt;attachEvents=new yt;detachEvents=new yt;routerOutletData=nw(void 0);parentContexts=T(Ko);location=T(lr);changeDetector=T(Uc);inputBinder=T(gl,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new A(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new A(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new A(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new A(4013,!1);this._activatedRoute=t;let o=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Sv(t,a,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ur({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[bc]})}return n})(),Sv=class{route;childContexts;parent;outletData;constructor(e,t,r,o){this.route=e,this.childContexts=t,this.parent=r,this.outletData=o}get(e,t){return e===Wr?this.route:e===Ko?this.childContexts:e===bD?this.outletData:this.parent.get(e,t)}},gl=new D(""),Nv=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,o=hc([r.queryParams,r.params,r.data]).pipe(Qe(([i,s,a],c)=>(a=m(m(m({},i),s),a),c===0?N(a):Promise.resolve(a)))).subscribe(i=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=JS(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,i[a])});this.outletDataSubscriptions.set(t,o)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),Ov=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ry({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,o){r&1&&Ly(0,"router-outlet")},dependencies:[kv],encapsulation:2})}return n})();function Pv(n){let e=n.children&&n.children.map(Pv),t=e?S(m({},n),{children:e}):m({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==$&&(t.component=Ov),t}function YF(n,e,t){let r=ul(n,e._root,t?t._root:void 0);return new cl(r,e)}function ul(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let o=JF(n,e,t);return new Ot(r,o)}else{if(n.shouldAttach(e.value)){let i=n.retrieve(e.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ul(n,a)),s}}let r=ZF(e.value),o=e.children.map(i=>ul(n,i));return new Ot(r,o)}}function JF(n,e,t){return e.children.map(r=>{for(let o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return ul(n,r,o);return ul(n,r)})}function ZF(n){return new Wr(new xe(n.url),new xe(n.params),new xe(n.queryParams),new xe(n.fragment),new xe(n.data),n.outlet,n.component,n)}var Ks=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},RD="ngNavigationCancelingError";function uf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Vs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=MD(!1,At.Redirect);return o.url=t,o.navigationBehaviorOptions=r,o}function MD(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[RD]=!0,t.cancellationCode=e,t}function XF(n){return kD(n)&&Vs(n.url)}function kD(n){return!!n&&n[RD]}var eL=(n,e,t,r)=>V(o=>(new Av(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)),Av=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,o,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),pv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let o=Hs(t);e.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,t,r){let o=e.value,i=t?t.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=Hs(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=Hs(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let o=Hs(t);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new sf(i.value.snapshot))}),e.children.length&&this.forwardEvent(new rf(e.value.snapshot))}activateRoutes(e,t,r){let o=e.value,i=t?t.value:null;if(pv(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),pv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},df=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},js=class{component;route;constructor(e,t){this.component=e,this.route=t}};function tL(n,e,t){let r=n._root,o=e?e._root:null;return nl(r,o,t,[r.value])}function nL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Qs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!XI(n)?n:e.get(n):r}function nl(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=Hs(e);return n.children.forEach(s=>{rL(s,i[s.value.outlet],t,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>ol(a,t.getContext(s),o)),o}function rL(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let c=oL(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new df(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?nl(n,e,a?a.children:null,r,o):nl(n,e,t,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new js(a.outlet.component,s))}else s&&ol(e,a,o),o.canActivateChecks.push(new df(r)),i.component?nl(n,null,a?a.children:null,r,o):nl(n,null,t,r,o);return o}function oL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!$o(n.url,e.url);case"pathParamsOrQueryParamsChange":return!$o(n.url,e.url)||!bn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wv(n,e)||!bn(n.queryParams,e.queryParams);case"paramsChange":default:return!wv(n,e)}}function ol(n,e,t){let r=Hs(n),o=n.value;Object.entries(r).forEach(([i,s])=>{o.component?e?ol(s,e.children.getContext(i),t):ol(s,null,t):ol(s,e,t)}),o.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new js(e.outlet.component,o)):t.canDeactivateChecks.push(new js(null,o)):t.canDeactivateChecks.push(new js(null,o))}function ml(n){return typeof n=="function"}function iL(n){return typeof n=="boolean"}function sL(n){return n&&ml(n.canLoad)}function aL(n){return n&&ml(n.canActivate)}function cL(n){return n&&ml(n.canActivateChild)}function lL(n){return n&&ml(n.canDeactivate)}function uL(n){return n&&ml(n.canMatch)}function ND(n){return n instanceof Zn||n?.name==="EmptyError"}var $h=Symbol("INITIAL_VALUE");function Ws(){return Qe(n=>hc(n.map(e=>e.pipe(gn(1),hg($h)))).pipe(V(e=>{for(let t of e)if(t!==!0){if(t===$h)return $h;if(t===!1||dL(t))return t}return!0}),We(e=>e!==$h),gn(1)))}function dL(n){return Vs(n)||n instanceof Ks}function hL(n,e){return pe(t=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=t;return s.length===0&&i.length===0?N(S(m({},t),{guardsResult:!0})):fL(s,r,o,n).pipe(pe(a=>a&&iL(a)?pL(r,i,n,e):N(a)),V(a=>S(m({},t),{guardsResult:a})))})}function fL(n,e,t,r){return Z(n).pipe(pe(o=>CL(o.component,o.route,t,e,r)),er(o=>o!==!0,!0))}function pL(n,e,t,r){return Z(e).pipe(Mt(o=>ss(mL(o.route.parent,r),gL(o.route,r),vL(n,o.path,t),yL(n,o.route,t))),er(o=>o!==!0,!0))}function gL(n,e){return n!==null&&e&&e(new of(n)),N(!0)}function mL(n,e){return n!==null&&e&&e(new nf(n)),N(!0)}function yL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return N(!0);let o=r.map(i=>dd(()=>{let s=pl(e)??t,a=Qs(i,s),c=aL(a)?a.canActivate(e,n):Et(s,()=>a(e,n));return Qr(c).pipe(er())}));return N(o).pipe(Ws())}function vL(n,e,t){let r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>nL(s)).filter(s=>s!==null).map(s=>dd(()=>{let a=s.guards.map(c=>{let l=pl(s.node)??t,u=Qs(c,l),h=cL(u)?u.canActivateChild(r,n):Et(l,()=>u(r,n));return Qr(h).pipe(er())});return N(a).pipe(Ws())}));return N(i).pipe(Ws())}function CL(n,e,t,r,o){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return N(!0);let s=i.map(a=>{let c=pl(e)??o,l=Qs(a,c),u=lL(l)?l.canDeactivate(n,e,t,r):Et(c,()=>l(n,e,t,r));return Qr(u).pipe(er())});return N(s).pipe(Ws())}function EL(n,e,t,r){let o=e.canLoad;if(o===void 0||o.length===0)return N(!0);let i=o.map(s=>{let a=Qs(s,n),c=sL(a)?a.canLoad(e,t):Et(n,()=>a(e,t));return Qr(c)});return N(i).pipe(Ws(),OD(r))}function OD(n){return og(Ve(e=>{if(typeof e!="boolean")throw uf(n,e)}),V(e=>e===!0))}function IL(n,e,t,r){let o=e.canMatch;if(!o||o.length===0)return N(!0);let i=o.map(s=>{let a=Qs(s,n),c=uL(a)?a.canMatch(e,t):Et(n,()=>a(e,t));return Qr(c)});return N(i).pipe(Ws(),OD(r))}var dl=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},hl=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Us(n){return rs(new dl(n))}function TL(n){return rs(new A(4e3,!1))}function wL(n){return rs(MD(!1,At.GuardRejected))}var Dv=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return N(r);if(o.numberOfChildren>1||!o.children[$])return TL(`${e.redirectTo}`);o=o.children[$]}}applyRedirectCommands(e,t,r,o,i){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:u,url:h,outlet:g,params:f,data:C,title:I}=o,_=Et(i,()=>a({params:f,data:C,queryParams:c,fragment:l,routeConfig:u,url:h,outlet:g,title:I}));if(_ instanceof Mn)throw new hl(_);t=_}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new hl(s);return s}applyRedirectCreateUrlTree(e,t,r,o){let i=this.createSegmentGroup(e,t.root,r,o);return new Mn(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(e,t,r,o){let i=this.createSegments(e,t.segments,r,o),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,o)}),new te(i,s)}createSegments(e,t,r,o){return t.map(i=>i.path[0]===":"?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,t,r){let o=r[t.path.substring(1)];if(!o)throw new A(4001,!1);return o}findOrReturn(e,t){let r=0;for(let o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}},_v={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function SL(n,e,t,r,o){let i=PD(n,e,t);return i.matched?(r=KF(e,r),IL(r,e,t,o).pipe(V(s=>s===!0?i:m({},_v)))):N(i)}function PD(n,e,t){if(e.path==="**")return AL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?m({},_v):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let o=(e.matcher||lD)(t,n,e);if(!o)return m({},_v);let i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let s=o.consumed.length>0?m(m({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function AL(n){return{matched:!0,parameters:n.length>0?dD(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function sD(n,e,t,r){return t.length>0&&bL(n,t,r)?{segmentGroup:new te(e,_L(r,new te(t,n.children))),slicedSegments:[]}:t.length===0&&RL(n,t,r)?{segmentGroup:new te(n.segments,DL(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new te(n.segments,n.children),slicedSegments:t}}function DL(n,e,t,r){let o={};for(let i of t)if(ff(n,e,i)&&!r[on(i)]){let s=new te([],{});o[on(i)]=s}return m(m({},r),o)}function _L(n,e){let t={};t[$]=e;for(let r of n)if(r.path===""&&on(r)!==$){let o=new te([],{});t[on(r)]=o}return t}function bL(n,e,t){return t.some(r=>ff(n,e,r)&&on(r)!==$)}function RL(n,e,t){return t.some(r=>ff(n,e,r))}function ff(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function ML(n,e,t){return e.length===0&&!n.children[t]}var bv=class{};function kL(n,e,t,r,o,i,s="emptyOnly"){return new Rv(n,e,t,r,o,s,i).recognize()}var NL=31,Rv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,o,i,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Dv(this.urlSerializer,this.urlTree)}noMatchError(e){return new A(4002,`'${e.segmentGroup}'`)}recognize(){let e=sD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(V(({children:t,rootSnapshot:r})=>{let o=new Ot(r,t),i=new ll("",o),s=ED(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(e){let t=new zo([],Object.freeze({}),Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),$,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,$,t).pipe(V(r=>({children:r,rootSnapshot:t})),Bt(r=>{if(r instanceof hl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof dl?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,o,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,i):this.processSegment(e,t,r,r.segments,o,!0,i).pipe(V(s=>s instanceof Ot?[s]:[]))}processChildren(e,t,r,o){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Z(i).pipe(Mt(s=>{let a=r.children[s],c=WF(t,s);return this.processSegmentGroup(e,c,a,s,o)}),dg((s,a)=>(s.push(...a),s)),Lr(null),ug(),pe(s=>{if(s===null)return Us(r);let a=xD(s);return OL(a),N(a)}))}processSegment(e,t,r,o,i,s,a){return Z(t).pipe(Mt(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,o,i,s,a).pipe(Bt(l=>{if(l instanceof dl)return N(null);throw l}))),er(c=>!!c),Bt(c=>{if(ND(c))return ML(r,o,i)?N(new bv):Us(r);throw c}))}processSegmentAgainstRoute(e,t,r,o,i,s,a,c){return on(r)!==s&&(s===$||!ff(o,i,r))?Us(o):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,o,r,i,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,i,s,c):Us(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:h,remainingSegments:g}=PD(t,o,i);if(!c)return Us(t);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>NL&&(this.allowRedirects=!1));let f=new zo(i,l,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,aD(o),on(o),o.component??o._loadedComponent??null,o,cD(o)),C=lf(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(C.params),f.data=Object.freeze(C.data);let I=this.applyRedirects.applyRedirectCommands(u,o.redirectTo,h,f,e);return this.applyRedirects.lineralizeSegments(o,I).pipe(pe(_=>this.processSegment(e,r,t,_.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,o,i,s){let a=SL(t,r,o,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Qe(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,o).pipe(Qe(({routes:l})=>{let u=r._loadedInjector??e,{parameters:h,consumedSegments:g,remainingSegments:f}=c,C=new zo(g,h,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,aD(r),on(r),r.component??r._loadedComponent??null,r,cD(r)),I=lf(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(I.params),C.data=Object.freeze(I.data);let{segmentGroup:_,slicedSegments:x}=sD(t,g,f,l);if(x.length===0&&_.hasChildren())return this.processChildren(u,l,_,C).pipe(V(ne=>new Ot(C,ne)));if(l.length===0&&x.length===0)return N(new Ot(C,[]));let de=on(r)===i;return this.processSegment(u,l,_,x,de?$:i,!0,C).pipe(V(ne=>new Ot(C,ne instanceof Ot?[ne]:[])))}))):Us(t)))}getChildConfig(e,t,r){return t.children?N({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?N({routes:t._loadedRoutes,injector:t._loadedInjector}):EL(e,t,r,this.urlSerializer).pipe(pe(o=>o?this.configLoader.loadChildren(e,t).pipe(Ve(i=>{t._loadedRoutes=i.routes,t._loadedInjector=i.injector})):wL(t))):N({routes:[],injector:e})}};function OL(n){n.sort((e,t)=>e.value.outlet===$?-1:t.value.outlet===$?1:e.value.outlet.localeCompare(t.value.outlet))}function PL(n){let e=n.value.routeConfig;return e&&e.path===""}function xD(n){let e=[],t=new Set;for(let r of n){if(!PL(r)){e.push(r);continue}let o=e.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),t.add(o)):e.push(r)}for(let r of t){let o=xD(r.children);e.push(new Ot(r.value,o))}return e.filter(r=>!t.has(r))}function aD(n){return n.data||{}}function cD(n){return n.resolve||{}}function xL(n,e,t,r,o,i){return pe(s=>kL(n,e,t,r,s.extractedUrl,o,i).pipe(V(({state:a,tree:c})=>S(m({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function FL(n,e){return pe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return N(t);let i=new Set(o.map(c=>c.route)),s=new Set;for(let c of i)if(!s.has(c))for(let l of FD(c))s.add(l);let a=0;return Z(s).pipe(Mt(c=>i.has(c)?LL(c,r,n,e):(c.data=lf(c,c.parent,n).resolve,N(void 0))),Ve(()=>a++),as(1),pe(c=>a===s.size?N(t):nt))})}function FD(n){let e=n.children.map(t=>FD(t)).flat();return[n,...e]}function LL(n,e,t,r){let o=n.routeConfig,i=n._resolve;return o?.title!==void 0&&!_D(o)&&(i[fl]=o.title),UL(i,n,e,r).pipe(V(s=>(n._resolvedData=s,n.data=lf(n,n.parent,t).resolve,null)))}function UL(n,e,t,r){let o=yv(n);if(o.length===0)return N({});let i={};return Z(o).pipe(pe(s=>HL(n[s],e,t,r).pipe(er(),Ve(a=>{if(a instanceof Ks)throw uf(new qr,a);i[s]=a}))),as(1),V(()=>i),Bt(s=>ND(s)?nt:rs(s)))}function HL(n,e,t,r){let o=pl(e)??r,i=Qs(n,o),s=i.resolve?i.resolve(e,t):Et(o,()=>i(e,t));return Qr(s)}function gv(n){return Qe(e=>{let t=n(e);return t?Z(t).pipe(V(()=>e)):N(e)})}var xv=(()=>{class n{buildTitle(t){let r,o=t.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===$);return r}getResolvedTitleForRoute(t){return t.data[fl]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:()=>T(LD),providedIn:"root"})}return n})(),LD=(()=>{class n extends xv{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(R(tD))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wo=new D("",{providedIn:"root",factory:()=>({})}),Ys=new D(""),pf=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=T($S);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return N(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Qr(t.loadComponent()).pipe(V(HD),Ve(i=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=i}),Xn(()=>{this.componentLoaders.delete(t)})),o=new es(r,()=>new we).pipe(Xi());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return N({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=UD(r,this.compiler,t,this.onLoadEndListener).pipe(Xn(()=>{this.childrenLoaders.delete(r)})),s=new es(i,()=>new we).pipe(Xi());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UD(n,e,t,r){return Qr(n.loadChildren()).pipe(V(HD),pe(o=>o instanceof by||Array.isArray(o)?N(o):Z(e.compileModuleAsync(o))),V(o=>{r&&r(n);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(t).injector,s=i.get(Ys,[],{optional:!0,self:!0}).flat()),{routes:s.map(Pv),injector:i}}))}function BL(n){return n&&typeof n=="object"&&"default"in n}function HD(n){return BL(n)?n.default:n}var gf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:()=>T(jL),providedIn:"root"})}return n})(),jL=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fv=new D(""),Lv=new D("");function BD(n,e,t){let r=n.get(Lv),o=n.get(De);return n.get(ie).runOutsideAngular(()=>{if(!o.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let i,s=new Promise(l=>{i=l}),a=o.startViewTransition(()=>(i(),VL(n))),{onViewTransitionCreated:c}=r;return c&&Et(n,()=>c({transition:a,from:e,to:t})),s})}function VL(n){return new Promise(e=>{ly({read:()=>setTimeout(e)},{injector:n})})}var Uv=new D(""),mf=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new we;transitionAbortSubject=new we;configLoader=T(pf);environmentInjector=T(Je);destroyRef=T(Vr);urlSerializer=T(qo);rootContexts=T(Ko);location=T(nn);inputBindingEnabled=T(gl,{optional:!0})!==null;titleStrategy=T(xv);options=T(Wo,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=T(gf);createViewTransition=T(Fv,{optional:!0});navigationErrorHandler=T(Uv,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>N(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=o=>this.events.next(new ef(o)),r=o=>this.events.next(new tf(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(S(m({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new xe(null),this.transitions.pipe(We(r=>r!==null),Qe(r=>{let o=!1,i=!1;return N(r).pipe(Qe(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",At.SupersededByNewNavigation),nt;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?S(m({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload"){let l="";return this.events.next(new kn(s.id,this.urlSerializer.serialize(s.rawUrl),l,$s.IgnoredSameUrlNavigation)),s.resolve(!1),nt}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return N(s).pipe(Qe(l=>(this.events.next(new Kr(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?nt:Promise.resolve(l))),xL(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ve(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=S(m({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let u=new sl(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:u,source:h,restoredState:g,extras:f}=s,C=new Kr(l,this.urlSerializer.serialize(u),h,g);this.events.next(C);let I=AD(this.rootComponentType).snapshot;return this.currentTransition=r=S(m({},s),{targetSnapshot:I,urlAfterRedirects:u,extras:S(m({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,N(r)}else{let l="";return this.events.next(new kn(s.id,this.urlSerializer.serialize(s.extractedUrl),l,$s.IgnoredByUrlHandlingStrategy)),s.resolve(!1),nt}}),Ve(s=>{let a=new Yh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),V(s=>(this.currentTransition=r=S(m({},s),{guards:tL(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),hL(this.environmentInjector,s=>this.events.next(s)),Ve(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw uf(this.urlSerializer,s.guardsResult);let a=new Jh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),We(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",At.GuardRejected),!1)),gv(s=>{if(s.guards.canActivateChecks.length!==0)return N(s).pipe(Ve(a=>{let c=new Zh(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Qe(a=>{let c=!1;return N(a).pipe(FL(this.paramsInheritanceStrategy,this.environmentInjector),Ve({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",At.NoDataFromResolver)}}))}),Ve(a=>{let c=new Xh(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),gv(s=>{let a=c=>{let l=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(c.routeConfig).pipe(Ve(u=>{c.component=u}),V(()=>{})));for(let u of c.children)l.push(...a(u));return l};return hc(a(s.targetSnapshot.root)).pipe(Lr(null),gn(1))}),gv(()=>this.afterPreactivation()),Qe(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?Z(c).pipe(V(()=>r)):N(r)}),V(s=>{let a=YF(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=S(m({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Ve(()=>{this.events.next(new al)}),eL(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),gn(1),Ve({next:s=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new sn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{o=!0}}),fg(this.transitionAbortSubject.pipe(Ve(s=>{throw s}))),Xn(()=>{!o&&!i&&this.cancelNavigationTransition(r,"",At.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Bt(s=>{if(this.destroyed)return r.resolve(!1),nt;if(i=!0,kD(s))this.events.next(new Rn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),XF(s)?this.events.next(new qs(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new zs(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=Et(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Ks){let{message:l,cancellationCode:u}=uf(this.urlSerializer,c);this.events.next(new Rn(r.id,this.urlSerializer.serialize(r.extractedUrl),l,u)),this.events.next(new qs(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return nt}))}))}cancelNavigationTransition(t,r,o){let i=new Rn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(i),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $L(n){return n!==Kh}var jD=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:()=>T(zL),providedIn:"root"})}return n})(),hf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},zL=(()=>{class n extends hf{static \u0275fac=(()=>{let t;return function(o){return(t||(t=ey(n)))(o||n)}})();static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),VD=(()=>{class n{urlSerializer=T(qo);options=T(Wo,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=T(nn);urlHandlingStrategy=T(gf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Mn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:o}){let i=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=o??i;return s instanceof Mn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:o}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,o),this.routerState=t):this.rawUrlTree=o}routerState=AD(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:()=>T(GL),providedIn:"root"})}return n})(),GL=(()=>{class n extends VD{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Kr?this.updateStateMemento():t instanceof kn?this.commitTransition(r):t instanceof sl?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof al?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Rn&&(t.code===At.GuardRejected||t.code===At.NoDataFromResolver)?this.restoreHistory(r):t instanceof zs?this.restoreHistory(r,!0):t instanceof sn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:o}){let{replaceUrl:i,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||i){let a=this.browserPageId,c=m(m({},s),this.generateNgRouterState(o,a));this.location.replaceState(t,"",c)}else{let a=m(m({},s),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===t.finalUrl&&i===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(o){return(t||(t=ey(n)))(o||n)}})();static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yf(n,e){n.events.pipe(We(t=>t instanceof sn||t instanceof Rn||t instanceof zs||t instanceof kn),V(t=>t instanceof sn||t instanceof kn?0:(t instanceof Rn?t.code===At.Redirect||t.code===At.SupersededByNewNavigation:!1)?2:1),We(t=>t!==2),gn(1)).subscribe(()=>{e()})}var qL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},KL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Nn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=T(Ny);stateManager=T(VD);options=T(Wo,{optional:!0})||{};pendingTasks=T(sr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=T(mf);urlSerializer=T(qo);location=T(nn);urlHandlingStrategy=T(gf);_events=new we;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=T(jD);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=T(Ys,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!T(gl,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Te;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof Rn&&r.code!==At.Redirect&&r.code!==At.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof sn)this.navigated=!0;else if(r instanceof qs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c=m({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||$L(o.source)},s);this.scheduleNavigation(a,Kh,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}QL(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Kh,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,o)=>{this.navigateToSyncWithBrowser(t,o,r)})}navigateToSyncWithBrowser(t,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let c=m({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(i.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Pv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=m(m({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let g=o?o.snapshot:this.routerState.snapshot.root;h=ID(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return TD(h,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let o=Vs(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,Kh,null,r)}navigate(t,r={skipLocationChange:!1}){return WL(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let o;if(r===!0?o=m({},qL):r===!1?o=m({},KL):o=r,Vs(t))return nD(this.currentUrlTree,t,o);let i=this.parseUrl(t);return nD(this.currentUrlTree,i,o)}removeEmptyProps(t){return Object.entries(t).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(t,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((h,g)=>{a=h,c=g});let u=this.pendingTasks.add();return yf(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function WL(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new A(4008,!1)}function QL(n){return!(n instanceof al)&&!(n instanceof qs)}var yl=class{};var $D=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,o,i){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=i}setUpPreloading(){this.subscription=this.router.events.pipe(We(t=>t instanceof sn),Mt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let o=[];for(let i of r){i.providers&&!i._injector&&(i._injector=Oc(i.providers,t,`Route: ${i.path}`));let s=i._injector??t,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&i.canLoad===void 0||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return Z(o).pipe(is())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(t,r):o=N(null);let i=o.pipe(pe(s=>s===null?N(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Z([i,s]).pipe(is())}else return i})}static \u0275fac=function(r){return new(r||n)(R(Nn),R(Je),R(yl),R(pf))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zD=new D(""),YL=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,o,i,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Kr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof sn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof kn&&t.code===$s.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Gs&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Gs(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){tS()};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})();function JL(n){return n.routerState.root}function vl(n,e){return{\u0275kind:n,\u0275providers:e}}function ZL(){let n=T(qe);return e=>{let t=n.get(rr);if(e!==t.components[0])return;let r=n.get(Nn),o=n.get(GD);n.get(Bv)===1&&r.initialNavigation(),n.get(WD,null,G.Optional)?.setUpPreloading(),n.get(zD,null,G.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var GD=new D("",{factory:()=>new we}),Bv=new D("",{providedIn:"root",factory:()=>1});function qD(){let n=[{provide:Bv,useValue:0},xy(()=>{let e=T(qe);return e.get(zy,Promise.resolve()).then(()=>new Promise(r=>{let o=e.get(Nn),i=e.get(GD);yf(o,()=>{r(!0)}),e.get(mf).afterPreactivation=()=>(r(!0),i.closed?N(void 0):i),o.initialNavigation()}))})];return vl(2,n)}function KD(){let n=[xy(()=>{T(Nn).setUpLocationChangeListener()}),{provide:Bv,useValue:2}];return vl(3,n)}var WD=new D("");function QD(n){return vl(0,[{provide:WD,useExisting:$D},{provide:yl,useExisting:n}])}function YD(){return vl(8,[Nv,{provide:gl,useExisting:Nv}])}function JD(n){Rc("NgRouterViewTransitions");let e=[{provide:Fv,useValue:BD},{provide:Lv,useValue:m({skipNextTransition:!!n?.skipInitialTransition},n)}];return vl(9,e)}var ZD=[nn,{provide:qo,useClass:qr},Nn,Ko,{provide:Wr,useFactory:JL,deps:[Nn]},pf,[]],XL=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[ZD,[],{provide:Ys,multi:!0,useValue:t},[],r?.errorHandler?{provide:Uv,useValue:r.errorHandler}:[],{provide:Wo,useValue:r||{}},r?.useHash?tU():nU(),eU(),r?.preloadingStrategy?QD(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?rU(r):[],r?.bindToComponentInputs?YD().\u0275providers:[],r?.enableViewTransitions?JD().\u0275providers:[],oU()]}}static forChild(t){return{ngModule:n,providers:[{provide:Ys,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gt({type:n});static \u0275inj=zt({})}return n})();function eU(){return{provide:zD,useFactory:()=>{let n=T(RA),e=T(ie),t=T(Wo),r=T(mf),o=T(qo);return t.scrollOffset&&n.setOffset(t.scrollOffset),new YL(o,r,n,e,t)}}}function tU(){return{provide:fr,useClass:Jy}}function nU(){return{provide:fr,useClass:Eh}}function rU(n){return[n.initialNavigation==="disabled"?KD().\u0275providers:[],n.initialNavigation==="enabledBlocking"?qD().\u0275providers:[]]}var Hv=new D("");function oU(){return[{provide:Hv,useFactory:ZL},{provide:Fy,multi:!0,useExisting:Hv}]}var v={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},an={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},Kt={GET:"GET",POST:"POST"},xt=[v.OPENID_SCOPE,v.PROFILE_SCOPE,v.OFFLINE_ACCESS_SCOPE],jv=[...xt,v.EMAIL_SCOPE],be={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},vf={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},cn={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Js={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},Re={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"};var Cl={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},On={QUERY:"query",FRAGMENT:"fragment"},Vv={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},El={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},Zs={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},mr={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Me={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var Il="appmetadata",XD="client_info",Qo="1",Xs={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},st={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Ue={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},z={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},yr={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Cf={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},Ef={username:"username",password:"password"},Yo={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},If={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Pn={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},Tf={Jwt:"JWT",Jwk:"JWK",Pop:"pop"};var Tl=300;var Yr={};ft(Yr,{postRequestFailed:()=>Sl,unexpectedError:()=>wl});var wl="unexpected_error",Sl="post_request_failed";var wf={[wl]:"Unexpected error in authentication.",[Sl]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},e_={unexpectedError:{code:wl,desc:wf[wl]},postRequestFailed:{code:Sl,desc:wf[Sl]}},P=class n extends Error{constructor(e,t,r){let o=t?`${e}: ${t}`:e;super(o),Object.setPrototypeOf(this,n.prototype),this.errorCode=e||v.EMPTY_STRING,this.errorMessage=t||v.EMPTY_STRING,this.subError=r||v.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function ea(n,e){return new P(n,e?`${wf[n]} ${e}`:wf[n])}var He={};ft(He,{authTimeNotFound:()=>vr,authorizationCodeMissingFromServerResponse:()=>di,bindingKeyNotRemoved:()=>xl,cannotAppendScopeSet:()=>ci,cannotRemoveEmptyScope:()=>ai,clientInfoDecodingError:()=>Jr,clientInfoEmptyError:()=>Jo,deviceCodeExpired:()=>bl,deviceCodePollingCancelled:()=>_l,deviceCodeUnknownError:()=>Rl,emptyInputScopeSet:()=>eo,endSessionEndpointNotSupported:()=>hi,endpointResolutionError:()=>at,hashNotDeserialized:()=>ti,invalidAssertion:()=>Nl,invalidCacheEnvironment:()=>Er,invalidCacheRecord:()=>li,invalidClientCredential:()=>Ol,invalidState:()=>ln,keyIdMissing:()=>fi,maxAgeTranspired:()=>oi,methodNotImplemented:()=>B,missingTenantIdError:()=>Ul,multipleMatchingAccounts:()=>Dl,multipleMatchingAppMetadata:()=>ii,multipleMatchingTokens:()=>Al,nestedAppAuthBridgeDisabled:()=>Hl,networkError:()=>Xo,noAccountFound:()=>Ml,noAccountInSilentRequest:()=>Cr,noCryptoObject:()=>to,noNetworkConnectivity:()=>Fl,nonceMismatch:()=>ri,nullOrEmptyToken:()=>Zo,openIdConfigError:()=>ei,requestCannotBeMade:()=>si,stateMismatch:()=>ni,stateNotFound:()=>Xr,tokenClaimsCnfRequiredForSignedJwt:()=>ui,tokenParsingError:()=>Zr,tokenRefreshRequired:()=>Ir,unexpectedCredentialType:()=>kl,userCanceled:()=>Ll,userTimeoutReached:()=>Pl});var Jr="client_info_decoding_error",Jo="client_info_empty_error",Zr="token_parsing_error",Zo="null_or_empty_token",at="endpoints_resolution_error",Xo="network_error",ei="openid_config_error",ti="hash_not_deserialized",ln="invalid_state",ni="state_mismatch",Xr="state_not_found",ri="nonce_mismatch",vr="auth_time_not_found",oi="max_age_transpired",Al="multiple_matching_tokens",Dl="multiple_matching_accounts",ii="multiple_matching_appMetadata",si="request_cannot_be_made",ai="cannot_remove_empty_scope",ci="cannot_append_scopeset",eo="empty_input_scopeset",_l="device_code_polling_cancelled",bl="device_code_expired",Rl="device_code_unknown_error",Cr="no_account_in_silent_request",li="invalid_cache_record",Er="invalid_cache_environment",Ml="no_account_found",to="no_crypto_object",kl="unexpected_credential_type",Nl="invalid_assertion",Ol="invalid_client_credential",Ir="token_refresh_required",Pl="user_timeout_reached",ui="token_claims_cnf_required_for_signedjwt",di="authorization_code_missing_from_server_response",xl="binding_key_not_removed",hi="end_session_endpoint_not_supported",fi="key_id_missing",Fl="no_network_connectivity",Ll="user_canceled",Ul="missing_tenant_id_error",B="method_not_implemented",Hl="nested_app_auth_bridge_disabled";var H={[Jr]:"The client info could not be parsed/decoded correctly",[Jo]:"The client info was empty",[Zr]:"Token cannot be parsed",[Zo]:"The token is null or empty",[at]:"Endpoints cannot be resolved",[Xo]:"Network request failed",[ei]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[ti]:"The hash parameters could not be deserialized",[ln]:"State was not the expected format",[ni]:"State mismatch error",[Xr]:"State not found",[ri]:"Nonce mismatch error",[vr]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[oi]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[Al]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[Dl]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[ii]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[si]:"Token request cannot be made without authorization code or refresh token.",[ai]:"Cannot remove null or empty scope from ScopeSet",[ci]:"Cannot append ScopeSet",[eo]:"Empty input ScopeSet cannot be processed",[_l]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[bl]:"Device code is expired.",[Rl]:"Device code stopped polling for unknown reasons.",[Cr]:"Please pass an account object, silent flow is not supported without account information",[li]:"Cache record object was null or undefined.",[Er]:"Invalid environment when attempting to create cache entry",[Ml]:"No account found in cache for given key.",[to]:"No crypto object detected.",[kl]:"Unexpected credential type.",[Nl]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Ol]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Ir]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Pl]:"User defined timeout for device code polling reached",[ui]:"Cannot generate a POP jwt if the token_claims are not populated",[di]:"Server response does not contain an authorization code to proceed",[xl]:"Could not remove the credential's binding key from storage.",[hi]:"The provided authority does not support logout",[fi]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Fl]:"No network connectivity. Check your internet connection.",[Ll]:"User cancelled the flow.",[Ul]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[B]:"This method has not been implemented",[Hl]:"The nested app auth bridge is disabled"},t_={clientInfoDecodingError:{code:Jr,desc:H[Jr]},clientInfoEmptyError:{code:Jo,desc:H[Jo]},tokenParsingError:{code:Zr,desc:H[Zr]},nullOrEmptyToken:{code:Zo,desc:H[Zo]},endpointResolutionError:{code:at,desc:H[at]},networkError:{code:Xo,desc:H[Xo]},unableToGetOpenidConfigError:{code:ei,desc:H[ei]},hashNotDeserialized:{code:ti,desc:H[ti]},invalidStateError:{code:ln,desc:H[ln]},stateMismatchError:{code:ni,desc:H[ni]},stateNotFoundError:{code:Xr,desc:H[Xr]},nonceMismatchError:{code:ri,desc:H[ri]},authTimeNotFoundError:{code:vr,desc:H[vr]},maxAgeTranspired:{code:oi,desc:H[oi]},multipleMatchingTokens:{code:Al,desc:H[Al]},multipleMatchingAccounts:{code:Dl,desc:H[Dl]},multipleMatchingAppMetadata:{code:ii,desc:H[ii]},tokenRequestCannotBeMade:{code:si,desc:H[si]},removeEmptyScopeError:{code:ai,desc:H[ai]},appendScopeSetError:{code:ci,desc:H[ci]},emptyInputScopeSetError:{code:eo,desc:H[eo]},DeviceCodePollingCancelled:{code:_l,desc:H[_l]},DeviceCodeExpired:{code:bl,desc:H[bl]},DeviceCodeUnknownError:{code:Rl,desc:H[Rl]},NoAccountInSilentRequest:{code:Cr,desc:H[Cr]},invalidCacheRecord:{code:li,desc:H[li]},invalidCacheEnvironment:{code:Er,desc:H[Er]},noAccountFound:{code:Ml,desc:H[Ml]},noCryptoObj:{code:to,desc:H[to]},unexpectedCredentialType:{code:kl,desc:H[kl]},invalidAssertion:{code:Nl,desc:H[Nl]},invalidClientCredential:{code:Ol,desc:H[Ol]},tokenRefreshRequired:{code:Ir,desc:H[Ir]},userTimeoutReached:{code:Pl,desc:H[Pl]},tokenClaimsRequired:{code:ui,desc:H[ui]},noAuthorizationCodeFromServer:{code:di,desc:H[di]},bindingKeyNotRemovedError:{code:xl,desc:H[xl]},logoutNotSupported:{code:hi,desc:H[hi]},keyIdMissing:{code:fi,desc:H[fi]},noNetworkConnectivity:{code:Fl,desc:H[Fl]},userCanceledError:{code:Ll,desc:H[Ll]},missingTenantIdError:{code:Ul,desc:H[Ul]},nestedAppAuthBridgeDisabled:{code:Hl,desc:H[Hl]}},Bl=class n extends P{constructor(e,t){super(e,t?`${H[e]}: ${t}`:H[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,n.prototype)}};function E(n,e){return new Bl(n,e)}var no={createNewGuid:()=>{throw E(B)},base64Decode:()=>{throw E(B)},base64Encode:()=>{throw E(B)},base64UrlEncode:()=>{throw E(B)},encodeKid:()=>{throw E(B)},getPublicKeyThumbprint(){return p(this,null,function*(){throw E(B)})},removeTokenBindingKey(){return p(this,null,function*(){throw E(B)})},clearKeystore(){return p(this,null,function*(){throw E(B)})},signJwt(){return p(this,null,function*(){throw E(B)})},hashString(){return p(this,null,function*(){throw E(B)})}};var oe=function(n){return n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace",n}(oe||{}),ct=class n{constructor(e,t,r){this.level=oe.Info;let o=()=>{},i=e||n.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||o,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:oe.Info,this.correlationId=i.correlationId||v.EMPTY_STRING,this.packageName=t||v.EMPTY_STRING,this.packageVersion=r||v.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:oe.Info}}clone(e,t,r){return new n({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;let i=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${oe[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,i,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:oe.Error,containsPii:!1,correlationId:t||v.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:oe.Error,containsPii:!0,correlationId:t||v.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:oe.Warning,containsPii:!1,correlationId:t||v.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:oe.Warning,containsPii:!0,correlationId:t||v.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:oe.Info,containsPii:!1,correlationId:t||v.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:oe.Info,containsPii:!0,correlationId:t||v.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:oe.Verbose,containsPii:!1,correlationId:t||v.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:oe.Verbose,containsPii:!0,correlationId:t||v.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:oe.Trace,containsPii:!1,correlationId:t||v.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:oe.Trace,containsPii:!0,correlationId:t||v.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};var Sf="@azure/msal-common",ta="15.12.0";var ro={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};var lt={};ft(lt,{authorityMismatch:()=>Wl,authorityUriInsecure:()=>gi,cannotAllowPlatformBroker:()=>Kl,cannotSetOIDCOptions:()=>ql,claimsRequestParsingError:()=>jl,emptyInputScopesError:()=>yi,invalidAuthenticationHeader:()=>Gl,invalidAuthorityMetadata:()=>Ii,invalidAuthorizePostBodyParameters:()=>Yl,invalidClaims:()=>oo,invalidCloudDiscoveryMetadata:()=>io,invalidCodeChallengeMethod:()=>Vl,invalidRequestMethodForEAR:()=>Ql,logoutRequestEmpty:()=>Ci,missingNonceAuthenticationHeader:()=>zl,missingSshJwk:()=>Tr,missingSshKid:()=>$l,pkceParamsMissing:()=>Ei,redirectUriEmpty:()=>pi,tokenRequestEmpty:()=>vi,untrustedAuthority:()=>Ti,urlEmptyError:()=>mi,urlParseError:()=>xn});var pi="redirect_uri_empty",jl="claims_request_parsing_error",gi="authority_uri_insecure",xn="url_parse_error",mi="empty_url_error",yi="empty_input_scopes_error",oo="invalid_claims",vi="token_request_empty",Ci="logout_request_empty",Vl="invalid_code_challenge_method",Ei="pkce_params_missing",io="invalid_cloud_discovery_metadata",Ii="invalid_authority_metadata",Ti="untrusted_authority",Tr="missing_ssh_jwk",$l="missing_ssh_kid",zl="missing_nonce_authentication_header",Gl="invalid_authentication_header",ql="cannot_set_OIDCOptions",Kl="cannot_allow_platform_broker",Wl="authority_mismatch",Ql="invalid_request_method_for_EAR",Yl="invalid_authorize_post_body_parameters";var fe={[pi]:"A redirect URI is required for all calls, and none has been set.",[jl]:"Could not parse the given claims request object.",[gi]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[xn]:"URL could not be parsed into appropriate segments.",[mi]:"URL was empty or null.",[yi]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[oo]:"Given claims parameter must be a stringified JSON object.",[vi]:"Token request was empty and not found in cache.",[Ci]:"The logout request was null or undefined.",[Vl]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Ei]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[io]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Ii]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Ti]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Tr]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[$l]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[zl]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Gl]:"Invalid authentication header provided",[ql]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Kl]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[Wl]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[Yl]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[Ql]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."},n_={redirectUriNotSet:{code:pi,desc:fe[pi]},claimsRequestParsingError:{code:jl,desc:fe[jl]},authorityUriInsecure:{code:gi,desc:fe[gi]},urlParseError:{code:xn,desc:fe[xn]},urlEmptyError:{code:mi,desc:fe[mi]},emptyScopesError:{code:yi,desc:fe[yi]},invalidClaimsRequest:{code:oo,desc:fe[oo]},tokenRequestEmptyError:{code:vi,desc:fe[vi]},logoutRequestEmptyError:{code:Ci,desc:fe[Ci]},invalidCodeChallengeMethod:{code:Vl,desc:fe[Vl]},invalidCodeChallengeParams:{code:Ei,desc:fe[Ei]},invalidCloudDiscoveryMetadata:{code:io,desc:fe[io]},invalidAuthorityMetadata:{code:Ii,desc:fe[Ii]},untrustedAuthority:{code:Ti,desc:fe[Ti]},missingSshJwk:{code:Tr,desc:fe[Tr]},missingSshKid:{code:$l,desc:fe[$l]},missingNonceAuthenticationHeader:{code:zl,desc:fe[zl]},invalidAuthenticationHeader:{code:Gl,desc:fe[Gl]},cannotSetOIDCOptions:{code:ql,desc:fe[ql]},cannotAllowPlatformBroker:{code:Kl,desc:fe[Kl]},authorityMismatch:{code:Wl,desc:fe[Wl]},invalidAuthorizePostBodyParameters:{code:Yl,desc:fe[Yl]},invalidRequestMethodForEAR:{code:Ql,desc:fe[Ql]}},Jl=class n extends P{constructor(e){super(e,fe[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,n.prototype)}};function Q(n){return new Jl(n)}var le=class{static isEmptyObj(e){if(e)try{let t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){let t={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){let[s,a]=i.split(/=(.+)/g,2);s&&a&&(t[o(s)]=o(a))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}};var ve=class n{constructor(e){let t=e?le.trimArrayEntries([...e]):[],r=t?le.removeEmptyStringsFromArray(t):[];if(!r||!r.length)throw Q(yi);this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){let r=(e||v.EMPTY_STRING).split(" ");return new n(r)}static createSearchScopes(e){let t=e&&e.length>0?e:[...xt],r=new n(t);return r.containsOnlyOIDCScopes()?r.removeScope(v.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){let t=this.printScopesLowerCase().split(" "),r=new n(t);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return jv.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw E(ci)}}removeScope(e){if(!e)throw E(ai);this.scopes.delete(e.trim())}removeOIDCScopes(){jv.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw E(eo);let t=new Set;return e.scopes.forEach(r=>t.add(r.toLowerCase())),this.scopes.forEach(r=>t.add(r.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw E(eo);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let t=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return t.size<o+r}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):v.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};function $v(n,e){return!!n&&!!e&&n===e.split(".")[1]}function na(n,e,t,r){if(r){let{oid:o,sub:i,tid:s,name:a,tfp:c,acr:l,preferred_username:u,upn:h,login_hint:g}=r,f=s||c||l||"";return{tenantId:f,localAccountId:o||i||"",name:a,username:u||h||"",loginHint:g,isHomeTenant:$v(f,n)}}else return{tenantId:t,localAccountId:e,username:"",isHomeTenant:$v(t,n)}}function wi(n,e,t,r){let o=n;if(e){let i=e,{isHomeTenant:a}=i,c=pn(i,["isHomeTenant"]);o=m(m({},n),c)}if(t){let s=na(n.homeAccountId,n.localAccountId,n.tenantId,t),{isHomeTenant:a}=s,c=pn(s,["isHomeTenant"]);return o=S(m(m({},o),c),{idTokenClaims:t,idToken:r}),o}return o}var ra={};ft(ra,{checkMaxAge:()=>Zl,extractTokenClaims:()=>wr,getJWSPayload:()=>r_});function wr(n,e){let t=r_(n);try{let r=e(t);return JSON.parse(r)}catch{throw E(Zr)}}function r_(n){if(!n)throw E(Zo);let t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(n);if(!t||t.length<4)throw E(Zr);return t[2]}function Zl(n,e){if(e===0||Date.now()-3e5>n+e)throw E(oi)}var Ln={};ft(Ln,{getDeserializedResponse:()=>zv,mapToQueryString:()=>Fn,normalizeUrlForComparison:()=>aU,stripLeadingHashOrQuery:()=>i_});function o_(n){if(!n)return n;let e=n.toLowerCase();return le.endsWith(e,"?")?e=e.slice(0,-1):le.endsWith(e,"?/")&&(e=e.slice(0,-2)),le.endsWith(e,"/")||(e+="/"),e}function i_(n){return n.startsWith("#/")?n.substring(2):n.startsWith("#")||n.startsWith("?")?n.substring(1):n}function zv(n){if(!n||n.indexOf("=")<0)return null;try{let e=i_(n),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.ear_jwe||t.error||t.error_description||t.state)return t}catch{throw E(ti)}return null}function Fn(n,e=!0,t){let r=new Array;return n.forEach((o,i)=>{!e&&t&&i in t?r.push(`${i}=${o}`):r.push(`${i}=${encodeURIComponent(o)}`)}),r.join("&")}function aU(n){if(!n)return n;let e=n.split("#")[0];try{let t=new URL(e),r=t.origin+t.pathname+t.search;return o_(r)}catch{return o_(e)}}var j=class n{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Q(mi);e.includes("#")||(this._urlString=n.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return le.endsWith(t,"?")?t=t.slice(0,-1):le.endsWith(t,"?/")&&(t=t.slice(0,-2)),le.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw Q(xn)}if(!e.HostNameAndPort||!e.PathSegments)throw Q(xn);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw Q(gi)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return n.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let t=this.getUrlComponents(),r=t.PathSegments;return e&&r.length!==0&&(r[0]===cn.COMMON||r[0]===cn.ORGANIZATIONS)&&(r[0]=e),n.constructAuthorityUriFromObject(t)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw Q(xn);let r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){let t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw Q(xn);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===v.FORWARD_SLASH){let o=new n(t).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new n(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!zv(e)}};var a_={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Gv=a_.endpointMetadata,qv=a_.instanceDiscoveryMetadata,Kv=new Set;qv.metadata.forEach(n=>{n.aliases.forEach(e=>{Kv.add(e)})});function c_(n,e){let t,r=n.canonicalAuthority;if(r){let o=new j(r).getUrlComponents().HostNameAndPort;t=s_(o,n.cloudDiscoveryMetadata?.metadata,st.CONFIG,e)||s_(o,qv.metadata,st.HARDCODED_VALUES,e)||n.knownAuthorities}return t||[]}function s_(n,e,t,r){if(r?.trace(`getAliasesFromMetadata called with source: ${t}`),n&&e){let o=Xl(e,n);if(o)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),o.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function l_(n){return Xl(qv.metadata,n)}function Xl(n,e){for(let t=0;t<n.length;t++){let r=n[t];if(r.aliases.includes(e))return r}return null}var tu={};ft(tu,{cacheErrorUnknown:()=>eu,cacheQuotaExceeded:()=>Af});var Af="cache_quota_exceeded",eu="cache_error_unknown";var Wv={[Af]:"Exceeded cache storage capacity.",[eu]:"Unexpected error occurred when using cache storage."},so=class n extends P{constructor(e,t){let r=t||(Wv[e]?Wv[e]:Wv[eu]);super(`${e}: ${r}`),Object.setPrototypeOf(this,n.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}};function oa(n){return n instanceof Error?n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED"||n.message.includes("exceeded the quota")?new so(Af):new so(n.name,n.message):new so(eu)}var Si=class{constructor(e,t,r,o,i){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(Sf,ta),this.staticAuthorityOptions=i,this.performanceClient=o}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,t),t,e)}getAccountInfoFilteredBy(e,t){if(Object.keys(e).length===0||Object.values(e).every(o=>!o))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;let r=this.getAllAccounts(e,t);return r.length>1?r.sort(i=>i.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(e,t){let r=this.getAccountsFilteredBy(e,t);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,t,r){return e.flatMap(o=>this.getTenantProfilesFromAccountEntity(o,t,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,t,r,o,i){let s=null,a;if(i&&!this.tenantProfileMatchesFilter(r,i))return null;let c=this.getIdToken(e,o,t,r.tenantId);return c&&(a=wr(c.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,i))?null:(s=wi(e,r,a,c?.secret),s)}getTenantProfilesFromAccountEntity(e,t,r,o){let i=e.getAccountInfo(),s=i.tenantProfiles||new Map,a=this.getTokenKeys();if(r){let l=s.get(r);if(l)s=new Map([[r,l]]);else return[]}let c=[];return s.forEach(l=>{let u=this.getTenantedAccountInfoByFilter(i,a,l,t,o);u&&c.push(u)}),c}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}saveCacheRecord(e,t,r){return p(this,null,function*(){if(!e)throw E(li);try{e.account&&(yield this.setAccount(e.account,t)),e.idToken&&r?.idToken!==!1&&(yield this.setIdTokenCredential(e.idToken,t)),e.accessToken&&r?.accessToken!==!1&&(yield this.saveAccessToken(e.accessToken,t)),e.refreshToken&&r?.refreshToken!==!1&&(yield this.setRefreshTokenCredential(e.refreshToken,t)),e.appMetadata&&this.setAppMetadata(e.appMetadata,t)}catch(o){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),o instanceof P?o:oa(o)}})}saveAccessToken(e,t){return p(this,null,function*(){let r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},o=this.getTokenKeys(),i=ve.fromString(e.target);o.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,r,!1))return;let a=this.getAccessTokenCredential(s,t);a&&this.credentialMatchesFilter(a,r)&&ve.fromString(a.target).intersectingScopeSets(i)&&this.removeAccessToken(s,t)}),yield this.setAccessTokenCredential(e,t)})}getAccountsFilteredBy(e,t){let r=this.getAccountKeys(),o=[];return r.forEach(i=>{let s=this.getAccount(i,t);if(!s||e.homeAccountId&&!this.matchHomeAccountId(s,e.homeAccountId)||e.username&&!this.matchUsername(s.username,e.username)||e.environment&&!this.matchEnvironment(s,e.environment)||e.realm&&!this.matchRealm(s,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(s,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(s,e.authorityType))return;let a={localAccountId:e?.localAccountId,name:e?.name},c=s.tenantProfiles?.filter(l=>this.tenantProfileMatchesFilter(l,a));c&&c.length===0||o.push(s)}),o}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===Me.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===z.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){let t=this.getKeys(),r={};return t.forEach(o=>{if(!this.isAppMetadata(o))return;let i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){let t=this.getAuthorityMetadataKeys(),r=null;return t.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;let i=this.getAuthorityMetadata(o);i&&i.aliases.indexOf(e)!==-1&&(r=i)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(r=>{this.removeAccount(r,e)})}removeAccount(e,t){this.removeAccountContext(e,t);let r=this.getAccountKeys(),o=i=>i.includes(e.homeAccountId)&&i.includes(e.environment);r.filter(o).forEach(i=>{this.removeItem(i,t),this.performanceClient.incrementFields({accountsRemoved:1},t)})}removeAccountContext(e,t){let r=this.getTokenKeys(),o=i=>i.includes(e.homeAccountId)&&i.includes(e.environment);r.idToken.filter(o).forEach(i=>{this.removeIdToken(i,t)}),r.accessToken.filter(o).forEach(i=>{this.removeAccessToken(i,t)}),r.refreshToken.filter(o).forEach(i=>{this.removeRefreshToken(i,t)})}removeAccessToken(e,t){let r=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),this.performanceClient.incrementFields({accessTokensRemoved:1},t),!r||r.credentialType.toLowerCase()!==Me.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==z.POP)return;let o=r.keyId;o&&this.cryptoImpl.removeTokenBindingKey(o).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${o}`,t),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},t)})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}getIdToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");let s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Me.ID_TOKEN,clientId:this.clientId,realm:o},a=this.getIdTokensByFilter(s,t,r),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!o){let u=new Map;a.forEach((g,f)=>{g.realm===e.tenantId&&u.set(f,g)});let h=u.size;if(h<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(h===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,h)=>{this.removeIdToken(h,t)}),i&&t&&i.addFields({multiMatchedID:a.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t,r){let o=r&&r.idToken||this.getTokenKeys().idToken,i=new Map;return o.forEach(s=>{if(!this.idTokenKeyMatchesFilter(s,m({clientId:this.clientId},e)))return;let a=this.getIdTokenCredential(s,t);a&&this.credentialMatchesFilter(a,e)&&i.set(s,a)}),i}idTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return!(t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,r,o){let i=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",i);let s=ve.createSearchScopes(t.scopes),a=t.authenticationScheme||z.BEARER,c=a&&a.toLowerCase()!==z.BEARER.toLowerCase()?Me.ACCESS_TOKEN_WITH_AUTH_SCHEME:Me.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:o||e.tenantId,target:s,tokenType:a,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},u=r&&r.accessToken||this.getTokenKeys().accessToken,h=[];u.forEach(f=>{if(this.accessTokenKeyMatchesFilter(f,l,!0)){let C=this.getAccessTokenCredential(f,i);C&&this.credentialMatchesFilter(C,l)&&h.push(C)}});let g=h.length;return g<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",i),null):g>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",i),h.forEach(f=>{this.removeAccessToken(this.generateCredentialKey(f),i)}),this.performanceClient.addFields({multiMatchedAT:h.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",i),h[0])}accessTokenKeyMatchesFilter(e,t,r){let o=e.toLowerCase();if(t.clientId&&o.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&o.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&o.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&o.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){let i=t.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,t){let r=this.getTokenKeys(),o=[];return r.accessToken.forEach(i=>{if(!this.accessTokenKeyMatchesFilter(i,e,!0))return;let s=this.getAccessTokenCredential(i,t);s&&this.credentialMatchesFilter(s,e)&&o.push(s)}),o}getRefreshToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");let s=t?Qo:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Me.REFRESH_TOKEN,clientId:this.clientId,familyId:s},c=o&&o.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(h=>{if(this.refreshTokenKeyMatchesFilter(h,a)){let g=this.getRefreshTokenCredential(h,r);g&&this.credentialMatchesFilter(g,a)&&l.push(g)}});let u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&i&&r&&i.addFields({multiMatchedRT:u},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return!(t.familyId&&r.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw E(ii);return o[0]}isAppMetadataFOCI(e){let t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===Qo)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){let r=e.oid||e.sub;return t===r}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!!(e&&typeof e=="string"&&t?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){let o=c_(this.staticAuthorityOptions,this.commonLogger);if(o.includes(t)&&o.includes(e.environment))return!0}let r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==Me.ACCESS_TOKEN&&e.credentialType!==Me.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:ve.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(Il)!==-1}isAuthorityMetadata(e){return e.indexOf(Xs.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${Xs.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(let r in t)e[r]=t[r];return e}},nu=class extends Si{setAccount(){return p(this,null,function*(){throw E(B)})}getAccount(){throw E(B)}setIdTokenCredential(){return p(this,null,function*(){throw E(B)})}getIdTokenCredential(){throw E(B)}setAccessTokenCredential(){return p(this,null,function*(){throw E(B)})}getAccessTokenCredential(){throw E(B)}setRefreshTokenCredential(){return p(this,null,function*(){throw E(B)})}getRefreshTokenCredential(){throw E(B)}setAppMetadata(){throw E(B)}getAppMetadata(){throw E(B)}setServerTelemetry(){throw E(B)}getServerTelemetry(){throw E(B)}setAuthorityMetadata(){throw E(B)}getAuthorityMetadata(){throw E(B)}getAuthorityMetadataKeys(){throw E(B)}setThrottlingCache(){throw E(B)}getThrottlingCache(){throw E(B)}removeItem(){throw E(B)}getKeys(){throw E(B)}getAccountKeys(){throw E(B)}getTokenKeys(){throw E(B)}generateCredentialKey(){throw E(B)}generateAccountKey(){throw E(B)}};var he={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};var d={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},T8=new Map([[d.AcquireTokenByCode,"ATByCode"],[d.AcquireTokenByRefreshToken,"ATByRT"],[d.AcquireTokenSilent,"ATS"],[d.AcquireTokenSilentAsync,"ATSAsync"],[d.AcquireTokenPopup,"ATPopup"],[d.AcquireTokenRedirect,"ATRedirect"],[d.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[d.CryptoOptsSignJwt,"CryptoSignJwt"],[d.SilentCacheClientAcquireToken,"SltCacheClientAT"],[d.SilentIframeClientAcquireToken,"SltIframeClientAT"],[d.SilentRefreshClientAcquireToken,"SltRClientAT"],[d.SsoSilent,"SsoSlt"],[d.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[d.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[d.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[d.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[d.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[d.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[d.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[d.BrokerHandhshake,"BrokerHandshake"],[d.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[d.AcquireTokenByBroker,"ATByBroker"],[d.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[d.RefreshTokenClientAcquireToken,"RTClientAT"],[d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[d.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[d.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[d.AcquireTokenFromCache,"ATFromCache"],[d.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[d.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[d.AcquireTokenBySilentIframe,"ATBySltIframe"],[d.InitializeBaseRequest,"InitBaseReq"],[d.InitializeSilentRequest,"InitSltReq"],[d.InitializeClientApplication,"InitClientApplication"],[d.InitializeCache,"InitCache"],[d.ImportExistingCache,"importCache"],[d.SetUserData,"setUserData"],[d.LocalStorageUpdated,"localStorageUpdated"],[d.SilentIframeClientTokenHelper,"SIClientTHelper"],[d.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[d.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[d.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[d.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[d.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[d.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[d.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[d.GetAuthCodeUrl,"GetAuthCodeUrl"],[d.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[d.HandleCodeResponse,"HandleCodeResp"],[d.HandleResponseEar,"HandleRespEar"],[d.HandleResponseCode,"HandleRespCode"],[d.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[d.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[d.AuthClientAcquireToken,"AuthClientAT"],[d.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[d.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[d.PopTokenGenerateCnf,"PopTGenCnf"],[d.PopTokenGenerateKid,"PopTGenKid"],[d.HandleServerTokenResponse,"HandleServerTRes"],[d.DeserializeResponse,"DeserializeRes"],[d.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[d.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[d.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[d.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[d.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[d.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[d.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[d.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[d.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[d.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[d.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[d.AcquireTokenByCodeAsync,"ATByCodeAsync"],[d.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[d.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[d.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[d.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[d.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[d.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[d.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[d.NativeGenerateAuthResult,"NtvGenAuthRes"],[d.RemoveHiddenIframe,"RemoveHiddenIframe"],[d.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[d.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[d.GeneratePkceCodes,"GenPkceCodes"],[d.GenerateCodeVerifier,"GenCodeVerifier"],[d.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[d.Sha256Digest,"Sha256Digest"],[d.GetRandomValues,"GetRandomValues"],[d.GenerateHKDF,"genHKDF"],[d.GenerateBaseKey,"genBaseKey"],[d.Base64Decode,"b64Decode"],[d.UrlEncodeArr,"urlEncArr"],[d.Encrypt,"encrypt"],[d.Decrypt,"decrypt"],[d.GenerateEarKey,"genEarKey"],[d.DecryptEarResponse,"decryptEarResp"]]),Qv={NotStarted:0,InProgress:1,Completed:2};var Df=class{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},Sr=class{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:Qv.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new Df}}startPerformanceMeasurement(){return new Df}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var _f={tokenRenewalOffsetSeconds:Tl,preventCorsPreflight:!1},cU={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:oe.Info,correlationId:v.EMPTY_STRING},lU={claimsBasedCachingEnabled:!1},uU={sendGetRequestAsync(){return p(this,null,function*(){throw E(B)})},sendPostRequestAsync(){return p(this,null,function*(){throw E(B)})}},dU={sku:v.SKU,version:ta,cpu:v.EMPTY_STRING,os:v.EMPTY_STRING},hU={clientSecret:v.EMPTY_STRING,clientAssertion:void 0},fU={azureCloudInstance:ro.None,tenant:`${v.DEFAULT_COMMON_TENANT}`},pU={application:{appName:"",appVersion:""}};function u_({authOptions:n,systemOptions:e,loggerOptions:t,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:h,serializableCache:g}){let f=m(m({},cU),t);return{authOptions:gU(n),systemOptions:m(m({},_f),e),loggerOptions:f,cacheOptions:m(m({},lU),r),storageInterface:o||new nu(n.clientId,no,new ct(f),new Sr),networkInterface:i||uU,cryptoInterface:s||no,clientCredentials:a||hU,libraryInfo:m(m({},dU),c),telemetry:m(m({},pU),l),serverTelemetryManager:u||null,persistencePlugin:h||null,serializableCache:g||null}}function gU(n){return m({clientCapabilities:[],azureCloudOptions:fU,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1},n)}function bf(n){return n.authOptions.authority.options.protocolMode===he.OIDC}var et={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};function ia(n,e){if(!n)throw E(Jo);try{let t=e(n);return JSON.parse(t)}catch{throw E(Jr)}}function Un(n){if(!n)throw E(Jr);let e=n.split(mr.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?v.EMPTY_STRING:e[1]}}var $e={};ft($e,{addApplicationTelemetry:()=>iu,addAuthorizationCode:()=>BC,addBrokerParameters:()=>br,addCcsOid:()=>Dr,addCcsUpn:()=>ao,addClaims:()=>Ri,addClientAssertion:()=>cu,addClientAssertionType:()=>lu,addClientCapabilitiesToClaims:()=>d_,addClientId:()=>_i,addClientInfo:()=>ki,addClientSecret:()=>au,addCodeChallengeParams:()=>MU,addCodeVerifier:()=>VC,addCorrelationId:()=>Mi,addDeviceCode:()=>kU,addDomainHint:()=>LC,addEARParameters:()=>FU,addExtraQueryParameters:()=>_r,addGrantType:()=>uu,addIdTokenHint:()=>FC,addInstanceAware:()=>du,addLibraryInfo:()=>ou,addLoginHint:()=>aa,addLogoutHint:()=>$C,addNativeBroker:()=>RU,addNonce:()=>HC,addOboAssertion:()=>NU,addPassword:()=>xU,addPopToken:()=>hu,addPostBodyParameters:()=>LU,addPostLogoutRedirectUri:()=>xC,addPrompt:()=>UC,addRedirectUri:()=>bi,addRefreshToken:()=>jC,addRequestTokenUse:()=>OU,addResponseMode:()=>PC,addResponseType:()=>bU,addScopes:()=>Di,addServerTelemetry:()=>pu,addSid:()=>Pf,addSshJwk:()=>fu,addState:()=>su,addThrottling:()=>gu,addUsername:()=>PU,instrumentBrokerParams:()=>Ai});var Ar={};ft(Ar,{ACCESS_TOKEN:()=>vU,BROKER_CLIENT_ID:()=>ru,BROKER_REDIRECT_URI:()=>Of,CCS_HEADER:()=>DU,CLAIMS:()=>Xv,CLIENT_ASSERTION:()=>wC,CLIENT_ASSERTION_TYPE:()=>SC,CLIENT_ID:()=>Hn,CLIENT_INFO:()=>wU,CLIENT_REQUEST_ID:()=>lC,CLIENT_SECRET:()=>TC,CODE:()=>iC,CODE_CHALLENGE:()=>sC,CODE_CHALLENGE_METHOD:()=>aC,CODE_VERIFIER:()=>cC,DEVICE_CODE:()=>IC,DOMAIN_HINT:()=>kC,EAR_JWE_CRYPTO:()=>OC,EAR_JWK:()=>NC,ERROR:()=>mU,ERROR_DESCRIPTION:()=>yU,EXPIRES_IN:()=>EU,FOCI:()=>AU,GRANT_TYPE:()=>Zv,ID_TOKEN:()=>CU,ID_TOKEN_HINT:()=>EC,INSTANCE_AWARE:()=>sa,LOGIN_HINT:()=>MC,LOGOUT_HINT:()=>bC,NATIVE_BROKER:()=>_C,NONCE:()=>rC,OBO_ASSERTION:()=>AC,ON_BEHALF_OF:()=>SU,POST_LOGOUT_URI:()=>CC,PROMPT:()=>oC,REDIRECT_URI:()=>Rf,REFRESH_TOKEN:()=>tC,REFRESH_TOKEN_EXPIRES_IN:()=>IU,REQUESTED_TOKEN_USE:()=>DC,REQ_CNF:()=>kf,RESPONSE_MODE:()=>Jv,RESPONSE_TYPE:()=>Yv,RETURN_SPA_CODE:()=>Nf,SCOPE:()=>eC,SESSION_STATE:()=>TU,SID:()=>RC,STATE:()=>nC,TOKEN_TYPE:()=>Mf,X_APP_NAME:()=>yC,X_APP_VER:()=>vC,X_CLIENT_CPU:()=>fC,X_CLIENT_CURR_TELEM:()=>pC,X_CLIENT_EXTRA_SKU:()=>_U,X_CLIENT_LAST_TELEM:()=>gC,X_CLIENT_OS:()=>hC,X_CLIENT_SKU:()=>uC,X_CLIENT_VER:()=>dC,X_MS_LIB_CAPABILITY:()=>mC});var Hn="client_id",Rf="redirect_uri",Yv="response_type",Jv="response_mode",Zv="grant_type",Xv="claims",eC="scope",mU="error",yU="error_description",vU="access_token",CU="id_token",tC="refresh_token",EU="expires_in",IU="refresh_token_expires_in",nC="state",rC="nonce",oC="prompt",TU="session_state",wU="client_info",iC="code",sC="code_challenge",aC="code_challenge_method",cC="code_verifier",lC="client-request-id",uC="x-client-SKU",dC="x-client-VER",hC="x-client-OS",fC="x-client-CPU",pC="x-client-current-telemetry",gC="x-client-last-telemetry",mC="x-ms-lib-capability",yC="x-app-name",vC="x-app-ver",CC="post_logout_redirect_uri",EC="id_token_hint",IC="device_code",TC="client_secret",wC="client_assertion",SC="client_assertion_type",Mf="token_type",kf="req_cnf",AC="assertion",DC="requested_token_use",SU="on_behalf_of",AU="foci",DU="X-AnchorMailbox",Nf="return_spa_code",_C="nativebroker",bC="logout_hint",RC="sid",MC="login_hint",kC="domain_hint",_U="x-client-xtra-sku",ru="brk_client_id",Of="brk_redirect_uri",sa="instance_aware",NC="ear_jwk",OC="ear_jwe_crypto";function Ai(n,e,t){if(!e)return;let r=n.get(Hn);r&&n.has(ru)&&t?.addFields({embeddedClientId:r,embeddedRedirectUri:n.get(Rf)},e)}function bU(n,e){n.set(Yv,e)}function PC(n,e){n.set(Jv,e||Vv.QUERY)}function RU(n){n.set(_C,"1")}function Di(n,e,t=!0,r=xt){t&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");let o=t?[...e||[],...r]:e||[],i=new ve(o);n.set(eC,i.printScopes())}function _i(n,e){n.set(Hn,e)}function bi(n,e){n.set(Rf,e)}function xC(n,e){n.set(CC,e)}function FC(n,e){n.set(EC,e)}function LC(n,e){n.set(kC,e)}function aa(n,e){n.set(MC,e)}function ao(n,e){n.set(be.CCS_HEADER,`UPN:${e}`)}function Dr(n,e){n.set(be.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function Pf(n,e){n.set(RC,e)}function Ri(n,e,t){let r=d_(e,t);try{JSON.parse(r)}catch{throw Q(oo)}n.set(Xv,r)}function Mi(n,e){n.set(lC,e)}function ou(n,e){n.set(uC,e.sku),n.set(dC,e.version),e.os&&n.set(hC,e.os),e.cpu&&n.set(fC,e.cpu)}function iu(n,e){e?.appName&&n.set(yC,e.appName),e?.appVersion&&n.set(vC,e.appVersion)}function UC(n,e){n.set(oC,e)}function su(n,e){e&&n.set(nC,e)}function HC(n,e){n.set(rC,e)}function MU(n,e,t){if(e&&t)n.set(sC,e),n.set(aC,t);else throw Q(Ei)}function BC(n,e){n.set(iC,e)}function kU(n,e){n.set(IC,e)}function jC(n,e){n.set(tC,e)}function VC(n,e){n.set(cC,e)}function au(n,e){n.set(TC,e)}function cu(n,e){e&&n.set(wC,e)}function lu(n,e){e&&n.set(SC,e)}function NU(n,e){n.set(AC,e)}function OU(n,e){n.set(DC,e)}function uu(n,e){n.set(Zv,e)}function ki(n){n.set(XD,"1")}function du(n){n.has(sa)||n.set(sa,"true")}function _r(n,e){Object.entries(e).forEach(([t,r])=>{!n.has(t)&&r&&n.set(t,r)})}function d_(n,e){let t;if(!n)t={};else try{t=JSON.parse(n)}catch{throw Q(oo)}return e&&e.length>0&&(t.hasOwnProperty(Js.ACCESS_TOKEN)||(t[Js.ACCESS_TOKEN]={}),t[Js.ACCESS_TOKEN][Js.XMS_CC]={values:e}),JSON.stringify(t)}function PU(n,e){n.set(Ef.username,e)}function xU(n,e){n.set(Ef.password,e)}function hu(n,e){e&&(n.set(Mf,z.POP),n.set(kf,e))}function fu(n,e){e&&(n.set(Mf,z.SSH),n.set(kf,e))}function pu(n,e){n.set(pC,e.generateCurrentRequestHeaderValue()),n.set(gC,e.generateLastRequestHeaderValue())}function gu(n){n.set(mC,yr.X_MS_LIB_CAPABILITY_VALUE)}function $C(n,e){n.set(bC,e)}function br(n,e,t){n.has(ru)||n.set(ru,e),n.has(Of)||n.set(Of,t)}function FU(n,e){n.set(NC,encodeURIComponent(e)),n.set(OC,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function LU(n,e){Object.entries(e).forEach(([t,r])=>{r&&n.set(t,r)})}var Hf={};ft(Hf,{createDiscoveredInstance:()=>QC});var ut={Default:0,Adfs:1,Dsts:2,Ciam:3};function h_(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}function f_(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}function p_(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}var Ce=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);let s=r?.startMeasurement(e,o);if(o){let a=e+"CallCount";r?.incrementFields({[a]:1},o)}try{let a=n(...i);return s?.end({success:!0}),t.trace(`Returning result from ${e}`),a}catch(a){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a}},y=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);let s=r?.startMeasurement(e,o);if(o){let a=e+"CallCount";r?.incrementFields({[a]:1},o)}return r?.setPreQueueTime(e,o),n(...i).then(a=>(t.trace(`Returning result from ${e}`),s?.end({success:!0}),a)).catch(a=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a})};var g_=(()=>{class n{constructor(t,r,o,i){this.networkInterface=t,this.logger=r,this.performanceClient=o,this.correlationId=i}detectRegion(t,r){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RegionDiscoveryDetectRegion,this.correlationId);let o=t;if(o)r.region_source=Yo.ENVIRONMENT_VARIABLE;else{let i=n.IMDS_OPTIONS;try{let s=yield y(this.getRegionFromIMDS.bind(this),d.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(v.IMDS_VERSION,i);if(s.status===an.SUCCESS&&(o=s.body,r.region_source=Yo.IMDS),s.status===an.BAD_REQUEST){let a=yield y(this.getCurrentVersion.bind(this),d.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return r.region_source=Yo.FAILED_AUTO_DETECTION,null;let c=yield y(this.getRegionFromIMDS.bind(this),d.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===an.SUCCESS&&(o=c.body,r.region_source=Yo.IMDS)}}catch{return r.region_source=Yo.FAILED_AUTO_DETECTION,null}}return o||(r.region_source=Yo.FAILED_AUTO_DETECTION),o||null})}getRegionFromIMDS(t,r){return p(this,null,function*(){return this.performanceClient?.addQueueMeasurement(d.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${v.IMDS_ENDPOINT}?api-version=${t}&format=text`,r,v.IMDS_TIMEOUT)})}getCurrentVersion(t){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=yield this.networkInterface.sendGetRequestAsync(`${v.IMDS_ENDPOINT}?format=json`,t);return r.status===an.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}})}}return n.IMDS_OPTIONS={headers:{Metadata:"true"}},n})();var _e={};ft(_e,{createAccessTokenEntity:()=>qC,createIdTokenEntity:()=>GC,createRefreshTokenEntity:()=>KC,generateAppMetadataKey:()=>qU,generateAuthorityMetadataExpiresAt:()=>Ff,isAccessTokenEntity:()=>jU,isAppMetadataEntity:()=>KU,isAuthorityMetadataEntity:()=>WU,isAuthorityMetadataExpired:()=>Lf,isCredentialEntity:()=>xf,isIdTokenEntity:()=>VU,isRefreshTokenEntity:()=>$U,isServerTelemetryEntity:()=>zU,isThrottlingEntity:()=>GU,updateAuthorityEndpointMetadata:()=>la,updateCloudDiscoveryMetadata:()=>yu});var Be={};ft(Be,{delay:()=>BU,isCacheExpired:()=>HU,isTokenExpired:()=>ca,nowSeconds:()=>Ft,toDateFromSeconds:()=>mu,toSecondsFromDate:()=>UU,wasClockTurnedBack:()=>zC});function Ft(){return Math.round(new Date().getTime()/1e3)}function UU(n){return n.getTime()/1e3}function mu(n){return n?new Date(Number(n)*1e3):new Date}function ca(n,e){let t=Number(n)||0;return Ft()+e>t}function HU(n,e){let t=Number(n)+e*24*60*60*1e3;return Date.now()>t}function zC(n){return Number(n)>Ft()}function BU(n,e){return new Promise(t=>setTimeout(()=>t(e),n))}function GC(n,e,t,r,o){return{credentialType:Me.ID_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,realm:o,lastUpdatedAt:Date.now().toString()}}function qC(n,e,t,r,o,i,s,a,c,l,u,h,g,f,C){let I={homeAccountId:n,credentialType:Me.ACCESS_TOKEN,secret:t,cachedAt:Ft().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:u||z.BEARER,lastUpdatedAt:Date.now().toString()};if(h&&(I.userAssertionHash=h),l&&(I.refreshOn=l.toString()),f&&(I.requestedClaims=f,I.requestedClaimsHash=C),I.tokenType?.toLowerCase()!==z.BEARER.toLowerCase())switch(I.credentialType=Me.ACCESS_TOKEN_WITH_AUTH_SCHEME,I.tokenType){case z.POP:let _=wr(t,c);if(!_?.cnf?.kid)throw E(ui);I.keyId=_.cnf.kid;break;case z.SSH:I.keyId=g}return I}function KC(n,e,t,r,o,i,s){let a={credentialType:Me.REFRESH_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,lastUpdatedAt:Date.now().toString()};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function xf(n){return n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")}function jU(n){return n?xf(n)&&n.hasOwnProperty("realm")&&n.hasOwnProperty("target")&&(n.credentialType===Me.ACCESS_TOKEN||n.credentialType===Me.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function VU(n){return n?xf(n)&&n.hasOwnProperty("realm")&&n.credentialType===Me.ID_TOKEN:!1}function $U(n){return n?xf(n)&&n.credentialType===Me.REFRESH_TOKEN:!1}function zU(n,e){let t=n.indexOf(Ue.CACHE_KEY)===0,r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&r}function GU(n,e){let t=!1;n&&(t=n.indexOf(yr.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),t&&r}function qU({environment:n,clientId:e}){return[Il,n,e].join(mr.CACHE_KEY_SEPARATOR).toLowerCase()}function KU(n,e){return e?n.indexOf(Il)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function WU(n,e){return e?n.indexOf(Xs.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function Ff(){return Ft()+Xs.REFRESH_TIME_SECONDS}function la(n,e,t){n.authorization_endpoint=e.authorization_endpoint,n.token_endpoint=e.token_endpoint,n.end_session_endpoint=e.end_session_endpoint,n.issuer=e.issuer,n.endpointsFromNetwork=t,n.jwks_uri=e.jwks_uri}function yu(n,e,t){n.aliases=e.aliases,n.preferred_cache=e.preferred_cache,n.preferred_network=e.preferred_network,n.aliasesFromNetwork=t}function Lf(n){return n.expiresAt<=Ft()}var Wt=class n{constructor(e,t,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new g_(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(v.CIAM_AUTH_URL))return ut.Ciam;let t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case v.ADFS:return ut.Adfs;case v.DSTS:return ut.Dsts}return ut.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new j(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw E(at)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw E(at)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw E(at)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw E(hi);return this.replacePath(this.metadata.end_session_endpoint)}else throw E(at)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw E(at)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw E(at)}canReplaceTenant(e){return e.PathSegments.length===1&&!n.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===ut.Default&&this.protocolMode!==he.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e,o=new j(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=i[c];if(c===0&&this.canReplaceTenant(o)){let u=new j(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(t=t.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===ut.Adfs||this.protocolMode===he.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),t=yield y(this.updateCloudDiscoveryMetadata.bind(this),d.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let r=yield y(this.updateEndpointMetadata.bind(this),d.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)})}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Ff(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==st.CACHE&&r?.source!==st.CACHE&&(e.expiresAt=Ff(),e.canonical_authority=this.canonicalAuthority);let o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}updateEndpointMetadata(e){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityUpdateEndpointMetadata,this.correlationId);let t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===st.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata){let o=yield y(this.updateMetadataWithRegionalInformation.bind(this),d.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);la(e,o,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let r=yield y(this.getEndpointMetadataFromNetwork.bind(this),d.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=yield y(this.updateMetadataWithRegionalInformation.bind(this),d.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),la(e,r,!0),st.NETWORK;throw E(ei,this.defaultOpenIdConfigurationEndpoint)})}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),la(e,t,!1),{source:st.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let o=this.getEndpointMetadataFromHardcodedValues();if(o)return la(e,o,!1),{source:st.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let r=Lf(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:st.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new j(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Q(Ii)}return null}getEndpointMetadataFromNetwork(){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{let r=yield this.networkInterface.sendGetRequestAsync(t,e);return h_(r.body)?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${r}`),null}})}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Gv?Gv[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(e){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==v.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=If.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,n.replaceWithRegionalInformation(e,t);let r=yield y(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),d.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=If.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,n.replaceWithRegionalInformation(e,r);this.regionDiscoveryMetadata.region_outcome=If.AUTO_DETECTION_REQUESTED_FAILED}return e})}updateCloudDiscoveryMetadata(e){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;let r=yield y(this.getCloudDiscoveryMetadataFromNetwork.bind(this),d.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return yu(e,r,!0),st.NETWORK;throw Q(Ti)})}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||v.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||v.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||v.NOT_APPLICABLE}`);let t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),yu(e,t,!1),st.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let o=l_(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),yu(e,o,!1),st.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let r=Lf(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),st.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===ut.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=Xl(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Q(io)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${v.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={},r=null;try{let o=yield this.networkInterface.sendGetRequestAsync(e,t),i,s;if(f_(o.body))i=o.body,s=i.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${i.tenant_discovery_endpoint}`);else if(p_(o.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${o.status}`),i=o.body,i.error===v.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${i.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${i.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),s=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Xl(s,this.hostnameAndPort)}catch(o){if(o instanceof P)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${o.errorCode}
Error Description: ${o.errorMessage}`);else{let i=o;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${i.name}
Error Description: ${i.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r})}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&j.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==ro.None){let o=t.tenant?t.tenant:v.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${o}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return v.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw E(at)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Kv.has(e)}static isPublicCloudAuthority(e){return v.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){let o=new j(e);o.validateAsUri();let i=o.getUrlComponents(),s=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${t}.${v.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=j.constructAuthorityUriFromObject(S(m({},o.getUrlComponents()),{HostNameAndPort:s})).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,t){let r=m({},e);return r.authorization_endpoint=n.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=n.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=n.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e,o=new j(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(v.CIAM_AUTH_URL)){let i=o.HostNameAndPort.split(".")[0];t=`${t}${i}${v.AAD_TENANT_DOMAIN_SUFFIX}`}return t}};Wt.reservedTenantDomains=new Set(["{tenant}","{tenantid}",cn.COMMON,cn.CONSUMERS,cn.ORGANIZATIONS]);function m_(n){let r=new j(n).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case cn.COMMON:case cn.ORGANIZATIONS:case cn.CONSUMERS:return;default:return r}}function Uf(n){return n.endsWith(v.FORWARD_SLASH)?n:`${n}${v.FORWARD_SLASH}`}function WC(n){let e=n.cloudDiscoveryMetadata,t;if(e)try{t=JSON.parse(e)}catch{throw Q(io)}return{canonicalAuthority:n.authority?Uf(n.authority):void 0,knownAuthorities:n.knownAuthorities,cloudDiscoveryMetadata:t}}function QC(n,e,t,r,o,i,s){return p(this,null,function*(){s?.addQueueMeasurement(d.AuthorityFactoryCreateDiscoveredInstance,i);let a=Wt.transformCIAMAuthority(Uf(n)),c=new Wt(a,e,t,r,o,i,s);try{return yield y(c.resolveEndpointsAsync.bind(c),d.AuthorityResolveEndpointsAsync,o,s,i)(),c}catch{throw E(at)}})}var Dt=class n extends P{constructor(e,t,r,o,i){super(e,t,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,n.prototype)}};function Rr(n,e,t){return{clientId:n,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:t,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}var Mr=class n{static generateThrottlingStorageKey(e){return`${yr.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t,r){let o=n.generateThrottlingStorageKey(t),i=e.getThrottlingCache(o);if(i){if(i.throttleTime<Date.now()){e.removeItem(o,r);return}throw new Dt(i.errorCodes?.join(" ")||v.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,t,r,o){if(n.checkResponseStatus(r)||n.checkResponseForRetryAfter(r)){let i={throttleTime:n.calculateThrottleTime(parseInt(r.headers[be.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(n.generateThrottlingStorageKey(t),i,o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(be.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(t||yr.DEFAULT_THROTTLE_TIME_SECONDS),r+yr.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,r,o){let i=Rr(t,r,o),s=this.generateThrottlingStorageKey(i);e.removeItem(s,r.correlationId)}};var ua=class n extends P{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,n.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}};function Ni(n,e,t,r){return n.errorMessage=`${n.errorMessage}, additionalErrorInfo: error.name:${r?.name}, error.message:${r?.message}`,new ua(n,e,t)}var co=class{constructor(e,t){this.config=u_(e),this.logger=new ct(this.config.loggerOptions,Sf,ta),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){let t={};if(t[be.CONTENT_TYPE]=v.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case et.HOME_ACCOUNT_ID:try{let r=Un(e.credential);t[be.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case et.UPN:t[be.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}executePostToTokenEndpoint(e,t,r,o,i,s){return p(this,null,function*(){s&&this.performanceClient?.addQueueMeasurement(s,i);let a=yield this.sendPostRequest(o,e,{body:t,headers:r},i);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a})}sendPostRequest(e,t,r,o){return p(this,null,function*(){Mr.preProcess(this.cacheManager,e,o);let i;try{i=yield y(this.networkClient.sendPostRequestAsync.bind(this.networkClient),d.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,o)(t,r);let s=i.headers||{};this.performanceClient?.addFields({refreshTokenSize:i.body.refresh_token?.length||0,httpVerToken:s[be.X_MS_HTTP_VERSION]||"",requestId:s[be.X_MS_REQUEST_ID]||""},o)}catch(s){if(s instanceof ua){let a=s.responseHeaders;throw a&&this.performanceClient?.addFields({httpVerToken:a[be.X_MS_HTTP_VERSION]||"",requestId:a[be.X_MS_REQUEST_ID]||"",contentTypeHeader:a[be.CONTENT_TYPE]||void 0,contentLengthHeader:a[be.CONTENT_LENGTH]||void 0,httpStatus:s.httpStatus},o),s.error}throw s instanceof P?s:E(Xo)}return Mr.postProcess(this.cacheManager,e,i,o),i})}updateAuthority(e,t){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.UpdateTokenEndpointAuthority,t);let r=`https://${e}/${this.authority.tenant}/`,o=yield QC(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=o})}createTokenQueryParameters(e){let t=new Map;return e.embeddedClientId&&br(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&_r(t,e.tokenQueryParameters),Mi(t,e.correlationId),Ai(t,e.correlationId,this.performanceClient),Fn(t)}};function Bf(n){return n&&(n.tid||n.tfp||n.acr)||null}var Ke=class n{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,t,r){let o=new n;t.authorityType===ut.Adfs?o.authorityType=Zs.ADFS_ACCOUNT_TYPE:t.protocolMode===he.OIDC?o.authorityType=Zs.GENERIC_ACCOUNT_TYPE:o.authorityType=Zs.MSSTS_ACCOUNT_TYPE;let i;e.clientInfo&&r&&(i=ia(e.clientInfo,r)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;let s=e.environment||t&&t.getPreferredCache();if(!s)throw E(Er);o.environment=s,o.realm=i?.utid||Bf(e.idTokenClaims)||"",o.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,c=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(o.username=a||c||"",o.loginHint=e.idTokenClaims?.login_hint,o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{let l=na(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[l]}return o}static createFromAccountInfo(e,t,r){let o=new n;return o.authorityType=e.authorityType||Zs.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.loginHint=e.loginHint,o.cloudGraphHostName=t,o.msGraphHost=r,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o}static generateHomeAccountId(e,t,r,o,i){if(!(t===ut.Adfs||t===ut.Dsts)){if(e)try{let s=ia(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let o=!0;if(r){let i=e.idTokenClaims||{},s=t.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.loginHint===t.loginHint&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&o}};var Bn={};ft(Bn,{badToken:()=>uo,consentRequired:()=>JC,interactionRequired:()=>YC,loginRequired:()=>ZC,nativeAccountUnavailable:()=>vu,noTokensFound:()=>lo,refreshTokenExpired:()=>Cu,uxNotAllowed:()=>jf});var lo="no_tokens_found",vu="native_account_unavailable",Cu="refresh_token_expired",jf="ux_not_allowed",YC="interaction_required",JC="consent_required",ZC="login_required",uo="bad_token";var y_=[YC,JC,ZC,uo,jf],QU=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Vf={[lo]:"No refresh token found in the cache. Please sign-in.",[vu]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Cu]:"Refresh token has expired.",[uo]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[jf]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},v_={noTokensFoundError:{code:lo,desc:Vf[lo]},native_account_unavailable:{code:vu,desc:Vf[vu]},bad_token:{code:uo,desc:Vf[uo]}},ze=class n extends P{constructor(e,t,r,o,i,s,a,c){super(e,t,r),Object.setPrototypeOf(this,n.prototype),this.timestamp=o||v.EMPTY_STRING,this.traceId=i||v.EMPTY_STRING,this.correlationId=s||v.EMPTY_STRING,this.claims=a||v.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}};function $f(n,e,t){let r=!!n&&y_.indexOf(n)>-1,o=!!t&&QU.indexOf(t)>-1,i=!!e&&y_.some(s=>e.indexOf(s)>-1);return r||i||o}function Oi(n){return new ze(n,Vf[n])}var un=class n{static setRequestState(e,t,r){let o=n.generateLibraryState(e,r);return t?`${o}${v.RESOURCE_DELIM}${t}`:o}static generateLibraryState(e,t){if(!e)throw E(to);let r={id:e.createNewGuid()};t&&(r.meta=t);let o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,t){if(!e)throw E(to);if(!t)throw E(ln);try{let r=t.split(v.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(v.RESOURCE_DELIM):v.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||v.EMPTY_STRING,libraryState:a}}catch{throw E(ln)}}};var YU={SW:"sw"},_t=class{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}generateCnf(e,t){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.PopTokenGenerateCnf,e.correlationId);let r=yield y(this.generateKid.bind(this),d.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}})}generateKid(e){return p(this,null,function*(){return this.performanceClient?.addQueueMeasurement(d.PopTokenGenerateKid,e.correlationId),{kid:yield this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:YU.SW}})}signPopToken(e,t,r){return p(this,null,function*(){return this.signPayload(e,t,r)})}signPayload(e,t,r,o){return p(this,null,function*(){let{resourceRequestMethod:i,resourceRequestUri:s,shrClaims:a,shrNonce:c,shrOptions:l}=r,h=(s?new j(s):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt(m({at:e,ts:Ft(),m:i?.toUpperCase(),u:h?.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:h?.AbsolutePath,q:h?.QueryString?[[],h.QueryString]:void 0,client_claims:a||void 0},o),t,l,r.correlationId)})}};var zf=class{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};var dn=class n{constructor(e,t,r,o,i,s,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){let r=`Error(s): ${e.error_codes||v.NOT_AVAILABLE} - Timestamp: ${e.timestamp||v.NOT_AVAILABLE} - Description: ${e.error_description||v.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||v.NOT_AVAILABLE} - Trace ID: ${e.trace_id||v.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,i=new Dt(e.error,r,e.suberror,o,e.status);if(t&&e.status&&e.status>=an.SERVER_ERROR_RANGE_START&&e.status<=an.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${i}`);return}else if(t&&e.status&&e.status>=an.CLIENT_ERROR_RANGE_START&&e.status<=an.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${i}`);return}throw $f(e.error,e.error_description,e.suberror)?new ze(e.error,e.error_description,e.suberror,e.timestamp||v.EMPTY_STRING,e.trace_id||v.EMPTY_STRING,e.correlation_id||v.EMPTY_STRING,e.claims||v.EMPTY_STRING,o):i}}handleServerTokenResponse(e,t,r,o,i,s,a,c,l){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.HandleServerTokenResponse,e.correlation_id);let u;if(e.id_token){if(u=wr(e.id_token||v.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&u.nonce!==i.nonce)throw E(ri);if(o.maxAge||o.maxAge===0){let C=u.auth_time;if(!C)throw E(vr);Zl(C,o.maxAge)}}this.homeAccountIdentifier=Ke.generateHomeAccountId(e.client_info||v.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,u);let h;i&&i.state&&(h=un.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;let g=this.generateCacheRecord(e,t,r,o,u,s,i),f;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),f=new zf(this.serializableCache,!0),yield this.persistencePlugin.beforeCacheAccess(f)),a&&!c&&g.account){let C=this.cacheStorage.generateAccountKey(g.account.getAccountInfo());if(!this.cacheStorage.getAccount(C,o.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield n.generateAuthenticationResult(this.cryptoObj,t,g,!1,o,u,h,void 0,l)}yield this.cacheStorage.saveCacheRecord(g,o.correlationId,o.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&f&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield this.persistencePlugin.afterCacheAccess(f))}return n.generateAuthenticationResult(this.cryptoObj,t,g,!1,o,u,h,e,l)})}generateCacheRecord(e,t,r,o,i,s,a){let c=t.getPreferredCache();if(!c)throw E(Er);let l=Bf(i),u,h;e.id_token&&i&&(u=GC(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),h=da(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o.correlationId,i,e.client_info,c,l,a,void 0,this.logger));let g=null;if(e.access_token){let I=e.scope?ve.fromString(e.scope):new ve(o.scopes||[]),_=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,x=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,de=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,ne=r+_,Jt=ne+x,Yn=de&&de>0?r+de:void 0;g=qC(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||t.tenant||"",I.printScopes(),ne,Jt,this.cryptoObj.base64Decode,Yn,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let f=null;if(e.refresh_token){let I;if(e.refresh_token_expires_in){let _=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;I=r+_}f=KC(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,I)}let C=null;return e.foci&&(C={clientId:this.clientId,environment:c,familyId:e.foci}),{account:h,idToken:u,accessToken:g,refreshToken:f,appMetadata:C}}static generateAuthenticationResult(e,t,r,o,i,s,a,c,l){return p(this,null,function*(){let u=v.EMPTY_STRING,h=[],g=null,f,C,I=v.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===z.POP&&!i.popKid){let ne=new _t(e),{secret:Jt,keyId:Yn}=r.accessToken;if(!Yn)throw E(fi);u=yield ne.signPopToken(Jt,Yn,i)}else u=r.accessToken.secret;h=ve.fromString(r.accessToken.target).asArray(),g=mu(r.accessToken.expiresOn),f=mu(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(C=mu(r.accessToken.refreshOn))}r.appMetadata&&(I=r.appMetadata.familyId===Qo?Qo:"");let _=s?.oid||s?.sub||"",x=s?.tid||"";c?.spa_accountid&&r.account&&(r.account.nativeAccountId=c?.spa_accountid);let de=r.account?wi(r.account.getAccountInfo(),void 0,s,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:_,tenantId:x,scopes:h,account:de,idToken:r?.idToken?.secret||"",idTokenClaims:s||{},accessToken:u,fromCache:o,expiresOn:g,extExpiresOn:f,refreshOn:C,correlationId:i.correlationId,requestId:l||v.EMPTY_STRING,familyId:I,tokenType:r.accessToken?.tokenType||v.EMPTY_STRING,state:a?a.userRequestState:v.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||v.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||v.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}})}};function da(n,e,t,r,o,i,s,a,c,l,u,h){h?.verbose("setCachedAccount called");let f=n.getAccountKeys().find(de=>de.startsWith(t)),C=null;f&&(C=n.getAccount(f,o));let I=C||Ke.createAccount({homeAccountId:t,idTokenClaims:i,clientInfo:s,environment:a,cloudGraphHostName:l?.cloud_graph_host_name,msGraphHost:l?.msgraph_host,nativeAccountId:u},e,r),_=I.tenantProfiles||[],x=c||I.realm;if(x&&!_.find(de=>de.tenantId===x)){let de=na(t,I.localAccountId,x,i);_.push(de)}return I.tenantProfiles=_,I}function Gf(n,e,t){return p(this,null,function*(){return typeof n=="string"?n:n({clientId:e,tokenEndpoint:t})})}var Pi=class extends co{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}acquireToken(e,t){return p(this,null,function*(){if(this.performanceClient?.addQueueMeasurement(d.AuthClientAcquireToken,e.correlationId),!e.code)throw E(si);let r=Ft(),o=yield y(this.executeTokenRequest.bind(this),d.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=o.headers?.[be.X_MS_REQUEST_ID],s=new dn(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(o.body),y(s.handleServerTokenResponse.bind(s),d.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,t,void 0,void 0,void 0,i)})}getLogoutUri(e){if(!e)throw Q(Ci);let t=this.createLogoutUrlQueryString(e);return j.appendQueryString(this.authority.endSessionEndpoint,t)}executeTokenRequest(e,t){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthClientExecuteTokenRequest,t.correlationId);let r=this.createTokenQueryParameters(t),o=j.appendQueryString(e.tokenEndpoint,r),i=yield y(this.createTokenRequestBody.bind(this),d.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t),s;if(t.clientInfo)try{let l=ia(t.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${l.uid}${mr.CLIENT_INFO_SEPARATOR}${l.utid}`,type:et.HOME_ACCOUNT_ID}}catch(l){this.logger.verbose("Could not parse client info for CCS Header: "+l)}let a=this.createTokenRequestHeaders(s||t.ccsCredential),c=Rr(this.config.authOptions.clientId,t);return y(this.executePostToTokenEndpoint.bind(this),d.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(o,i,a,c,t.correlationId,d.AuthorizationCodeClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthClientCreateTokenRequestBody,e.correlationId);let t=new Map;if(_i(t,e.embeddedClientId||e.tokenBodyParameters?.[Hn]||this.config.authOptions.clientId),this.includeRedirectUri)bi(t,e.redirectUri);else if(!e.redirectUri)throw Q(pi);if(Di(t,e.scopes,!0,this.oidcDefaultScopes),BC(t,e.code),ou(t,this.config.libraryInfo),iu(t,this.config.telemetry.application),gu(t),this.serverTelemetryManager&&!bf(this.config)&&pu(t,this.serverTelemetryManager),e.codeVerifier&&VC(t,e.codeVerifier),this.config.clientCredentials.clientSecret&&au(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let o=this.config.clientCredentials.clientAssertion;cu(t,yield Gf(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),lu(t,o.assertionType)}if(uu(t,El.AUTHORIZATION_CODE_GRANT),ki(t),e.authenticationScheme===z.POP){let o=new _t(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(yield y(o.generateCnf.bind(o),d.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,hu(t,i)}else if(e.authenticationScheme===z.SSH)if(e.sshJwk)fu(t,e.sshJwk);else throw Q(Tr);(!le.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Ri(t,e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{let o=ia(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${o.uid}${mr.CLIENT_INFO_SEPARATOR}${o.utid}`,type:et.HOME_ACCOUNT_ID}}catch(o){this.logger.verbose("Could not parse client info for CCS Header: "+o)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case et.HOME_ACCOUNT_ID:try{let o=Un(r.credential);Dr(t,o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case et.UPN:ao(t,r.credential);break}return e.embeddedClientId&&br(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&_r(t,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[Nf])&&_r(t,{[Nf]:"1"}),Ai(t,e.correlationId,this.performanceClient),Fn(t)})}createLogoutUrlQueryString(e){let t=new Map;return e.postLogoutRedirectUri&&xC(t,e.postLogoutRedirectUri),e.correlationId&&Mi(t,e.correlationId),e.idTokenHint&&FC(t,e.idTokenHint),e.state&&su(t,e.state),e.logoutHint&&$C(t,e.logoutHint),e.extraQueryParameters&&_r(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&du(t),Fn(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}};var JU=300,Eu=class extends co{constructor(e,t){super(e,t)}acquireToken(e){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientAcquireToken,e.correlationId);let t=Ft(),r=yield y(this.executeTokenRequest.bind(this),d.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=r.headers?.[be.X_MS_REQUEST_ID],i=new dn(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),y(i.handleServerTokenResponse.bind(i),d.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,o)})}acquireTokenByRefreshToken(e){return p(this,null,function*(){if(!e)throw Q(vi);if(this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw E(Cr);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return yield y(this.acquireTokenWithCachedRefreshToken.bind(this),d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(r){let o=r instanceof ze&&r.errorCode===lo,i=r instanceof Dt&&r.errorCode===Cf.INVALID_GRANT_ERROR&&r.subError===Cf.CLIENT_MISMATCH_ERROR;if(o||i)return y(this.acquireTokenWithCachedRefreshToken.bind(this),d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw r}return y(this.acquireTokenWithCachedRefreshToken.bind(this),d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)})}acquireTokenWithCachedRefreshToken(e,t){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let r=Ce(this.cacheManager.getRefreshToken.bind(this.cacheManager),d.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,e.correlationId,void 0,this.performanceClient);if(!r)throw Oi(lo);if(r.expiresOn&&ca(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||JU))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),Oi(Cu);let o=S(m({},e),{refreshToken:r.secret,authenticationScheme:e.authenticationScheme||z.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:et.HOME_ACCOUNT_ID}});try{return yield y(this.acquireToken.bind(this),d.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(i){if(i instanceof ze&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),i.subError===uo)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let s=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(s,e.correlationId)}throw i}})}executeTokenRequest(e,t){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientExecuteTokenRequest,e.correlationId);let r=this.createTokenQueryParameters(e),o=j.appendQueryString(t.tokenEndpoint,r),i=yield y(this.createTokenRequestBody.bind(this),d.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),a=Rr(this.config.authOptions.clientId,e);return y(this.executePostToTokenEndpoint.bind(this),d.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,i,s,a,e.correlationId,d.RefreshTokenClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let t=new Map;if(_i(t,e.embeddedClientId||e.tokenBodyParameters?.[Hn]||this.config.authOptions.clientId),e.redirectUri&&bi(t,e.redirectUri),Di(t,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),uu(t,El.REFRESH_TOKEN_GRANT),ki(t),ou(t,this.config.libraryInfo),iu(t,this.config.telemetry.application),gu(t),this.serverTelemetryManager&&!bf(this.config)&&pu(t,this.serverTelemetryManager),jC(t,e.refreshToken),this.config.clientCredentials.clientSecret&&au(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let r=this.config.clientCredentials.clientAssertion;cu(t,yield Gf(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),lu(t,r.assertionType)}if(e.authenticationScheme===z.POP){let r=new _t(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(yield y(r.generateCnf.bind(r),d.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,hu(t,o)}else if(e.authenticationScheme===z.SSH)if(e.sshJwk)fu(t,e.sshJwk);else throw Q(Tr);if((!le.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Ri(t,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case et.HOME_ACCOUNT_ID:try{let r=Un(e.ccsCredential.credential);Dr(t,r)}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case et.UPN:ao(t,e.ccsCredential.credential);break}return e.embeddedClientId&&br(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&_r(t,e.tokenBodyParameters),Ai(t,e.correlationId,this.performanceClient),Fn(t)})}};var Iu=class extends co{constructor(e,t){super(e,t)}acquireCachedToken(e){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.SilentFlowClientAcquireCachedToken,e.correlationId);let t=Pn.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!le.isEmptyObj(e.claims))throw this.setCacheOutcome(Pn.FORCE_REFRESH_OR_CLAIMS,e.correlationId),E(Ir);if(!e.account)throw E(Cr);let r=e.account.tenantId||m_(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r);if(i){if(zC(i.cachedAt)||ca(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Pn.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),E(Ir);i.refreshOn&&ca(i.refreshOn,0)&&(t=Pn.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Pn.NO_CACHED_ACCESS_TOKEN,e.correlationId),E(Ir);let s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,o,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[yield y(this.generateResultFromCacheRecord.bind(this),d.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),t]})}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==Pn.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}generateResultFromCacheRecord(e,t){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let r;if(e.idToken&&(r=wr(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){let o=r?.auth_time;if(!o)throw E(vr);Zl(o,t.maxAge)}return dn.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)})}};var XC={sendGetRequestAsync:()=>Promise.reject(E(B)),sendPostRequestAsync:()=>Promise.reject(E(B))};var jn={};ft(jn,{getAuthorizationCodePayload:()=>e1,getAuthorizeUrl:()=>XU,getStandardAuthorizeRequestParameters:()=>ZU,validateAuthorizationResponse:()=>C_});function ZU(n,e,t,r){let o=e.correlationId,i=new Map;_i(i,e.embeddedClientId||e.extraQueryParameters?.[Hn]||n.clientId);let s=[...e.scopes||[],...e.extraScopesToConsent||[]];if(Di(i,s,!0,n.authority.options.OIDCOptions?.defaultScopes),bi(i,e.redirectUri),Mi(i,o),PC(i,e.responseMode),ki(i),e.prompt&&(UC(i,e.prompt),r?.addFields({prompt:e.prompt},o)),e.domainHint&&(LC(i,e.domainHint),r?.addFields({domainHintFromRequest:!0},o)),e.prompt!==Re.SELECT_ACCOUNT)if(e.sid&&e.prompt===Re.NONE)t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),Pf(i,e.sid),r?.addFields({sidFromRequest:!0},o);else if(e.account){let a=n1(e.account),c=r1(e.account);if(c&&e.domainHint&&(t.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),c=null),c){t.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),aa(i,c),r?.addFields({loginHintFromClaim:!0},o);try{let l=Un(e.account.homeAccountId);Dr(i,l)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&e.prompt===Re.NONE){t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),Pf(i,a),r?.addFields({sidFromClaim:!0},o);try{let l=Un(e.account.homeAccountId);Dr(i,l)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)t.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),aa(i,e.loginHint),ao(i,e.loginHint),r?.addFields({loginHintFromRequest:!0},o);else if(e.account.username){t.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),aa(i,e.account.username),r?.addFields({loginHintFromUpn:!0},o);try{let l=Un(e.account.homeAccountId);Dr(i,l)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(t.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),aa(i,e.loginHint),ao(i,e.loginHint),r?.addFields({loginHintFromRequest:!0},o));else t.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&HC(i,e.nonce),e.state&&su(i,e.state),(e.claims||n.clientCapabilities&&n.clientCapabilities.length>0)&&Ri(i,e.claims,n.clientCapabilities),e.embeddedClientId&&br(i,n.clientId,n.redirectUri),n.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(sa))&&du(i),i}function XU(n,e,t,r){let o=Fn(e,t,r);return j.appendQueryString(n.authorizationEndpoint,o)}function e1(n,e){if(C_(n,e),!n.code)throw E(di);return n}function C_(n,e){if(!n.state||!e)throw n.state?E(Xr,"Cached State"):E(Xr,"Server State");let t,r;try{t=decodeURIComponent(n.state)}catch{throw E(ln,n.state)}try{r=decodeURIComponent(e)}catch{throw E(ln,n.state)}if(t!==r)throw E(ni);if(n.error||n.error_description||n.suberror){let o=t1(n);throw $f(n.error,n.error_description,n.suberror)?new ze(n.error||"",n.error_description,n.suberror,n.timestamp||"",n.trace_id||"",n.correlation_id||"",n.claims||"",o):new Dt(n.error||"",n.error_description,n.suberror,o)}}function t1(n){let e="code=",t=n.error_uri?.lastIndexOf(e);return t&&t>=0?n.error_uri?.substring(t+e.length):void 0}function n1(n){return n.idTokenClaims?.sid||null}function r1(n){return n.loginHint||n.idTokenClaims?.login_hint||null}var E_=",",I_="|";function o1(n){let{skus:e,libraryName:t,libraryVersion:r,extensionName:o,extensionVersion:i}=n,s=new Map([[0,[t,r]],[2,[o,i]]]),a=[];if(e?.length){if(a=e.split(E_),a.length<4)return e}else a=Array.from({length:4},()=>I_);return s.forEach((c,l)=>{c.length===2&&c[0]?.length&&c[1]?.length&&i1({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(E_)}function i1(n){let{skuArr:e,index:t,skuName:r,skuVersion:o}=n;t>=e.length||(e[t]=[r,o].join(I_))}var xi=class n{constructor(e,t){this.cacheOutcome=Pn.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||v.EMPTY_STRING,this.wrapperVer=e.wrapperVer||v.EMPTY_STRING,this.telemetryCacheKey=Ue.CACHE_KEY+mr.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${Ue.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);let o=t.join(Ue.VALUE_SEPARATOR),i=this.getRegionDiscoveryFields(),s=[e,i].join(Ue.VALUE_SEPARATOR);return[Ue.SCHEMA_VERSION,s,o].join(Ue.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(Ue.VALUE_SEPARATOR),o=e.errors.slice(0,t).join(Ue.VALUE_SEPARATOR),i=e.errors.length,s=t<i?Ue.OVERFLOW_TRUE:Ue.OVERFLOW_FALSE,a=[i,s].join(Ue.VALUE_SEPARATOR);return[Ue.SCHEMA_VERSION,e.cacheHits,r,o,a].join(Ue.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let t=this.getLastRequests();t.errors.length>=Ue.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof P?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(Ue.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),r=e.errors.length;if(t===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let o={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o,this.correlationId)}}static maxErrorsToSend(e){let t,r=0,o=0,i=e.errors.length;for(t=0;t<i;t++){let s=e.failedRequests[2*t]||v.EMPTY_STRING,a=e.failedRequests[2*t+1]||v.EMPTY_STRING,c=e.errors[t]||v.EMPTY_STRING;if(o+=s.toString().length+a.toString().length+c.length+3,o<Ue.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||v.EMPTY_STRING),e.push(this.regionSource||v.EMPTY_STRING),e.push(this.regionOutcome||v.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return o1(e)}};var qf="missing_kid_error",Kf="missing_alg_error";var s1={[qf]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Kf]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."},eE=class n extends P{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,n.prototype)}};function tE(n){return new eE(n,s1[n])}var Tu=class n{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw tE(qf);if(!e.alg)throw tE(Kf);let t=new n({typ:e.typ||Tf.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}};var Ee={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},dt={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},ha={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},ue={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},nE={GET:"GET",POST:"POST"},hn={SIGNIN:"signin",SIGNOUT:"signout"},Ie={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},wu={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},ee={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962},k=function(n){return n.Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none",n}(k||{}),Oe={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},rE={scopes:xt},oE="jwk",iE={React:"@azure/msal-react",Angular:"@azure/msal-angular"},Wf="msal.db",T_=1,w_=`${Wf}.keys`,Ge={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},S_=[Ge.Default,Ge.Skip,Ge.RefreshTokenAndNetwork];var Fi="pkce_not_created",Su="ear_jwk_empty",Qf="ear_jwe_empty",Li="crypto_nonexistent",Vn="empty_navigate_uri",fa="hash_empty_error",ho="no_state_in_hash",pa="hash_does_not_contain_known_properties",ga="unable_to_parse_state",ma="state_interaction_type_mismatch",ya="interaction_in_progress",va="popup_window_error",Ca="empty_window_error",fn="user_cancelled",Yf="monitor_popup_timeout",Ea="monitor_window_timeout",Ia="redirect_in_iframe",Ta="block_iframe_reload",wa="block_nested_popups",Jf="iframe_closed_prematurely",$n="silent_logout_unsupported",Sa="no_account_error",Zf="silent_prompt_value_error",Aa="no_token_request_cache_error",Da="unable_to_parse_token_request_cache_error",Xf="auth_request_not_set_error",ep="invalid_cache_type",zn="non_browser_environment",Gn="database_not_open",kr="no_network_connectivity",_a="post_request_failed",ba="get_request_failed",Ui="failed_to_parse_response",Ra="unable_to_load_token",fo="crypto_key_not_found",Ma="auth_code_required",ka="auth_code_or_nativeAccountId_required",Na="spa_code_and_nativeAccountId_present",po="database_unavailable",Oa="unable_to_acquire_token_from_native_platform",Pa="native_handshake_timeout",xa="native_extension_not_installed",go="native_connection_not_established",qn="uninitialized_public_client_application",Fa="native_prompt_not_supported",La="invalid_base64_string",Ua="invalid_pop_token_request",tp="failed_to_build_headers",np="failed_to_parse_headers",Ha="failed_to_decrypt_ear_response",Hi="timed_out";var Nr="For more visit: aka.ms/msaljs/browser-errors",F={[Fi]:"The PKCE code challenge and verifier could not be generated.",[Su]:"No EAR encryption key provided. This is unexpected.",[Qf]:"Server response does not contain ear_jwe property. This is unexpected.",[Li]:"The crypto object or function is not available.",[Vn]:"Navigation URI is empty. Please check stack trace for more info.",[fa]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Nr}`,[ho]:"Hash does not contain state. Please verify that the request originated from msal.",[pa]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Nr}`,[ga]:"Unable to parse state. Please verify that the request originated from msal.",[ma]:"Hash contains state but the interaction type does not match the caller.",[ya]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Nr}`,[va]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[Ca]:"window.open returned null or undefined window object.",[fn]:"User cancelled the flow.",[Yf]:`Token acquisition in popup failed due to timeout.  ${Nr}`,[Ea]:`Token acquisition in iframe failed due to timeout.  ${Nr}`,[Ia]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Ta]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Nr}`,[wa]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[Jf]:"The iframe being monitored was closed prematurely.",[$n]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Sa]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Zf]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[Aa]:"No token request found in cache.",[Da]:"The cached token request could not be parsed.",[Xf]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[ep]:"Invalid cache type",[zn]:"Login and token requests are not supported in non-browser environments.",[Gn]:"Database is not open!",[kr]:"No network connectivity. Check your internet connection.",[_a]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[ba]:"Network request failed. Please check the network trace to determine root cause.",[Ui]:"Failed to parse network response. Check network trace.",[Ra]:"Error loading token to cache.",[fo]:"Cryptographic Key or Keypair not found in browser storage.",[Ma]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[ka]:"An authorization code or nativeAccountId must be provided to this flow.",[Na]:"Request cannot contain both spa code and native account id.",[po]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Oa]:`Unable to acquire token from native platform.  ${Nr}`,[Pa]:"Timed out while attempting to establish connection to browser extension",[xa]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[go]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Nr}`,[qn]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Nr}`,[Fa]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[La]:"Invalid base64 encoded string.",[Ua]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[tp]:"Failed to build request headers object.",[np]:"Failed to parse response headers",[Ha]:"Failed to decrypt ear response",[Hi]:"The request timed out."},S5={pkceNotGenerated:{code:Fi,desc:F[Fi]},cryptoDoesNotExist:{code:Li,desc:F[Li]},emptyNavigateUriError:{code:Vn,desc:F[Vn]},hashEmptyError:{code:fa,desc:F[fa]},hashDoesNotContainStateError:{code:ho,desc:F[ho]},hashDoesNotContainKnownPropertiesError:{code:pa,desc:F[pa]},unableToParseStateError:{code:ga,desc:F[ga]},stateInteractionTypeMismatchError:{code:ma,desc:F[ma]},interactionInProgress:{code:ya,desc:F[ya]},popupWindowError:{code:va,desc:F[va]},emptyWindowError:{code:Ca,desc:F[Ca]},userCancelledError:{code:fn,desc:F[fn]},monitorPopupTimeoutError:{code:Yf,desc:F[Yf]},monitorIframeTimeoutError:{code:Ea,desc:F[Ea]},redirectInIframeError:{code:Ia,desc:F[Ia]},blockTokenRequestsInHiddenIframeError:{code:Ta,desc:F[Ta]},blockAcquireTokenInPopupsError:{code:wa,desc:F[wa]},iframeClosedPrematurelyError:{code:Jf,desc:F[Jf]},silentLogoutUnsupportedError:{code:$n,desc:F[$n]},noAccountError:{code:Sa,desc:F[Sa]},silentPromptValueError:{code:Zf,desc:F[Zf]},noTokenRequestCacheError:{code:Aa,desc:F[Aa]},unableToParseTokenRequestCacheError:{code:Da,desc:F[Da]},authRequestNotSet:{code:Xf,desc:F[Xf]},invalidCacheType:{code:ep,desc:F[ep]},notInBrowserEnvironment:{code:zn,desc:F[zn]},databaseNotOpen:{code:Gn,desc:F[Gn]},noNetworkConnectivity:{code:kr,desc:F[kr]},postRequestFailed:{code:_a,desc:F[_a]},getRequestFailed:{code:ba,desc:F[ba]},failedToParseNetworkResponse:{code:Ui,desc:F[Ui]},unableToLoadTokenError:{code:Ra,desc:F[Ra]},signingKeyNotFoundInStorage:{code:fo,desc:F[fo]},authCodeRequired:{code:Ma,desc:F[Ma]},authCodeOrNativeAccountRequired:{code:ka,desc:F[ka]},spaCodeAndNativeAccountPresent:{code:Na,desc:F[Na]},databaseUnavailable:{code:po,desc:F[po]},unableToAcquireTokenFromNativePlatform:{code:Oa,desc:F[Oa]},nativeHandshakeTimeout:{code:Pa,desc:F[Pa]},nativeExtensionNotInstalled:{code:xa,desc:F[xa]},nativeConnectionNotEstablished:{code:go,desc:F[go]},uninitializedPublicClientApplication:{code:qn,desc:F[qn]},nativePromptNotSupported:{code:Fa,desc:F[Fa]},invalidBase64StringError:{code:La,desc:F[La]},invalidPopTokenRequest:{code:Ua,desc:F[Ua]}},Bi=class n extends P{constructor(e,t){super(e,F[e],t),Object.setPrototypeOf(this,n.prototype),this.name="BrowserAuthError"}};function w(n,e){return new Bi(n,e)}var Au=class n{navigateInternal(e,t){return n.defaultNavigateWindow(e,t)}navigateExternal(e,t){return n.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((r,o)=>{setTimeout(()=>{o(w(Hi,"failed_to_redirect"))},t.timeout)})}};var rp=class{sendGetRequestAsync(e,t){return p(this,null,function*(){let r,o={},i=0,s=A_(t);try{r=yield fetch(e,{method:nE.GET,headers:s})}catch(a){throw Ni(w(window.navigator.onLine?ba:kr),void 0,void 0,a)}o=D_(r.headers);try{return i=r.status,{headers:o,body:yield r.json(),status:i}}catch(a){throw Ni(w(Ui),i,o,a)}})}sendPostRequestAsync(e,t){return p(this,null,function*(){let r=t&&t.body||"",o=A_(t),i,s=0,a={};try{i=yield fetch(e,{method:nE.POST,headers:o,body:r})}catch(c){throw Ni(w(window.navigator.onLine?_a:kr),void 0,void 0,c)}a=D_(i.headers);try{return s=i.status,{headers:a,body:yield i.json(),status:s}}catch(c){throw Ni(w(Ui),s,a,c)}})}};function A_(n){try{let e=new Headers;if(!(n&&n.headers))return e;let t=n.headers;return Object.entries(t).forEach(([r,o])=>{e.append(r,o)}),e}catch(e){throw Ni(w(tp),void 0,void 0,e)}}function D_(n){try{let e={};return n.forEach((t,r)=>{e[r]=t}),e}catch{throw w(np)}}var dp={};ft(dp,{blockAPICallsBeforeInitialize:()=>lp,blockAcquireTokenInPopups:()=>$_,blockNonBrowserEnvironment:()=>cp,blockRedirectInIframe:()=>V_,blockReloadInHiddenIframes:()=>j_,clearHash:()=>_u,createGuid:()=>yE,getCurrentUri:()=>ht,getHomepage:()=>mE,invoke:()=>Ce,invokeAsync:()=>y,isInIframe:()=>bu,isInPopup:()=>B_,preconnect:()=>Mu,preflightCheck:()=>Ru,redirectPreflightCheck:()=>up,replaceHash:()=>gE});function Du(n){return encodeURIComponent(mo(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Qt(n){return __(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function mo(n){return __(new TextEncoder().encode(n))}function __(n){let e=Array.from(n,t=>String.fromCodePoint(t)).join("");return btoa(e)}function tt(n){return new TextDecoder().decode(Kn(n))}function Kn(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw w(La)}let t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0)||0)}var a1="RSASSA-PKCS1-v1_5",Ba="AES-GCM",M_="HKDF",aE="SHA-256",c1=2048,l1=new Uint8Array([1,0,1]),b_="0123456789abcdef",R_=new Uint32Array(1),cE="raw",k_="encrypt",lE="decrypt",u1="deriveKey",d1="crypto_subtle_undefined",uE={name:a1,hash:aE,modulusLength:c1,publicExponent:l1};function N_(n){if(!window)throw w(zn);if(!window.crypto)throw w(Li);if(!n&&!window.crypto.subtle)throw w(Li,d1)}function dE(n,e,t){return p(this,null,function*(){e?.addQueueMeasurement(d.Sha256Digest,t);let o=new TextEncoder().encode(n);return window.crypto.subtle.digest(aE,o)})}function O_(n){return window.crypto.getRandomValues(n)}function sE(){return window.crypto.getRandomValues(R_),R_[0]}function je(){let n=Date.now(),e=sE()*1024+(sE()&1023),t=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=sE();t[0]=n/2**40,t[1]=n/2**32,t[2]=n/2**24,t[3]=n/2**16,t[4]=n/2**8,t[5]=n,t[6]=112|r>>>8,t[7]=r,t[8]=128|o>>>24,t[9]=o>>>16,t[10]=o>>>8,t[11]=o,t[12]=i>>>24,t[13]=i>>>16,t[14]=i>>>8,t[15]=i;let s="";for(let a=0;a<t.length;a++)s+=b_.charAt(t[a]>>>4),s+=b_.charAt(t[a]&15),(a===3||a===5||a===7||a===9)&&(s+="-");return s}function P_(n,e){return p(this,null,function*(){return window.crypto.subtle.generateKey(uE,n,e)})}function op(n){return p(this,null,function*(){return window.crypto.subtle.exportKey(oE,n)})}function x_(n,e,t){return p(this,null,function*(){return window.crypto.subtle.importKey(oE,n,uE,e,t)})}function F_(n,e){return p(this,null,function*(){return window.crypto.subtle.sign(uE,n,e)})}function ja(){return p(this,null,function*(){let n=yield hE(),t={alg:"dir",kty:"oct",k:Qt(new Uint8Array(n))};return mo(JSON.stringify(t))})}function h1(n){return p(this,null,function*(){let e=tt(n),r=JSON.parse(e).k,o=Kn(r);return window.crypto.subtle.importKey(cE,o,Ba,!1,[lE])})}function L_(n,e){return p(this,null,function*(){let t=e.split(".");if(t.length!==5)throw w(Ha,"jwe_length");let r=yield h1(n).catch(()=>{throw w(Ha,"import_key")});try{let o=new TextEncoder().encode(t[0]),i=Kn(t[2]),s=Kn(t[3]),a=Kn(t[4]),c=a.byteLength*8,l=new Uint8Array(s.length+a.length);l.set(s),l.set(a,s.length);let u=yield window.crypto.subtle.decrypt({name:Ba,iv:i,tagLength:c,additionalData:o},r,l);return new TextDecoder().decode(u)}catch{throw w(Ha,"decrypt")}})}function hE(){return p(this,null,function*(){let n=yield window.crypto.subtle.generateKey({name:Ba,length:256},!0,[k_,lE]);return window.crypto.subtle.exportKey(cE,n)})}function fE(n){return p(this,null,function*(){return window.crypto.subtle.importKey(cE,n,M_,!1,[u1])})}function U_(n,e,t){return p(this,null,function*(){return window.crypto.subtle.deriveKey({name:M_,salt:e,hash:aE,info:new TextEncoder().encode(t)},n,{name:Ba,length:256},!1,[k_,lE])})}function H_(n,e,t){return p(this,null,function*(){let r=new TextEncoder().encode(e),o=window.crypto.getRandomValues(new Uint8Array(16)),i=yield U_(n,o,t),s=yield window.crypto.subtle.encrypt({name:Ba,iv:new Uint8Array(12)},i,r);return{data:Qt(new Uint8Array(s)),nonce:Qt(o)}})}function pE(n,e,t,r){return p(this,null,function*(){let o=Kn(r),i=yield U_(n,Kn(e),t),s=yield window.crypto.subtle.decrypt({name:Ba,iv:new Uint8Array(12)},i,o);return new TextDecoder().decode(s)})}function ip(n){return p(this,null,function*(){let e=yield dE(n),t=new Uint8Array(e);return Qt(t)})}var yo="storage_not_supported",sp="stubbed_public_client_application_called",Va="in_mem_redirect_unavailable";var ap={[yo]:"Given storage configuration option was not supported.",[sp]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Va]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."},f1={storageNotSupportedError:{code:yo,desc:ap[yo]},stubPcaInstanceCalled:{code:sp,desc:ap[sp]},inMemRedirectUnavailable:{code:Va,desc:ap[Va]}},$a=class n extends P{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,n.prototype)}};function za(n){return new $a(n,ap[n])}function _u(n){n.location.hash="",typeof n.history.replaceState=="function"&&n.history.replaceState(null,"",`${n.location.origin}${n.location.pathname}${n.location.search}`)}function gE(n){let e=n.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function bu(){return window.parent!==window}function B_(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${Ee.POPUP_NAME_PREFIX}.`)===0}function ht(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function mE(){let e=new j(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function j_(){if(j.hashContainsKnownProperties(window.location.hash)&&bu())throw w(Ta)}function V_(n){if(bu()&&!n)throw w(Ia)}function $_(){if(B_())throw w(wa)}function cp(){if(typeof window>"u")throw w(zn)}function lp(n){if(!n)throw w(qn)}function Ru(n){cp(),j_(),$_(),lp(n)}function up(n,e){if(Ru(n),V_(e.system.allowRedirectInIframe),e.cache.cacheLocation===ue.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw za(Va)}function Mu(n){let e=document.createElement("link");e.rel="preconnect",e.href=new URL(n).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function yE(){return je()}var p1=6e4,hp=1e4,g1=3e4,vE=2e3;function z_({auth:n,cache:e,system:t,telemetry:r},o){let i={clientId:v.EMPTY_STRING,authority:`${v.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:v.EMPTY_STRING,authorityMetadata:v.EMPTY_STRING,redirectUri:typeof window<"u"?ht():"",postLogoutRedirectUri:v.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:he.AAD,OIDCOptions:{serverResponseType:On.FRAGMENT,defaultScopes:[v.OPENID_SCOPE,v.PROFILE_SCOPE,v.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:ro.None,tenant:v.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},s={cacheLocation:ue.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:ue.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===ue.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:oe.Info,piiLoggingEnabled:!1},c=S(m({},_f),{loggerOptions:a,networkClient:o?new rp:XC,navigationClient:new Au,loadFrameTimeout:0,windowHashTimeout:t?.loadFrameTimeout||p1,iframeHashTimeout:t?.loadFrameTimeout||hp,navigateFrameWait:0,redirectNavigationTimeout:g1,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:t?.nativeBrokerHandshakeTimeout||vE,pollIntervalMilliseconds:Ee.DEFAULT_POLL_INTERVAL_MS}),l=S(m(m({},c),t),{loggerOptions:t?.loggerOptions||a}),u={application:{appName:v.EMPTY_STRING,appVersion:v.EMPTY_STRING},client:new Sr};if(n?.protocolMode!==he.OIDC&&n?.OIDCOptions&&new ct(l.loggerOptions).warning(JSON.stringify(Q(lt.cannotSetOIDCOptions))),n?.protocolMode&&n.protocolMode===he.OIDC&&l?.allowPlatformBroker)throw Q(lt.cannotAllowPlatformBroker);return{auth:S(m(m({},i),n),{OIDCOptions:m(m({},i.OIDCOptions),n?.OIDCOptions)}),cache:m(m({},s),e),system:l,telemetry:m(m({},u),r)}}var G_="@azure/msal-browser",Lt="4.22.0";var ke="msal",fp="browser",pp="-";var W_=`${ke}.${fp}.log.level`,Q_=`${ke}.${fp}.log.pii`,fY=`${ke}.${fp}.performance.enabled`,Y_=`${ke}.${fp}.platform.auth.dom`,CE=`${ke}.version`,q_="account.keys",K_="token.keys";function Ut(n=1){return n<1?`${ke}.${q_}`:`${ke}.${n}.${q_}`}function Wn(n,e=1){return e<1?`${ke}.${K_}.${n}`:`${ke}.${e}.${K_}.${n}`}var gp=class n{static loggerCallback(e,t){switch(e){case oe.Error:console.error(t);return;case oe.Info:console.info(t);return;case oe.Verbose:console.debug(t);return;case oe.Warning:console.warn(t);return;default:console.log(t);return}}constructor(e){this.browserEnvironment=typeof window<"u",this.config=z_(e,this.browserEnvironment);let t;try{t=window[ue.SessionStorage]}catch{}let r=t?.getItem(W_),o=t?.getItem(Q_)?.toLowerCase(),i=o==="true"?!0:o==="false"?!1:void 0,s=m({},this.config.system.loggerOptions),a=r&&Object.keys(oe).includes(r)?oe[r]:void 0;a&&(s.loggerCallback=n.loggerCallback,s.logLevel=a),i!==void 0&&(s.piiLoggingEnabled=i),this.logger=new ct(s,G_,Lt),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}};var mp=(()=>{class n extends gp{getModuleName(){return n.MODULE_NAME}getId(){return n.ID}initialize(){return p(this,null,function*(){return this.available=typeof window<"u",this.available})}}return n.MODULE_NAME="",n.ID="StandardOperatingContext",n})();var yp=class{constructor(){this.dbName=Wf,this.version=T_,this.tableName=w_,this.dbOpen=!1}open(){return p(this,null,function*(){return new Promise((e,t)=>{let r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",o=>{o.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",o=>{let i=o;this.db=i.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>t(w(po)))})})}closeConnection(){let e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}validateDbIsOpen(){return p(this,null,function*(){if(!this.dbOpen)return this.open()})}getItem(e){return p(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(w(Gn));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);s.addEventListener("success",a=>{let c=a;this.closeConnection(),t(c.target.result)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}setItem(e,t){return p(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((r,o)=>{if(!this.db)return o(w(Gn));let a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);a.addEventListener("success",()=>{this.closeConnection(),r()}),a.addEventListener("error",c=>{this.closeConnection(),o(c)})})})}removeItem(e){return p(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(w(Gn));let s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);s.addEventListener("success",()=>{this.closeConnection(),t()}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}getKeys(){return p(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(w(Gn));let i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();i.addEventListener("success",s=>{let a=s;this.closeConnection(),e(a.target.result)}),i.addEventListener("error",s=>{this.closeConnection(),t(s)})})})}containsKey(e){return p(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(w(Gn));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);s.addEventListener("success",a=>{let c=a;this.closeConnection(),t(c.target.result===1)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}deleteDatabase(){return p(this,null,function*(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{let r=window.indexedDB.deleteDatabase(Wf),o=setTimeout(()=>t(!1),200);r.addEventListener("success",()=>(clearTimeout(o),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(o),e(!0))),r.addEventListener("error",()=>(clearTimeout(o),t(!1)))})})}};var Or=class{constructor(){this.cache=new Map}initialize(){return p(this,null,function*(){})}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}setUserData(e,t){return p(this,null,function*(){this.setItem(e,t)})}removeItem(e){this.cache.delete(e)}getKeys(){let e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}};var vp=class{constructor(e){this.inMemoryCache=new Or,this.indexedDBCache=new yp,this.logger=e}handleDatabaseAccessError(e){if(e instanceof Bi&&e.errorCode===po)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}getItem(e){return p(this,null,function*(){let t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return t})}setItem(e,t){return p(this,null,function*(){this.inMemoryCache.setItem(e,t);try{yield this.indexedDBCache.setItem(e,t)}catch(r){this.handleDatabaseAccessError(r)}})}removeItem(e){return p(this,null,function*(){this.inMemoryCache.removeItem(e);try{yield this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}})}getKeys(){return p(this,null,function*(){let e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e})}containsKey(e){return p(this,null,function*(){let t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return t})}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){return p(this,null,function*(){try{this.logger.verbose("Deleting persistent keystore");let e=yield this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}})}};var Ga=(()=>{class n{constructor(t,r,o){this.logger=t,N_(o??!1),this.cache=new vp(this.logger),this.performanceClient=r}createNewGuid(){return je()}base64Encode(t){return mo(t)}base64Decode(t){return tt(t)}base64UrlEncode(t){return Du(t)}encodeKid(t){return this.base64UrlEncode(JSON.stringify({kid:t}))}getPublicKeyThumbprint(t){return p(this,null,function*(){let r=this.performanceClient?.startMeasurement(d.CryptoOptsGetPublicKeyThumbprint,t.correlationId),o=yield P_(n.EXTRACTABLE,n.POP_KEY_USAGES),i=yield op(o.publicKey),s={e:i.e,kty:i.kty,n:i.n},a=J_(s),c=yield this.hashString(a),l=yield op(o.privateKey),u=yield x_(l,!1,["sign"]);return yield this.cache.setItem(c,{privateKey:u,publicKey:o.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),r&&r.end({success:!0}),c})}removeTokenBindingKey(t){return p(this,null,function*(){if(yield this.cache.removeItem(t),yield this.cache.containsKey(t))throw E(He.bindingKeyNotRemoved)})}clearKeystore(){return p(this,null,function*(){this.cache.clearInMemory();try{return yield this.cache.clearPersistent(),!0}catch(t){return t instanceof Error?this.logger.error(`Clearing keystore failed with error: ${t.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}})}signJwt(t,r,o,i){return p(this,null,function*(){let s=this.performanceClient?.startMeasurement(d.CryptoOptsSignJwt,i),a=yield this.cache.getItem(r);if(!a)throw w(fo);let c=yield op(a.publicKey),l=J_(c),u=Du(JSON.stringify({kid:r})),h=Tu.getShrHeaderString(S(m({},o?.header),{alg:c.alg,kid:u})),g=Du(h);t.cnf={jwk:JSON.parse(l)};let f=Du(JSON.stringify(t)),C=`${g}.${f}`,_=new TextEncoder().encode(C),x=yield F_(a.privateKey,_),de=Qt(new Uint8Array(x)),ne=`${C}.${de}`;return s&&s.end({success:!0}),ne})}hashString(t){return p(this,null,function*(){return ip(t)})}}return n.POP_KEY_USAGES=["sign","verify"],n.EXTRACTABLE=!0,n})();function J_(n){return JSON.stringify(n,Object.keys(n).sort())}var m1=24*60*60*1e3,Cp={Lax:"Lax",None:"None"},qa=class{initialize(){return Promise.resolve()}getItem(e){let t=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){let i=r[o],[s,...a]=decodeURIComponent(i).trim().split("="),c=a.join("=");if(s===t)return c}return""}getUserData(){throw E(He.methodNotImplemented)}setItem(e,t,r,o=!0,i=Cp.Lax){let s=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=${i};`;if(r){let a=y1(r);s+=`expires=${a};`}(o||i===Cp.None)&&(s+="Secure;"),document.cookie=s}setUserData(){return p(this,null,function*(){return Promise.reject(E(He.methodNotImplemented))})}removeItem(e){this.setItem(e,"",-1)}getKeys(){let e=document.cookie.split(";"),t=[];return e.forEach(r=>{let o=decodeURIComponent(r).trim().split("=");t.push(o[0])}),t}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}};function y1(n){let e=new Date;return new Date(e.getTime()+n*m1).toUTCString()}function ji(n,e){let t=n.getItem(Ut(e));return t?JSON.parse(t):[]}function Vi(n,e,t){let r=e.getItem(Wn(n,t));if(r){let o=JSON.parse(r);if(o&&o.hasOwnProperty("idToken")&&o.hasOwnProperty("accessToken")&&o.hasOwnProperty("refreshToken"))return o}return{idToken:[],accessToken:[],refreshToken:[]}}function ku(n){return n.hasOwnProperty("id")&&n.hasOwnProperty("nonce")&&n.hasOwnProperty("data")}var Z_="msal.cache.encryption",v1="msal.broadcast.cache",Ep=class{constructor(e,t,r){if(!window.localStorage)throw za(yo);this.memoryStorage=new Or,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=r,this.broadcast=new BroadcastChannel(v1)}initialize(e){return p(this,null,function*(){let t=new qa,r=t.getItem(Z_),o={key:"",id:""};if(r)try{o=JSON.parse(r)}catch{}if(o.key&&o.id){let i=Ce(Kn,d.Base64Decode,this.logger,this.performanceClient,e)(o.key);this.encryptionCookie={id:o.id,key:yield y(fE,d.GenerateHKDF,this.logger,this.performanceClient,e)(i)}}else{let i=je(),s=yield y(hE,d.GenerateBaseKey,this.logger,this.performanceClient,e)(),a=Ce(Qt,d.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(s));this.encryptionCookie={id:i,key:yield y(fE,d.GenerateHKDF,this.logger,this.performanceClient,e)(s)};let c={id:i,key:a};t.setItem(Z_,JSON.stringify(c),0,!0,Cp.None)}yield y(this.importExistingCache.bind(this),d.ImportExistingCache,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0})}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw w(qn);return this.memoryStorage.getItem(e)}decryptData(e,t,r){return p(this,null,function*(){if(!this.initialized||!this.encryptionCookie)throw w(qn);if(t.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;let o=yield y(pE,d.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t.nonce,this.getContext(e),t.data);if(!o)return null;try{return JSON.parse(o)}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}})}setItem(e,t){window.localStorage.setItem(e,t)}setUserData(e,t,r,o){return p(this,null,function*(){if(!this.initialized||!this.encryptionCookie)throw w(qn);let{data:i,nonce:s}=yield y(H_,d.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t,this.getContext(e)),a={id:this.encryptionCookie.id,nonce:s,data:i,lastUpdatedAt:o};this.memoryStorage.setItem(e,t),this.setItem(e,JSON.stringify(a)),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),ji(this).forEach(r=>this.removeItem(r));let t=Vi(this.clientId,this);t.idToken.forEach(r=>this.removeItem(r)),t.accessToken.forEach(r=>this.removeItem(r)),t.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(ke)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}importExistingCache(e){return p(this,null,function*(){if(!this.encryptionCookie)return;let t=ji(this);t=yield this.importArray(t,e),t.length?this.setItem(Ut(),JSON.stringify(t)):this.removeItem(Ut());let r=Vi(this.clientId,this);r.idToken=yield this.importArray(r.idToken,e),r.accessToken=yield this.importArray(r.accessToken,e),r.refreshToken=yield this.importArray(r.refreshToken,e),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(Wn(this.clientId),JSON.stringify(r)):this.removeItem(Wn(this.clientId))})}getItemFromEncryptedCache(e,t){return p(this,null,function*(){if(!this.encryptionCookie)return null;let r=this.getItem(e);if(!r)return null;let o;try{o=JSON.parse(r)}catch{return null}return ku(o)?o.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):y(pE,d.Decrypt,this.logger,this.performanceClient,t)(this.encryptionCookie.key,o.nonce,this.getContext(e),o.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),o)})}importArray(e,t){return p(this,null,function*(){let r=[],o=[];return e.forEach(i=>{let s=this.getItemFromEncryptedCache(i,t).then(a=>{a?(this.memoryStorage.setItem(i,a),r.push(i)):this.removeItem(i)});o.push(s)}),yield Promise.all(o),r})}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");let t=this.performanceClient.startMeasurement(d.LocalStorageUpdated);t.add({isBackground:!0});let{key:r,value:o,context:i}=e.data;if(!r){this.logger.error("Broadcast event missing key"),t.end({success:!1,errorCode:"noKey"});return}if(i&&i!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${i}`),t.end({success:!1,errorCode:"contextMismatch"});return}o?(this.memoryStorage.setItem(r,o),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),t.end({success:!0})}};var Ip=class{constructor(){if(!window.sessionStorage)throw za(yo)}initialize(){return p(this,null,function*(){})}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}setUserData(e,t){return p(this,null,function*(){this.setItem(e,t)})}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}};var b={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};function EE(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Ka=class n extends Si{constructor(e,t,r,o,i,s,a){super(e,r,o,i,a),this.cacheConfig=t,this.logger=o,this.internalStorage=new Or,this.browserStorage=eb(e,t.cacheLocation,o,i),this.temporaryCacheStorage=eb(e,t.temporaryCacheLocation,o,i),this.cookieStorage=new qa,this.eventHandler=s}initialize(e){return p(this,null,function*(){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),yield this.browserStorage.initialize(e),yield this.migrateExistingCache(e),this.trackVersionChanges(e)})}migrateExistingCache(e){return p(this,null,function*(){let t=ji(this.browserStorage,0),r=Vi(this.clientId,this.browserStorage,0);this.performanceClient.addFields({oldAccountCount:t.length,oldAccessCount:r.accessToken.length,oldIdCount:r.idToken.length,oldRefreshCount:r.refreshToken.length},e);let o=ji(this.browserStorage,1),i=Vi(this.clientId,this.browserStorage,1);this.performanceClient.addFields({currAccountCount:o.length,currAccessCount:i.accessToken.length,currIdCount:i.idToken.length,currRefreshCount:i.refreshToken.length},e),yield Promise.all([this.updateV0ToCurrent(1,t,o,e),this.updateV0ToCurrent(1,r.idToken,i.idToken,e),this.updateV0ToCurrent(1,r.accessToken,i.accessToken,e),this.updateV0ToCurrent(1,r.refreshToken,i.refreshToken,e)]),t.length>0?this.browserStorage.setItem(Ut(0),JSON.stringify(t)):this.browserStorage.removeItem(Ut(0)),o.length>0?this.browserStorage.setItem(Ut(1),JSON.stringify(o)):this.browserStorage.removeItem(Ut(1)),this.setTokenKeys(r,e,0),this.setTokenKeys(i,e,1)})}updateV0ToCurrent(e,t,r,o){return p(this,null,function*(){let i=[];for(let s of[...t]){let a=this.browserStorage.getItem(s),c=this.validateAndParseJson(a||"");if(!c){EE(t,s);continue}c.lastUpdatedAt||(c.lastUpdatedAt=Date.now().toString(),this.setItem(s,JSON.stringify(c),o));let l=ku(c)?yield this.browserStorage.decryptData(s,c,o):c,u;if(l&&(_e.isAccessTokenEntity(l)||_e.isRefreshTokenEntity(l))&&(u=l.expiresOn),!l||Be.isCacheExpired(c.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)||u&&Be.isTokenExpired(u,Tl)){this.browserStorage.removeItem(s),EE(t,s),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},o);continue}if(this.cacheConfig.cacheLocation!==ue.LocalStorage||ku(c)){let h=`${ke}.${e}${pp}${s}`,g=this.browserStorage.getItem(h);if(g){let f=this.validateAndParseJson(g);if(Number(c.lastUpdatedAt)>Number(f.lastUpdatedAt)){i.push(this.setUserData(h,JSON.stringify(l),o,c.lastUpdatedAt).then(()=>{this.performanceClient.incrementFields({updatedCacheFromV0Count:1},o)}));continue}}else{i.push(this.setUserData(h,JSON.stringify(l),o,c.lastUpdatedAt).then(()=>{r.push(h),this.performanceClient.incrementFields({upgradedCacheCount:1},o)}));continue}}}return Promise.all(i)})}trackVersionChanges(e){let t=this.browserStorage.getItem(CE);t&&(this.logger.info(`MSAL.js was last initialized by version: ${t}`),this.performanceClient.addFields({previousLibraryVersion:t},e)),t!==Lt&&this.setItem(CE,Lt,e)}validateAndParseJson(e){if(!e)return null;try{let t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}}setItem(e,t,r){let o=0,i=[],s=20;for(let a=0;a<=s;a++)try{this.browserStorage.setItem(e,t),a>0&&(a<=o?this.removeAccessTokenKeys(i.slice(0,a),r,0):(this.removeAccessTokenKeys(i.slice(0,o),r,0),this.removeAccessTokenKeys(i.slice(o,a),r)));break}catch(c){let l=oa(c);if(l.errorCode===tu.cacheQuotaExceeded&&a<s){if(!i.length){let u=e===Wn(this.clientId,0)?JSON.parse(t).accessToken:this.getTokenKeys(0).accessToken,h=e===Wn(this.clientId)?JSON.parse(t).accessToken:this.getTokenKeys().accessToken;i=[...u,...h],o=u.length}if(i.length<=a)throw l;this.removeAccessToken(i[a],r,!1)}else throw l}}setUserData(e,t,r,o){return p(this,null,function*(){let i=0,s=[],a=20;for(let c=0;c<=a;c++)try{yield y(this.browserStorage.setUserData.bind(this.browserStorage),d.SetUserData,this.logger,this.performanceClient)(e,t,r,o),c>0&&(c<=i?this.removeAccessTokenKeys(s.slice(0,c),r,0):(this.removeAccessTokenKeys(s.slice(0,i),r,0),this.removeAccessTokenKeys(s.slice(i,c),r)));break}catch(l){let u=oa(l);if(u.errorCode===tu.cacheQuotaExceeded&&c<a){if(!s.length){let h=this.getTokenKeys(0).accessToken,g=this.getTokenKeys().accessToken;s=[...h,...g],i=h.length}if(s.length<=c)throw u;this.removeAccessToken(s[c],r,!1)}else throw u}})}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");let r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,t),null;let o=this.validateAndParseJson(r);return!o||!Ke.isAccountEntity(o)?null:Si.toObject(new Ke,o)}setAccount(e,t){return p(this,null,function*(){this.logger.trace("BrowserCacheManager.setAccount called");let r=this.generateAccountKey(e.getAccountInfo()),o=Date.now().toString();e.lastUpdatedAt=o,yield this.setUserData(r,JSON.stringify(e),t,o);let i=this.addAccountKeyToMap(r,t);this.cacheConfig.cacheLocation===ue.LocalStorage&&i&&this.eventHandler.emitEvent(b.ACCOUNT_ADDED,void 0,e.getAccountInfo())})}getAccountKeys(){return ji(this.browserStorage)}addAccountKeyToMap(e,t){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);let r=this.getAccountKeys();return r.indexOf(e)===-1?(r.push(e),this.setItem(Ut(),JSON.stringify(r),t),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,t){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);let r=this.getAccountKeys(),o=r.indexOf(e);if(o>-1){if(r.splice(o,1),r.length===0){this.removeItem(Ut());return}else this.setItem(Ut(),JSON.stringify(r),t);this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,t){let r=this.getActiveAccount(t);r?.homeAccountId===e.homeAccountId&&r?.environment===e.environment&&this.setActiveAccount(null,t),super.removeAccount(e,t),this.removeAccountKeyFromMap(this.generateAccountKey(e),t),this.browserStorage.getKeys().forEach(o=>{o.includes(e.homeAccountId)&&o.includes(e.environment)&&this.browserStorage.removeItem(o)}),this.cacheConfig.cacheLocation===ue.LocalStorage&&this.eventHandler.emitEvent(b.ACCOUNT_REMOVED,void 0,e)}removeIdToken(e,t){super.removeIdToken(e,t);let r=this.getTokenKeys(),o=r.idToken.indexOf(e);o>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(o,1),this.setTokenKeys(r,t))}removeAccessToken(e,t,r=!0){super.removeAccessToken(e,t),r&&this.removeAccessTokenKeys([e],t)}removeAccessTokenKeys(e,t,r=1){this.logger.trace("removeAccessTokenKey called");let o=this.getTokenKeys(r),i=0;if(e.forEach(s=>{let a=o.accessToken.indexOf(s);a>-1&&(o.accessToken.splice(a,1),i++)}),i>0){this.logger.info(`removed ${i} accessToken keys from tokenKeys map`),this.setTokenKeys(o,t,r);return}}removeRefreshToken(e,t){super.removeRefreshToken(e,t);let r=this.getTokenKeys(),o=r.refreshToken.indexOf(e);o>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(o,1),this.setTokenKeys(r,t))}getTokenKeys(e=1){return Vi(this.clientId,this.browserStorage,e)}setTokenKeys(e,t,r=1){if(e.idToken.length===0&&e.accessToken.length===0&&e.refreshToken.length===0){this.removeItem(Wn(this.clientId,r));return}else this.setItem(Wn(this.clientId,r),JSON.stringify(e),t)}getIdTokenCredential(e,t){let r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,t),null;let o=this.validateAndParseJson(r);return!o||!_e.isIdTokenEntity(o)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),o)}setIdTokenCredential(e,t){return p(this,null,function*(){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");let r=this.generateCredentialKey(e),o=Date.now().toString();e.lastUpdatedAt=o,yield this.setUserData(r,JSON.stringify(e),t,o);let i=this.getTokenKeys();i.idToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),i.idToken.push(r),this.setTokenKeys(i,t))})}getAccessTokenCredential(e,t){let r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],t),null;let o=this.validateAndParseJson(r);return!o||!_e.isAccessTokenEntity(o)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),o)}setAccessTokenCredential(e,t){return p(this,null,function*(){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");let r=this.generateCredentialKey(e),o=Date.now().toString();e.lastUpdatedAt=o,yield this.setUserData(r,JSON.stringify(e),t,o);let i=this.getTokenKeys(),s=i.accessToken.indexOf(r);s!==-1&&i.accessToken.splice(s,1),this.logger.trace(`access token ${s===-1?"added to":"updated in"} map`),i.accessToken.push(r),this.setTokenKeys(i,t)})}getRefreshTokenCredential(e,t){let r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,t),null;let o=this.validateAndParseJson(r);return!o||!_e.isRefreshTokenEntity(o)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),o)}setRefreshTokenCredential(e,t){return p(this,null,function*(){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");let r=this.generateCredentialKey(e),o=Date.now().toString();e.lastUpdatedAt=o,yield this.setUserData(r,JSON.stringify(e),t,o);let i=this.getTokenKeys();i.refreshToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),i.refreshToken.push(r),this.setTokenKeys(i,t))})}getAppMetadata(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!_e.isAppMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e,t){this.logger.trace("BrowserCacheManager.setAppMetadata called");let r=_e.generateAppMetadataKey(e);this.setItem(r,JSON.stringify(e),t)}getServerTelemetry(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!_e.isServerTelemetryEntity(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,t,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t),r)}getAuthorityMetadata(e){let t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;let r=this.validateAndParseJson(t);return r&&_e.isAuthorityMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem(wu.WRAPPER_SKU,e),this.internalStorage.setItem(wu.WRAPPER_VER,t)}getWrapperMetadata(){let e=this.internalStorage.getItem(wu.WRAPPER_SKU)||v.EMPTY_STRING,t=this.internalStorage.getItem(wu.WRAPPER_VER)||v.EMPTY_STRING;return[e,t]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(e){let t=this.generateCacheKey(vf.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(t);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;let o=this.validateAndParseJson(r);return o?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:o.homeAccountId,localAccountId:o.localAccountId,tenantId:o.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,t){let r=this.generateCacheKey(vf.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");let o={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:Be.nowSeconds().toString()};this.setItem(r,JSON.stringify(o),t)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(b.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!_e.isThrottlingEntity(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,t,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t),r)}getTemporaryCache(e,t){let r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){let i=this.cookieStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}let o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===ue.LocalStorage){let i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,t,r){let o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(t=>{(t.indexOf(ke)!==-1||t.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(t)}),this.browserStorage.getKeys().forEach(t=>{(t.indexOf(ke)!==-1||t.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(t)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(d.ClearTokensAndKeysWithClaims,e);let t=this.getTokenKeys(),r=0;t.accessToken.forEach(o=>{let i=this.getAccessTokenCredential(o,e);i?.requestedClaimsHash&&o.includes(i.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(o,e),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return le.startsWith(e,ke)?e:`${ke}.${this.clientId}.${e}`}generateCredentialKey(e){let t=e.credentialType===Me.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==z.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${ke}.${1}`,e.homeAccountId,e.environment,e.credentialType,t,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join(pp).toLowerCase()}generateAccountKey(e){let t=e.homeAccountId.split(".")[1];return[`${ke}.${1}`,e.homeAccountId,e.environment,t||e.tenantId||""].join(pp).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(Ie.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Ie.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(Ie.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Ie.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Ie.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");let r=mo(JSON.stringify(e));if(this.setTemporaryCache(Ie.REQUEST_PARAMS,r,!0),t){let o=mo(t);this.setTemporaryCache(Ie.VERIFIER,o,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");let e=this.getTemporaryCache(Ie.REQUEST_PARAMS,!0);if(!e)throw w(Aa);let t=this.getTemporaryCache(Ie.VERIFIER,!0),r,o="";try{r=JSON.parse(tt(e)),t&&(o=tt(t))}catch(i){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${i}`),w(Da)}return[r,o]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");let e=this.getTemporaryCache(Ie.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;let t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){let t=this.getInteractionInProgress()?.clientId;return e?t===this.clientId:!!t}getInteractionInProgress(){let e=`${ke}.${Ie.INTERACTION_STATUS_KEY}`,t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),_u(window),null}}setInteractionInProgress(e,t=hn.SIGNIN){let r=`${ke}.${Ie.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw w(ya);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:t}),!1)}else!e&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(r)}hydrateCache(e,t){return p(this,null,function*(){let r=_e.createIdTokenEntity(e.account?.homeAccountId,e.account?.environment,e.idToken,this.clientId,e.tenantId),o;t.claims&&(o=yield this.cryptoImpl.hashString(t.claims));let i=_e.createAccessTokenEntity(e.account?.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?Be.toSecondsFromDate(e.expiresOn):0,e.extExpiresOn?Be.toSecondsFromDate(e.extExpiresOn):0,tt,void 0,e.tokenType,void 0,t.sshKid,t.claims,o),s={idToken:r,accessToken:i};return this.saveCacheRecord(s,e.correlationId)})}saveCacheRecord(e,t,r){return p(this,null,function*(){try{yield Lp(n.prototype,this,"saveCacheRecord").call(this,e,t,r)}catch(o){if(o instanceof so&&this.performanceClient&&t)try{let i=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:i.refreshToken.length,cacheIdCount:i.idToken.length,cacheAtCount:i.accessToken.length},t)}catch{}throw o}})}};function eb(n,e,t,r){try{switch(e){case ue.LocalStorage:return new Ep(n,t,r);case ue.SessionStorage:return new Ip;case ue.MemoryStorage:default:break}}catch(o){t.error(o)}return new Or}var tb=(n,e,t,r)=>{let o={cacheLocation:ue.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:ue.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new Ka(n,o,no,e,t,r)};function nb(n,e,t,r,o){return n.verbose("getAllAccounts called"),t?e.getAllAccounts(o||{},r):[]}function rb(n,e,t,r){let o=t.getAccountInfoFilteredBy(n,r);return o?(e.verbose("getAccount: Account matching provided filter found, returning"),o):(e.verbose("getAccount: No matching account found, returning null"),null)}function ob(n,e,t,r){if(e.trace("getAccountByUsername called"),!n)return e.warning("getAccountByUsername: No username provided"),null;let o=t.getAccountInfoFilteredBy({username:n},r);return o?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${n}`),o):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function ib(n,e,t,r){if(e.trace("getAccountByHomeId called"),!n)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;let o=t.getAccountInfoFilteredBy({homeAccountId:n},r);return o?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${n}`),o):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function sb(n,e,t,r){if(e.trace("getAccountByLocalId called"),!n)return e.warning("getAccountByLocalId: No localAccountId provided"),null;let o=t.getAccountInfoFilteredBy({localAccountId:n},r);return o?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${n}`),o):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function ab(n,e,t){e.setActiveAccount(n,t)}function cb(n,e){return n.getActiveAccount(e)}var C1="msal.broadcast.event",Tp=class{constructor(e){this.eventCallbacks=new Map,this.logger=e||new ct({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(C1)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,r){if(typeof window<"u"){let o=r||yE();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,r,o){let i={eventType:e,interactionType:t||null,payload:r||null,error:o||null,timestamp:Date.now()};switch(e){case b.ACCOUNT_ADDED:case b.ACCOUNT_REMOVED:case b.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(i);break;default:this.invokeCallbacks(i);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([t,r],o)=>{(r.length===0||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${o}: ${e.eventType}`),t.apply(null,[e]))})}invokeCrossTabCallbacks(e){let t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}};var Wa=class{constructor(e,t,r,o,i,s,a,c,l){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.platformAuthProvider=c,this.correlationId=l||je(),this.logger=o.clone(Ee.MSAL_SKU,Lt,this.correlationId),this.performanceClient=a}clearCacheOnLogout(e,t){return p(this,null,function*(){if(t)try{this.browserStorage.removeAccount(t,e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),yield this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})}getRedirectUri(e){this.logger.verbose("getRedirectUri called");let t=e||this.config.auth.redirectUri;return j.getAbsoluteUrl(t,ht())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");let r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new xi(r,this.browserStorage)}getDiscoveredAuthority(e){return p(this,null,function*(){let{account:t}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(d.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);let o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},i=e.requestAuthority||this.config.auth.authority,s=r?.length?r==="true":this.config.auth.instanceAware,a=t&&s?this.config.auth.authority.replace(j.getDomainFromUrl(i),t.environment):i,c=Wt.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),l=yield y(Hf.createDiscoveredInstance,d.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(c,this.config.system.networkClient,this.browserStorage,o,this.logger,this.correlationId,this.performanceClient);if(t&&!l.isAlias(t.environment))throw Q(lt.authorityMismatch);return l})}};function Nu(n,e,t,r){return p(this,null,function*(){t.addQueueMeasurement(d.InitializeBaseRequest,n.correlationId);let o=n.authority||e.auth.authority,i=[...n&&n.scopes||[]],s=S(m({},n),{correlationId:n.correlationId,authority:o,scopes:i});if(!s.authenticationScheme)s.authenticationScheme=z.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(s.authenticationScheme===z.SSH){if(!n.sshJwk)throw Q(lt.missingSshJwk);if(!n.sshKid)throw Q(lt.missingSshKid)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&n.claims&&!le.isEmptyObj(n.claims)&&(s.requestedClaimsHash=yield ip(n.claims)),s})}function lb(n,e,t,r,o){return p(this,null,function*(){r.addQueueMeasurement(d.InitializeSilentRequest,n.correlationId);let i=yield y(Nu,d.InitializeBaseRequest,o,r,n.correlationId)(n,t,r,o);return S(m(m({},n),i),{account:e,forceRefresh:n.forceRefresh||!1})})}function wp(n,e){let t,r=n.httpMethod;if(e===he.EAR){if(t=r||Kt.POST,t!==Kt.POST)throw Q(lt.invalidRequestMethodForEAR)}else t=r||Kt.GET;if(n.authorizePostBodyParameters&&t!==Kt.POST)throw Q(lt.invalidAuthorizePostBodyParameters);return t}var bt=class extends Wa{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);let t=m({correlationId:this.correlationId||je()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){let r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=j.getAbsoluteUrl(e.postLogoutRedirectUri,ht())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=j.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,ht())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=j.getAbsoluteUrl(ht(),ht())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId),t}getLogoutHintFromIdTokenClaims(e){let t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(e){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(d.StandardInteractionClientCreateAuthCodeClient,this.correlationId);let t=yield y(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new Pi(t,this.performanceClient)})}getClientConfiguration(e){return p(this,null,function*(){let{serverTelemetryManager:t,requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}=e;this.performanceClient.addQueueMeasurement(d.StandardInteractionClientGetClientConfiguration,this.correlationId);let a=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:Ee.MSAL_SKU,version:Lt,cpu:v.EMPTY_STRING,os:v.EMPTY_STRING},telemetry:this.config.telemetry}})}initializeAuthorizationRequest(e,t){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(d.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);let r=this.getRedirectUri(e.redirectUri),o={interactionType:t},i=un.setRequestState(this.browserCrypto,e&&e.state||v.EMPTY_STRING,o),s=yield y(Nu,d.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(S(m({},e),{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),a=S(m({},s),{redirectUri:r,state:i,nonce:e.nonce||je(),responseMode:this.config.auth.OIDCOptions.serverResponseType}),c=S(m({},a),{httpMethod:wp(a,this.config.auth.protocolMode)});if(e.loginHint||e.sid)return c;let l=e.account||this.browserStorage.getActiveAccount(this.correlationId);return l&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${l.homeAccountId}`,this.correlationId),c.account=l),c})}};function ub(n,e){if(!e)return null;try{return un.parseRequestState(n,e).libraryState.meta}catch{throw E(He.invalidState)}}function zi(n,e,t){let r=Ln.getDeserializedResponse(n);if(!r)throw Ln.stripLeadingHashOrQuery(n)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${n}`),w(pa)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),w(fa));return r}function db(n,e,t){if(!n.state)throw w(ho);let r=ub(e,n.state);if(!r)throw w(ga);if(r.interactionType!==t)throw w(ma)}var Qa=class{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}handleCodeResponse(e,t){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(d.HandleCodeResponse,t.correlationId);let r;try{r=jn.getAuthorizationCodePayload(e,t.state)}catch(o){throw o instanceof Dt&&o.subError===fn?w(fn):o}return y(this.handleCodeResponseFromServer.bind(this),d.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)(r,t)})}handleCodeResponseFromServer(e,t,r=!0){return p(this,null,function*(){if(this.performanceClient.addQueueMeasurement(d.HandleCodeResponseFromServer,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&(yield y(this.authModule.updateAuthority.bind(this.authModule),d.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId)),r&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{let i=this.createCcsCredentials(t);i&&(this.authCodeRequest.ccsCredential=i)}return yield y(this.authModule.acquireToken.bind(this.authModule),d.AuthClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)})}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:et.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:et.UPN}:null}};var hb="ContentError",Sp="user_switch";var fb="USER_INTERACTION_REQUIRED",pb="USER_CANCEL",gb="NO_NETWORK",mb="DISABLED",yb="ACCOUNT_UNAVAILABLE",vb="UX_NOT_ALLOWED";var E1=-2147186943,I1={[Sp]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."},Yt=class n extends P{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,n.prototype),this.name="NativeAuthError",this.ext=r}};function vo(n){if(n.ext&&n.ext.status&&n.ext.status===mb||n.ext&&n.ext.error&&n.ext.error===E1)return!0;switch(n.errorCode){case hb:return!0;default:return!1}}function Gi(n,e,t){if(t&&t.status)switch(t.status){case yb:return Oi(Bn.nativeAccountUnavailable);case fb:return new ze(n,e);case pb:return w(fn);case gb:return w(kr);case vb:return Oi(Bn.uxNotAllowed)}return new Yt(n,I1[n]||e,t)}var Ya=class extends bt{acquireToken(e){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(d.SilentCacheClientAcquireToken,e.correlationId);let t=this.initializeServerTelemetryManager(ee.acquireTokenSilent_silentFlow),r=yield y(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),o=new Iu(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{let s=(yield y(o.acquireCachedToken.bind(o),d.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),s}catch(i){throw i instanceof Bi&&i.errorCode===fo&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),i}})}logout(e){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t.correlationId,t?.account)}};var Co=class extends Wa{constructor(e,t,r,o,i,s,a,c,l,u,h,g){super(e,t,r,o,i,s,c,l,g),this.apiId=a,this.accountId=u,this.platformAuthProvider=l,this.nativeStorageManager=h,this.silentCacheClient=new Ya(e,this.nativeStorageManager,r,o,i,s,c,l,g);let f=this.platformAuthProvider.getExtensionName();this.skus=xi.makeExtraSkuString({libraryName:Ee.MSAL_SKU,libraryVersion:Lt,extensionName:f,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=S(m({},e.extraParameters),{[Ar.X_CLIENT_EXTRA_SKU]:this.skus})}acquireToken(e,t){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(d.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");let r=this.performanceClient.startMeasurement(d.NativeInteractionClientAcquireToken,this.correlationId),o=Be.nowSeconds(),i=this.initializeServerTelemetryManager(this.apiId);try{let s=yield this.initializeNativeRequest(e);try{let c=yield this.acquireTokensFromCache(this.accountId,s);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),c}catch(c){if(t===Ge.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),c;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}let a=yield this.platformAuthProvider.sendMessage(s);return yield this.handleNativeResponse(a,s,o).then(c=>(r.end({success:!0,isNativeBroker:!0,requestId:c.requestId}),i.clearNativeBrokerErrorCode(),c)).catch(c=>{throw r.end({success:!1,errorCode:c.errorCode,subErrorCode:c.subError}),c})}catch(s){throw s instanceof Yt&&i.setNativeBrokerErrorCode(s.errorCode),r.end({success:!1}),s}})}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:ve.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}acquireTokensFromCache(e,t){return p(this,null,function*(){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),E(He.noAccountFound);let r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!r)throw E(He.noAccountFound);try{let o=this.createSilentCacheRequest(t,r),i=yield this.silentCacheClient.acquireToken(o),s=S(m({},r),{idTokenClaims:i?.idTokenClaims,idToken:i?.idToken});return S(m({},i),{account:s})}catch(o){throw o}})}acquireTokenRedirect(e,t){return p(this,null,function*(){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");let r=pn(e,[]);delete r.onRedirectNavigate;let o=yield this.initializeNativeRequest(r);try{yield this.platformAuthProvider.sendMessage(o)}catch(a){if(a instanceof Yt&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(a.errorCode),vo(a)))throw a}this.browserStorage.setTemporaryCache(Ie.NATIVE_REQUEST,JSON.stringify(o),!0);let i={apiId:ee.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},s=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),yield this.navigationClient.navigateExternal(s,i)})}handleRedirectPromise(e,t){return p(this,null,function*(){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;let a=r,{prompt:o}=a,i=pn(a,["prompt"]);o&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Ie.NATIVE_REQUEST));let s=Be.nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");let c=yield this.platformAuthProvider.sendMessage(i),l=yield this.handleNativeResponse(c,i,s);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),e&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),l}catch(c){throw c}})}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(e,t,r){return p(this,null,function*(){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");let o=ra.extractTokenClaims(e.id_token,tt),i=this.createHomeAccountIdentifier(e,o),s=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId},this.correlationId)?.homeAccountId;if(t.extraParameters?.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(i!==s&&e.account.id!==t.accountId)throw Gi(Sp);let a=yield this.getDiscoveredAuthority({requestAuthority:t.authority}),c=da(this.browserStorage,a,i,tt,this.correlationId,o,e.client_info,void 0,o.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);let l=yield this.generateAuthenticationResult(e,t,o,c,a.canonicalAuthority,r);return yield this.cacheAccount(c,this.correlationId),yield this.cacheNativeTokens(e,t,i,o,e.access_token,l.tenantId,r),l})}createHomeAccountIdentifier(e,t){return Ke.generateHomeAccountId(e.client_info||v.EMPTY_STRING,ut.Default,this.logger,this.browserCrypto,t)}generateScopes(e,t){return t?ve.fromString(t):ve.fromString(e)}generatePopAccessToken(e,t){return p(this,null,function*(){if(t.tokenType===z.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;let r=new _t(this.browserCrypto),o={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw E(He.keyIdMissing);return r.signPopToken(e.access_token,t.keyId,o)}else return e.access_token})}generateAuthenticationResult(e,t,r,o,i,s){return p(this,null,function*(){let a=this.addTelemetryFromNativeResponse(e.properties.MATS),c=this.generateScopes(t.scope,e.scope),l=e.account.properties||{},u=l.UID||r.oid||r.sub||v.EMPTY_STRING,h=l.TenantId||r.tid||v.EMPTY_STRING,g=wi(o.getAccountInfo(),void 0,r,e.id_token);g.nativeAccountId!==e.account.id&&(g.nativeAccountId=e.account.id);let f=yield this.generatePopAccessToken(e,t),C=t.tokenType===z.POP?z.POP:z.BEARER;return{authority:i,uniqueId:u,tenantId:h,scopes:c.asArray(),account:g,idToken:e.id_token,idTokenClaims:r,accessToken:f,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:Be.toDateFromSeconds(s+e.expires_in),tokenType:C,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}})}cacheAccount(e,t){return p(this,null,function*(){yield this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e.getAccountInfo(),t)})}cacheNativeTokens(e,t,r,o,i,s,a){let c=_e.createIdTokenEntity(r,t.authority,e.id_token||"",t.clientId,o.tid||""),l=t.tokenType===z.POP?v.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,u=a+l,h=this.generateScopes(e.scope,t.scope),g=_e.createAccessTokenEntity(r,t.authority,i,t.clientId,o.tid||s,h.printScopes(),u,0,tt,void 0,t.tokenType,void 0,t.keyId),f={idToken:c,accessToken:g};return this.nativeStorageManager.saveCacheRecord(f,this.correlationId,t.storeInCache)}getExpiresInValue(e,t){return e===z.POP?v.SHR_NONCE_VALIDITY:(typeof t=="string"?parseInt(t,10):t)||0}addTelemetryFromNativeResponse(e){let t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}initializeNativeRequest(e){return p(this,null,function*(){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");let t=yield this.getCanonicalAuthority(e),a=e,{scopes:r}=a,o=pn(a,["scopes"]),i=new ve(r||[]);i.appendScopes(xt);let s=S(m({},o),{accountId:this.accountId,clientId:this.config.auth.clientId,authority:t.urlString,scope:i.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:m(m({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(s.signPopToken&&e.popKid)throw w(Ua);if(this.handleExtraBrokerParams(s),s.extraParameters=s.extraParameters||{},s.extraParameters.telemetry=dt.MATS_TELEMETRY,e.authenticationScheme===z.POP){let c={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},l=new _t(this.browserCrypto),u;if(s.keyId)u=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:s.keyId})),s.signPopToken=!1;else{let h=yield y(l.generateCnf.bind(l),d.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(c,this.logger);u=h.reqCnfString,s.keyId=h.kid,s.signPopToken=!0}s.reqCnf=u}return this.addRequestSKUs(s),s})}getCanonicalAuthority(e){return p(this,null,function*(){let t=e.authority||this.config.auth.authority;e.account&&(yield this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}));let r=new j(t);return r.validateAsUri(),r})}getPrompt(e){switch(this.apiId){case ee.ssoSilent:case ee.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),Re.NONE}if(!e){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e){case Re.NONE:case Re.CONSENT:case Re.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),w(Fa)}}handleExtraBrokerParams(e){let t=e.extraParameters&&e.extraParameters.hasOwnProperty(Ar.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(Ar.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(Ar.CLIENT_ID);if(!e.embeddedClientId&&!t)return;let r="",o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[Ar.BROKER_REDIRECT_URI],r=e.extraParameters[Ar.CLIENT_ID]),e.extraParameters={child_client_id:r,child_redirect_uri:o},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:o},this.correlationId)}};function IE(n,e,t,r,o){return p(this,null,function*(){let i=jn.getStandardAuthorizeRequestParameters(S(m({},n.auth),{authority:e}),t,r,o);if($e.addLibraryInfo(i,{sku:Ee.MSAL_SKU,version:Lt,os:"",cpu:""}),n.auth.protocolMode!==he.OIDC&&$e.addApplicationTelemetry(i,n.telemetry.application),t.platformBroker&&($e.addNativeBroker(i),o.addFields({isPlatformAuthorizeRequest:!0},t.correlationId),t.authenticationScheme===z.POP)){let s=new Ga(r,o),a=new _t(s),c;t.popKid?c=s.encodeKid(t.popKid):c=(yield y(a.generateCnf.bind(a),d.PopTokenGenerateCnf,r,o,t.correlationId)(t,r)).reqCnfString,$e.addPopToken(i,c)}return $e.instrumentBrokerParams(i,t.correlationId,o),i})}function Ja(n,e,t,r,o){return p(this,null,function*(){if(!t.codeChallenge)throw Q(lt.pkceParamsMissing);let i=yield y(IE,d.GetStandardParams,r,o,t.correlationId)(n,e,t,r,o);return $e.addResponseType(i,Cl.CODE),$e.addCodeChallengeParams(i,t.codeChallenge,v.S256_CODE_CHALLENGE_METHOD),$e.addExtraQueryParameters(i,t.extraQueryParameters||{}),jn.getAuthorizeUrl(e,i,n.auth.encodeExtraQueryParams,t.extraQueryParameters)})}function Za(n,e,t,r,o,i){return p(this,null,function*(){if(!r.earJwk)throw w(Su);let s=yield IE(e,t,r,o,i);$e.addResponseType(s,Cl.IDTOKEN_TOKEN_REFRESHTOKEN),$e.addEARParameters(s,r.earJwk);let a=new Map;$e.addExtraQueryParameters(a,r.extraQueryParameters||{});let c=jn.getAuthorizeUrl(t,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return Cb(n,c,s)})}function Xa(n,e,t,r,o,i){return p(this,null,function*(){let s=yield IE(e,t,r,o,i);$e.addResponseType(s,Cl.CODE),$e.addCodeChallengeParams(s,r.codeChallenge,r.codeChallengeMethod||v.S256_CODE_CHALLENGE_METHOD),$e.addPostBodyParameters(s,r.authorizePostBodyParameters||{});let a=new Map;$e.addExtraQueryParameters(a,r.extraQueryParameters||{});let c=jn.getAuthorizeUrl(t,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return Cb(n,c,s)})}function Cb(n,e,t){let r=n.createElement("form");return r.method="post",r.action=e,t.forEach((o,i)=>{let s=n.createElement("input");s.hidden=!0,s.name=i,s.value=o,r.appendChild(s)}),n.body.appendChild(r),r}function Eb(n,e,t,r,o,i,s,a,c,l){return p(this,null,function*(){if(a.verbose("Account id found, calling WAM for token"),!l)throw w(go);let u=new Ga(a,c),h=new Co(r,o,u,a,s,r.system.navigationClient,t,c,l,e,i,n.correlationId),{userRequestState:g}=un.parseRequestState(u,n.state);return y(h.acquireToken.bind(h),d.NativeInteractionClientAcquireToken,a,c,n.correlationId)(S(m({},n),{state:g,prompt:void 0}))})}function qi(n,e,t,r,o,i,s,a,c,l,u,h){return p(this,null,function*(){if(Mr.removeThrottle(s,o.auth.clientId,n),e.accountId)return y(Eb,d.HandleResponsePlatformBroker,l,u,n.correlationId)(n,e.accountId,r,o,s,a,c,l,u,h);let g=S(m({},n),{code:e.code||"",codeVerifier:t}),f=new Qa(i,s,g,l,u);return yield y(f.handleCodeResponse.bind(f),d.HandleCodeResponse,l,u,n.correlationId)(e,n)})}function ec(n,e,t,r,o,i,s,a,c,l,u){return p(this,null,function*(){if(Mr.removeThrottle(i,r.auth.clientId,n),jn.validateAuthorizationResponse(e,n.state),!e.ear_jwe)throw w(Qf);if(!n.earJwk)throw w(Su);let h=JSON.parse(yield y(L_,d.DecryptEarResponse,c,l,n.correlationId)(n.earJwk,e.ear_jwe));if(h.accountId)return y(Eb,d.HandleResponsePlatformBroker,c,l,n.correlationId)(n,h.accountId,t,r,i,s,a,c,l,u);let g=new dn(r.auth.clientId,i,new Ga(c,l),c,null,null,l);g.validateTokenResponse(h);let f={code:"",state:n.state,nonce:n.nonce,client_info:h.client_info,cloud_graph_host_name:h.cloud_graph_host_name,cloud_instance_host_name:h.cloud_instance_host_name,cloud_instance_name:h.cloud_instance_name,msgraph_host:h.msgraph_host};return yield y(g.handleServerTokenResponse.bind(g),d.HandleServerTokenResponse,c,l,n.correlationId)(h,o,Be.nowSeconds(),n,f,void 0,void 0,void 0,void 0)})}var T1=32;function Eo(n,e,t){return p(this,null,function*(){n.addQueueMeasurement(d.GeneratePkceCodes,t);let r=Ce(w1,d.GenerateCodeVerifier,e,n,t)(n,e,t),o=yield y(S1,d.GenerateCodeChallengeFromVerifier,e,n,t)(r,n,e,t);return{verifier:r,challenge:o}})}function w1(n,e,t){try{let r=new Uint8Array(T1);return Ce(O_,d.GetRandomValues,e,n,t)(r),Qt(r)}catch{throw w(Fi)}}function S1(n,e,t,r){return p(this,null,function*(){e.addQueueMeasurement(d.GenerateCodeChallengeFromVerifier,r);try{let o=yield y(dE,d.Sha256Digest,t,e,r)(n,e,r);return Qt(new Uint8Array(o))}catch{throw w(Fi)}})}var Ap=class n{constructor(e,t,r,o){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(d.NativeMessageHandlerHandshake),this.platformAuthType=dt.PLATFORM_EXTENSION_PROVIDER}sendMessage(e){return p(this,null,function*(){this.logger.trace(this.platformAuthType+" - sendMessage called.");let t={method:ha.GetToken,request:e},r={channel:dt.CHANNEL_ID,extensionId:this.extensionId,responseId:je(),body:t};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);let o=yield new Promise((s,a)=>{this.resolvers.set(r.responseId,{resolve:s,reject:a})});return this.validatePlatformBrokerResponse(o)})}static createProvider(e,t,r){return p(this,null,function*(){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{let o=new n(e,t,r,dt.PREFERRED_EXTENSION_ID);return yield o.sendHandshakeRequest(),o}catch{let i=new n(e,t,r);return yield i.sendHandshakeRequest(),i}})}sendHandshakeRequest(){return p(this,null,function*(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);let e={channel:dt.CHANNEL_ID,extensionId:this.extensionId,responseId:je(),body:{method:ha.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=t=>{this.onChannelMessage(t)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(w(Pa)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;let t=e.data;if(!(!t.channel||t.channel!==dt.CHANNEL_ID)&&!(t.extensionId&&t.extensionId!==this.extensionId)&&t.body.method===ha.HandshakeRequest){let r=this.handshakeResolvers.get(t.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${t.responseId}`);return}this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(w(xa))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");let t=e.data,r=this.resolvers.get(t.responseId),o=this.handshakeResolvers.get(t.responseId);try{let i=t.body.method;if(i===ha.Response){if(!r)return;let s=t.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(s)}`),s.status!=="Success")r.reject(Gi(s.code,s.description,s.ext));else if(s.result)s.result.code&&s.result.description?r.reject(Gi(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result);else throw ea(Yr.unexpectedError,"Event does not contain result.");this.resolvers.delete(t.responseId)}else if(i===ha.HandshakeResponse){if(!o){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${t.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw ea(Yr.unexpectedError,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===dt.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}};var Dp=class n{constructor(e,t,r){this.logger=e,this.performanceClient=t,this.correlationId=r,this.platformAuthType=dt.PLATFORM_DOM_PROVIDER}static createProvider(e,t,r){return p(this,null,function*(){if(e.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication&&(yield window.navigator.platformAuthentication.getSupportedContracts(dt.MICROSOFT_ENTRA_BROKERID))?.includes(dt.PLATFORM_DOM_APIS))return e.trace("Platform auth api available in DOM"),new n(e,t,r)})}getExtensionId(){return dt.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return dt.DOM_API_NAME}sendMessage(e){return p(this,null,function*(){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{let t=this.initializePlatformDOMRequest(e),r=yield window.navigator.platformAuthentication.executeGetToken(t);return this.validatePlatformBrokerResponse(r)}catch(t){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),t}})}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");let I=e,{accountId:t,clientId:r,authority:o,scope:i,redirectUri:s,correlationId:a,state:c,storeInCache:l,embeddedClientId:u,extraParameters:h}=I,g=pn(I,["accountId","clientId","authority","scope","redirectUri","correlationId","state","storeInCache","embeddedClientId","extraParameters"]),f=this.getDOMExtraParams(g);return{accountId:t,brokerId:this.getExtensionId(),authority:o,clientId:r,correlationId:a||this.correlationId,extraParameters:m(m({},h),f),isSecurityTokenService:!1,redirectUri:s,scope:i,state:c,storeInCache:l,embeddedClientId:u}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){let t=e;if(t.isSuccess===!1&&t.error&&t.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),Gi(t.error.code,t.error.description,{error:parseInt(t.error.errorCode),protocol_error:t.error.protocolError,status:t.error.status,properties:t.error.properties})}}throw ea(Yr.unexpectedError,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){let t=Object.entries(e).reduce((o,[i,s])=>(o[i]=String(s),o),{});return m({},t)}};function Ib(n,e,t,r){return p(this,null,function*(){n.trace("getPlatformAuthProvider called",t);let o=A1();n.trace("Has client allowed platform auth via DOM API: "+o);let i;try{o&&(i=yield Dp.createProvider(n,e,t)),i||(n.trace("Platform auth via DOM API not available, checking for extension"),i=yield Ap.createProvider(n,r||vE,e))}catch(s){n.trace("Platform auth not available",s)}return i})}function A1(){let n;try{return n=window[ue.SessionStorage],n?.getItem(Y_)==="true"}catch{return!1}}function Pr(n,e,t,r){if(e.trace("isPlatformAuthAllowed called"),!n.system.allowPlatformBroker)return e.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!t)return e.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case z.BEARER:case z.POP:return e.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return e.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}var _p=class extends bt{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c,this.eventHandler=i}acquireToken(e,t){let r;try{if(r={popupName:this.generatePopupName(e.scopes||xt,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,t);{let i=S(m({},e),{httpMethod:wp(e,this.config.auth.protocolMode)});return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(i,r,t)}}catch(o){return Promise.reject(o)}}logout(e){try{this.logger.verbose("logoutPopup called");let t=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(t,r,o,i))}catch(t){return Promise.reject(t)}}acquireTokenPopupAsync(e,t,r){return p(this,null,function*(){this.logger.verbose("acquireTokenPopupAsync called");let o=yield y(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,k.Popup);t.popup&&Mu(o.authority);let i=Pr(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return o.platformBroker=i,this.config.auth.protocolMode===he.EAR?this.executeEarFlow(o,t):this.executeCodeFlow(o,t,r)})}executeCodeFlow(e,t,r){return p(this,null,function*(){let o=e.correlationId,i=this.initializeServerTelemetryManager(ee.acquireTokenPopup),s=r||(yield y(Eo,d.GeneratePkceCodes,this.logger,this.performanceClient,o)(this.performanceClient,this.logger,o)),a=S(m({},e),{codeChallenge:s.challenge});try{let c=yield y(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,o)({serverTelemetryManager:i,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account});if(a.httpMethod===Kt.POST)return yield this.executeCodeFlowWithPost(a,t,c,s.verifier);{let l=yield y(Ja,d.GetAuthCodeUrl,this.logger,this.performanceClient,o)(this.config,c.authority,a,this.logger,this.performanceClient),u=this.initiateAuthRequest(l,t);this.eventHandler.emitEvent(b.POPUP_OPENED,k.Popup,{popupWindow:u},null);let h=yield this.monitorPopupForHash(u,t.popupWindowParent),g=Ce(zi,d.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(h,this.config.auth.OIDCOptions.serverResponseType,this.logger);return yield y(qi,d.HandleResponseCode,this.logger,this.performanceClient,o)(e,g,s.verifier,ee.acquireTokenPopup,this.config,c,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(c){throw t.popup?.close(),c instanceof P&&(c.setCorrelationId(this.correlationId),i.cacheFailedRequest(c)),c}})}executeEarFlow(e,t){return p(this,null,function*(){let r=e.correlationId,o=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=yield y(ja,d.GenerateEarKey,this.logger,this.performanceClient,r)(),s=S(m({},e),{earJwk:i}),a=t.popup||this.openPopup("about:blank",t);(yield Za(a.document,this.config,o,s,this.logger,this.performanceClient)).submit();let l=yield y(this.monitorPopupForHash.bind(this),d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(a,t.popupWindowParent),u=Ce(zi,d.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return y(ec,d.HandleResponseEar,this.logger,this.performanceClient,r)(s,u,ee.acquireTokenPopup,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}executeCodeFlowWithPost(e,t,r,o){return p(this,null,function*(){let i=e.correlationId,s=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,i)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=t.popup||this.openPopup("about:blank",t);(yield Xa(a.document,this.config,s,e,this.logger,this.performanceClient)).submit();let l=yield y(this.monitorPopupForHash.bind(this),d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,i)(a,t.popupWindowParent),u=Ce(zi,d.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return y(qi,d.HandleResponseCode,this.logger,this.performanceClient,i)(e,u,o,ee.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}logoutPopupAsync(e,t,r,o){return p(this,null,function*(){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(b.LOGOUT_START,k.Popup,e);let i=this.initializeServerTelemetryManager(ee.logoutPopup);try{yield this.clearCacheOnLogout(this.correlationId,e.account);let s=yield y(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:r,account:e.account||void 0});try{s.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&s.authority.protocolMode===he.OIDC){if(this.eventHandler.emitEvent(b.LOGOUT_SUCCESS,k.Popup,e),o){let l={apiId:ee.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},u=j.getAbsoluteUrl(o,ht());yield this.navigationClient.navigateInternal(u,l)}t.popup?.close();return}}let a=s.getLogoutUri(e);this.eventHandler.emitEvent(b.LOGOUT_SUCCESS,k.Popup,e);let c=this.openPopup(a,t);if(this.eventHandler.emitEvent(b.POPUP_OPENED,k.Popup,{popupWindow:c},null),yield this.monitorPopupForHash(c,t.popupWindowParent).catch(()=>{}),o){let l={apiId:ee.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},u=j.getAbsoluteUrl(o,ht());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${u}`),yield this.navigationClient.navigateInternal(u,l)}else this.logger.verbose("No main window navigation requested")}catch(s){throw t.popup?.close(),s instanceof P&&(s.setCorrelationId(this.correlationId),i.cacheFailedRequest(s)),this.eventHandler.emitEvent(b.LOGOUT_FAILURE,k.Popup,null,s),this.eventHandler.emitEvent(b.LOGOUT_END,k.Popup),s}this.eventHandler.emitEvent(b.LOGOUT_END,k.Popup)})}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),w(Vn)}monitorPopupForHash(e,t){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");let i=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),o(w(fn));return}let s="";try{s=e.location.href}catch{}if(!s||s==="about:blank")return;clearInterval(i);let a="",c=this.config.auth.OIDCOptions.serverResponseType;e&&(c===On.QUERY?a=e.location.search:a=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t)),!r)throw w(Ca);return r.focus&&r.focus(),this.currentWindow=r,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),w(va)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:r,popupWindowParent:o}){let i=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=r.popupSize?.width,u=r.popupSize?.height,h=r.popupPosition?.top,g=r.popupPosition?.left;return(!l||l<0||l>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=Ee.POPUP_WIDTH),(!u||u<0||u>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=Ee.POPUP_HEIGHT),(!h||h<0||h>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),h=Math.max(0,c/2-Ee.POPUP_HEIGHT/2+s)),(!g||g<0||g>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),g=Math.max(0,a/2-Ee.POPUP_WIDTH/2+i)),o.open(e,t,`width=${l}, height=${u}, top=${h}, left=${g}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return`${Ee.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){let t=e.account&&e.account.homeAccountId;return`${Ee.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t}.${this.correlationId}`}};function D1(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;let n=window.performance.getEntriesByType("navigation");return(n.length?n[0]:void 0)?.type}var bp=class extends bt{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.nativeStorage=c}acquireToken(e){return p(this,null,function*(){let t=yield y(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,k.Redirect);t.platformBroker=Pr(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);let r=i=>{i.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(b.RESTORE_FROM_BFCACHE,k.Redirect))},o=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${o}`),this.browserStorage.setTemporaryCache(Ie.ORIGIN_URI,o,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===he.EAR?yield this.executeEarFlow(t):yield this.executeCodeFlow(t,e.onRedirectNavigate)}catch(i){throw i instanceof P&&i.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),i}})}executeCodeFlow(e,t){return p(this,null,function*(){let r=e.correlationId,o=this.initializeServerTelemetryManager(ee.acquireTokenRedirect),i=yield y(Eo,d.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),s=S(m({},e),{codeChallenge:i.challenge});this.browserStorage.cacheAuthorizeRequest(s,i.verifier);try{if(s.httpMethod===Kt.POST)return yield this.executeCodeFlowWithPost(s);{let a=yield y(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:s.authority,requestAzureCloudOptions:s.azureCloudOptions,requestExtraQueryParameters:s.extraQueryParameters,account:s.account}),c=yield y(Ja,d.GetAuthCodeUrl,this.logger,this.performanceClient,e.correlationId)(this.config,a.authority,s,this.logger,this.performanceClient);return yield this.initiateAuthRequest(c,t)}}catch(a){throw a instanceof P&&(a.setCorrelationId(this.correlationId),o.cacheFailedRequest(a)),a}})}executeEarFlow(e){return p(this,null,function*(){let t=e.correlationId,r=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=yield y(ja,d.GenerateEarKey,this.logger,this.performanceClient,t)(),i=S(m({},e),{earJwk:o});return this.browserStorage.cacheAuthorizeRequest(i),(yield Za(document,this.config,r,i,this.logger,this.performanceClient)).submit(),new Promise((a,c)=>{setTimeout(()=>{c(w(Hi,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})})}executeCodeFlowWithPost(e){return p(this,null,function*(){let t=e.correlationId,r=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return this.browserStorage.cacheAuthorizeRequest(e),(yield Xa(document,this.config,r,e,this.logger,this.performanceClient)).submit(),new Promise((i,s)=>{setTimeout(()=>{s(w(Hi,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})})}handleRedirectPromise(e="",t,r,o){return p(this,null,function*(){let i=this.initializeServerTelemetryManager(ee.handleRedirectPromise);try{let[s,a]=this.getRedirectResponse(e||"");if(!s)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),D1()!=="back_forward"?o.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;let c=this.browserStorage.getTemporaryCache(Ie.ORIGIN_URI,!0)||v.EMPTY_STRING,l=Ln.normalizeUrlForComparison(c),u=Ln.normalizeUrlForComparison(window.location.href);if(l===u&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),c.indexOf("#")>-1&&gE(c),yield this.handleResponse(s,t,r,i);if(this.config.auth.navigateToLoginRequestUrl){if(!bu()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Ie.URL_HASH,a,!0);let h={apiId:ee.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0},g=!0;if(!c||c==="null"){let f=mE();this.browserStorage.setTemporaryCache(Ie.ORIGIN_URI,f,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),g=yield this.navigationClient.navigateInternal(f,h)}else this.logger.verbose(`Navigating to loginRequestUrl: ${c}`),g=yield this.navigationClient.navigateInternal(c,h);if(!g)return yield this.handleResponse(s,t,r,i)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield this.handleResponse(s,t,r,i);return null}catch(s){throw s instanceof P&&(s.setCorrelationId(this.correlationId),i.cacheFailedRequest(s)),s}})}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(this.config.auth.OIDCOptions.serverResponseType===On.QUERY?t=window.location.search:t=window.location.hash);let r=Ln.getDeserializedResponse(t);if(r){try{db(r,this.browserCrypto,k.Redirect)}catch(i){return i instanceof P&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return _u(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}let o=this.browserStorage.getTemporaryCache(Ie.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Ie.URL_HASH)),o&&(r=Ln.getDeserializedResponse(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}handleResponse(e,t,r,o){return p(this,null,function*(){if(!e.state)throw w(ho);if(e.ear_jwe){let a=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return y(ec,d.HandleResponseEar,this.logger,this.performanceClient,t.correlationId)(t,e,ee.acquireTokenRedirect,this.config,a,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}let s=yield y(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:t.authority});return y(qi,d.HandleResponseCode,this.logger,this.performanceClient,t.correlationId)(t,e,r,ee.acquireTokenRedirect,this.config,s,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}initiateAuthRequest(e,t){return p(this,null,function*(){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);let r={apiId:ee.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=t||this.config.auth.onRedirectNavigate;if(typeof o=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),o(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),yield this.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),yield this.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),w(Vn)})}logout(e){return p(this,null,function*(){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(ee.logout);try{this.eventHandler.emitEvent(b.LOGOUT_START,k.Redirect,e),yield this.clearCacheOnLogout(this.correlationId,t.account);let o={apiId:ee.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=yield y(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0});if(i.authority.protocolMode===he.OIDC)try{i.authority.endSessionEndpoint}catch{if(t.account?.homeAccountId){this.eventHandler.emitEvent(b.LOGOUT_SUCCESS,k.Redirect,t);return}}let s=i.getLogoutUri(t);if(this.eventHandler.emitEvent(b.LOGOUT_SUCCESS,k.Redirect,t),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(s)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,hn.SIGNOUT),yield this.navigationClient.navigateExternal(s,o);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,hn.SIGNOUT),yield this.navigationClient.navigateExternal(s,o);return}}catch(o){throw o instanceof P&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),this.eventHandler.emitEvent(b.LOGOUT_FAILURE,k.Redirect,null,o),this.eventHandler.emitEvent(b.LOGOUT_END,k.Redirect),o}this.eventHandler.emitEvent(b.LOGOUT_END,k.Redirect)})}getRedirectStartPage(e){let t=e||window.location.href;return j.getAbsoluteUrl(t,ht())}};function Tb(n,e,t,r,o){return p(this,null,function*(){if(e.addQueueMeasurement(d.SilentHandlerInitiateAuthRequest,r),!n)throw t.info("Navigate url is empty"),w(Vn);return o?y(_1,d.SilentHandlerLoadFrame,t,e,r)(n,o,e,r):Ce(b1,d.SilentHandlerLoadFrameSync,t,e,r)(n)})}function wb(n,e,t,r,o){return p(this,null,function*(){let i=Rp();if(!i.contentDocument)throw"No document associated with iframe!";return(yield Xa(i.contentDocument,n,e,t,r,o)).submit(),i})}function Sb(n,e,t,r,o){return p(this,null,function*(){let i=Rp();if(!i.contentDocument)throw"No document associated with iframe!";return(yield Za(i.contentDocument,n,e,t,r,o)).submit(),i})}function TE(n,e,t,r,o,i,s){return p(this,null,function*(){return r.addQueueMeasurement(d.SilentHandlerMonitorIframeForHash,i),new Promise((a,c)=>{e<hp&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${hp}ms). This may result in timeouts.`);let l=window.setTimeout(()=>{window.clearInterval(u),c(w(Ea))},e),u=window.setInterval(()=>{let h="",g=n.contentWindow;try{h=g?g.location.href:""}catch{}if(!h||h==="about:blank")return;let f="";g&&(s===On.QUERY?f=g.location.search:f=g.location.hash),window.clearTimeout(l),window.clearInterval(u),a(f)},t)}).finally(()=>{Ce(R1,d.RemoveHiddenIframe,o,r,i)(n)})})}function _1(n,e,t,r){return t.addQueueMeasurement(d.SilentHandlerLoadFrame,r),new Promise((o,i)=>{let s=Rp();window.setTimeout(()=>{if(!s){i("Unable to load iframe");return}s.src=n,o(s)},e)})}function b1(n){let e=Rp();return e.src=n,e}function Rp(){let n=document.createElement("iframe");return n.className="msalSilentIframe",n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(n),n}function R1(n){document.body===n.parentNode&&document.body.removeChild(n)}var Mp=class extends bt{constructor(e,t,r,o,i,s,a,c,l,u,h){super(e,t,r,o,i,s,c,u,h),this.apiId=a,this.nativeStorage=l}acquireToken(e){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(d.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");let t=m({},e);t.prompt?t.prompt!==Re.NONE&&t.prompt!==Re.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${Re.NONE}`),t.prompt=Re.NONE):t.prompt=Re.NONE;let r=yield y(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,k.Silent);return r.platformBroker=Pr(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),Mu(r.authority),this.config.auth.protocolMode===he.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)})}executeCodeFlow(e){return p(this,null,function*(){let t,r=this.initializeServerTelemetryManager(this.apiId);try{return t=yield y(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),yield y(this.silentTokenHelper.bind(this),d.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(t,e)}catch(o){if(o instanceof P&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),!t||!(o instanceof P)||o.errorCode!==Ee.INVALID_GRANT_ERROR)throw o;return this.performanceClient.addFields({retryError:o.errorCode},this.correlationId),yield y(this.silentTokenHelper.bind(this),d.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(t,e)}})}executeEarFlow(e){return p(this,null,function*(){let t=e.correlationId,r=yield y(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=yield y(ja,d.GenerateEarKey,this.logger,this.performanceClient,t)(),i=S(m({},e),{earJwk:o}),s=yield y(Sb,d.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,t)(this.config,r,i,this.logger,this.performanceClient),a=this.config.auth.OIDCOptions.serverResponseType,c=yield y(TE,d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,t)(s,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,t,a),l=Ce(zi,d.DeserializeResponse,this.logger,this.performanceClient,t)(c,a,this.logger);return y(ec,d.HandleResponseEar,this.logger,this.performanceClient,t)(i,l,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}logout(){return Promise.reject(w($n))}silentTokenHelper(e,t){return p(this,null,function*(){let r=t.correlationId;this.performanceClient.addQueueMeasurement(d.SilentIframeClientTokenHelper,r);let o=yield y(Eo,d.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),i=S(m({},t),{codeChallenge:o.challenge}),s;if(t.httpMethod===Kt.POST)s=yield y(wb,d.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,e.authority,i,this.logger,this.performanceClient);else{let u=yield y(Ja,d.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,e.authority,i,this.logger,this.performanceClient);s=yield y(Tb,d.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(u,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}let a=this.config.auth.OIDCOptions.serverResponseType,c=yield y(TE,d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(s,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,a),l=Ce(zi,d.DeserializeResponse,this.logger,this.performanceClient,r)(c,a,this.logger);return y(qi,d.HandleResponseCode,this.logger,this.performanceClient,r)(t,l,o.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}};var kp=class extends bt{acquireToken(e){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(d.SilentRefreshClientAcquireToken,e.correlationId);let t=yield y(Nu,d.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r=m(m({},e),t);e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));let o=this.initializeServerTelemetryManager(ee.acquireTokenSilent_silentFlow),i=yield this.createRefreshTokenClient({serverTelemetryManager:o,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return y(i.acquireTokenByRefreshToken.bind(i),d.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(s=>{throw s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s),s})})}logout(){return Promise.reject(w($n))}createRefreshTokenClient(e){return p(this,null,function*(){let t=yield y(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new Eu(t,this.performanceClient)})}};var Np=class{constructor(e,t,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=r,this.cryptoObj=o}loadExternalTokens(e,t,r){return p(this,null,function*(){if(!this.isBrowserEnvironment)throw w(zn);let o=e.correlationId||je(),i=t.id_token?ra.extractTokenClaims(t.id_token,tt):void 0,s={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new Wt(Wt.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,s,this.logger,e.correlationId||je()):void 0,c=yield this.loadAccount(e,r.clientInfo||t.client_info||"",o,i,a),l=yield this.loadIdToken(t,c.homeAccountId,c.environment,c.realm,o),u=yield this.loadAccessToken(e,t,c.homeAccountId,c.environment,c.realm,r,o),h=yield this.loadRefreshToken(t,c.homeAccountId,c.environment,o);return this.generateAuthenticationResult(e,{account:c,idToken:l,accessToken:u,refreshToken:h},i,a)})}loadAccount(e,t,r,o,i){return p(this,null,function*(){if(this.logger.verbose("TokenCache - loading account"),e.account){let l=Ke.createFromAccountInfo(e.account);return yield this.storage.setAccount(l,r),l}else if(!i||!t&&!o)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),w(Ra);let s=Ke.generateHomeAccountId(t,i.authorityType,this.logger,this.cryptoObj,o),a=o?.tid,c=da(this.storage,i,s,tt,r,o,t,i.hostnameAndPort,a,void 0,void 0,this.logger);return yield this.storage.setAccount(c,r),c})}loadIdToken(e,t,r,o,i){return p(this,null,function*(){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");let s=_e.createIdTokenEntity(t,r,e.id_token,this.config.auth.clientId,o);return yield this.storage.setIdTokenCredential(s,i),s})}loadAccessToken(e,t,r,o,i,s,a){return p(this,null,function*(){if(t.access_token)if(t.expires_in){if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");let c=t.scope?ve.fromString(t.scope):new ve(e.scopes),l=s.expiresOn||t.expires_in+Be.nowSeconds(),u=s.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+Be.nowSeconds(),h=_e.createAccessTokenEntity(r,o,t.access_token,this.config.auth.clientId,i,c.printScopes(),l,u,tt);return yield this.storage.setAccessTokenCredential(h,a),h})}loadRefreshToken(e,t,r,o){return p(this,null,function*(){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");let i=_e.createRefreshTokenEntity(t,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return yield this.storage.setRefreshTokenCredential(i,o),i})}generateAuthenticationResult(e,t,r,o){let i="",s=[],a=null,c;t?.accessToken&&(i=t.accessToken.secret,s=ve.fromString(t.accessToken.target).asArray(),a=Be.toDateFromSeconds(t.accessToken.expiresOn),c=Be.toDateFromSeconds(t.accessToken.extendedExpiresOn));let l=t.account;return{authority:o?o.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:s,account:l.getAccountInfo(),idToken:t.idToken?.secret||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}};var Op=class extends Pi{constructor(e){super(e),this.includeRedirectUri=!1}};var Pp=class extends bt{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,c,l,u),this.apiId=a}acquireToken(e){return p(this,null,function*(){if(!e.code)throw w(Ma);let t=yield y(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,k.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{let o=S(m({},t),{code:e.code}),i=yield y(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),s=new Op(i);this.logger.verbose("Auth code client created");let a=new Qa(s,this.browserStorage,o,this.logger,this.performanceClient);return yield y(a.handleCodeResponseFromServer.bind(a),d.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(o){throw o instanceof P&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),o}})}logout(){return Promise.reject(w($n))}};function Ab(n,e,t){let r=window.msal?.clientIds||[],o=r.length,i=r.filter(s=>s===n).length;i>1&&t.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:o,sameClientIdInstanceCount:i})}function Qn(n){let e=n?.idTokenClaims;if(e?.tfp||e?.acr)return"B2C";if(e?.tid){if(e?.tid==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function xp(n,e){try{Ru(n)}catch(t){throw e.end({success:!1},t),t}}var tc=class n{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Ga(this.logger,this.performanceClient):no,this.eventHandler=new Tp(this.logger),this.browserStorage=this.isBrowserEnvironment?new Ka(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,WC(this.config.auth)):tb(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);let t={cacheLocation:ue.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:ue.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new Ka(this.config.auth.clientId,t,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new Np(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static createController(e,t){return p(this,null,function*(){let r=new n(e);return yield r.initialize(t),r})}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}initialize(e,t){return p(this,null,function*(){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(b.INITIALIZE_END);return}let r=e?.correlationId||this.getRequestCorrelationId(),o=this.config.system.allowPlatformBroker,i=this.performanceClient.startMeasurement(d.InitializeClientApplication,r);if(this.eventHandler.emitEvent(b.INITIALIZE_START),!t)try{this.logMultipleInstances(i)}catch{}if(yield y(this.browserStorage.initialize.bind(this.browserStorage),d.InitializeCache,this.logger,this.performanceClient,r)(r),o)try{this.platformAuthProvider=yield Ib(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout)}catch(s){this.logger.verbose(s)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),Ce(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),d.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&(yield this.preGeneratePkceCodes(r)),this.initialized=!0,this.eventHandler.emitEvent(b.INITIALIZE_END),i.end({allowPlatformBroker:o,success:!0})})}handleRedirectPromise(e){return p(this,null,function*(){if(this.logger.verbose("handleRedirectPromise called"),lp(this.initialized),this.isBrowserEnvironment){let t=e||"",r=this.redirectResponse.get(t);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})}handleRedirectPromiseInternal(e){return p(this,null,function*(){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(this.browserStorage.getInteractionInProgress()?.type===hn.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);let r=this.getAllAccounts(),o=this.browserStorage.getCachedNativeRequest(),i=o&&this.platformAuthProvider&&!e,s;this.eventHandler.emitEvent(b.HANDLE_REDIRECT_START,k.Redirect);let a;try{if(i&&this.platformAuthProvider){s=this.performanceClient.startMeasurement(d.AcquireTokenRedirect,o?.correlationId||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),s.add({isPlatformBrokerRequest:!0});let c=new Co(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ee.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,o.accountId,this.nativeInternalStorage,o.correlationId);a=y(c.handleRedirectPromise.bind(c),d.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(this.performanceClient,s.event.correlationId)}else{let[c,l]=this.browserStorage.getCachedRequest(),u=c.correlationId;s=this.performanceClient.startMeasurement(d.AcquireTokenRedirect,u),this.logger.trace("handleRedirectPromise - acquiring token from web flow");let h=this.createRedirectClient(u);a=y(h.handleRedirectPromise.bind(h),d.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(e,c,l,s)}}catch(c){throw this.browserStorage.resetRequestCache(),c}return a.then(c=>(c?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(b.LOGIN_SUCCESS,k.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_SUCCESS,k.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),s.end({success:!0,accountType:Qn(c.account)})):s.event.errorCode?s.end({success:!1}):s.discard(),this.eventHandler.emitEvent(b.HANDLE_REDIRECT_END,k.Redirect),c)).catch(c=>{this.browserStorage.resetRequestCache();let l=c;throw r.length>0?this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_FAILURE,k.Redirect,null,l):this.eventHandler.emitEvent(b.LOGIN_FAILURE,k.Redirect,null,l),this.eventHandler.emitEvent(b.HANDLE_REDIRECT_END,k.Redirect),s.end({success:!1},l),c})})}acquireTokenRedirect(e){return p(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);let r=this.performanceClient.startMeasurement(d.AcquireTokenPreRedirect,t);r.add({accountType:Qn(e.account),scenarioId:e.scenarioId});let o=e.onRedirectNavigate;if(o)e.onRedirectNavigate=s=>{let a=typeof o=="function"?o(s):void 0;return r.add({navigateCallbackResult:a!==!1}),r.event=r.end({success:!0})||r.event,a};else{let s=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{let c=typeof s=="function"?s(a):void 0;return r.add({navigateCallbackResult:c!==!1}),r.event=r.end({success:!0})||r.event,c}}let i=this.getAllAccounts().length>0;try{up(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,hn.SIGNIN),i?this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_START,k.Redirect,e):this.eventHandler.emitEvent(b.LOGIN_START,k.Redirect,e);let s;return this.platformAuthProvider&&this.canUsePlatformBroker(e)?s=new Co(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ee.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,r).catch(c=>{if(r.add({brokerErrorName:c.name,brokerErrorCode:c.errorCode}),c instanceof Yt&&vo(c))return this.platformAuthProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(c instanceof ze)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw c}):s=this.createRedirectClient(t).acquireToken(e),yield s}catch(s){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(d.AcquireTokenRedirect,t).end({success:!1},s):r.end({success:!1},s),i?this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_FAILURE,k.Redirect,null,s):this.eventHandler.emitEvent(b.LOGIN_FAILURE,k.Redirect,null,s),s}})}acquireTokenPopup(e){let t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(d.AcquireTokenPopup,t);r.add({scenarioId:e.scenarioId,accountType:Qn(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),xp(this.initialized,r),this.browserStorage.setInteractionInProgress(!0,hn.SIGNIN)}catch(a){return Promise.reject(a)}let o=this.getAllAccounts();o.length>0?this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_START,k.Popup,e):this.eventHandler.emitEvent(b.LOGIN_START,k.Popup,e);let i,s=this.getPreGeneratedPkceCodes(t);return this.canUsePlatformBroker(e)?(r.add({isPlatformBrokerRequest:!0}),i=this.acquireTokenNative(S(m({},e),{correlationId:t}),ee.acquireTokenPopup).then(a=>(r.end({success:!0,accountType:Qn(a.account)}),a)).catch(a=>{if(r.add({brokerErrorName:a.name,brokerErrorCode:a.errorCode}),a instanceof Yt&&vo(a))return this.platformAuthProvider=void 0,this.createPopupClient(t).acquireToken(e,s);if(a instanceof ze)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e,s);throw a})):i=this.createPopupClient(t).acquireToken(e,s),i.then(a=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(b.LOGIN_SUCCESS,k.Popup,a):this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_SUCCESS,k.Popup,a),r.end({success:!0,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:Qn(a.account)}),a)).catch(a=>(o.length>0?this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_FAILURE,k.Popup,null,a):this.eventHandler.emitEvent(b.LOGIN_FAILURE,k.Popup,null,a),r.end({success:!1},a),Promise.reject(a))).finally(()=>p(this,null,function*(){this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&(yield this.preGeneratePkceCodes(t))}))}trackPageVisibilityWithMeasurement(){let e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}ssoSilent(e){return p(this,null,function*(){let t=this.getRequestCorrelationId(e),r=S(m({},e),{prompt:e.prompt,correlationId:t});this.ssoSilentMeasurement=this.performanceClient.startMeasurement(d.SsoSilent,t),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId,accountType:Qn(e.account)}),xp(this.initialized,this.ssoSilentMeasurement),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(b.SSO_SILENT_START,k.Silent,r);let o;return this.canUsePlatformBroker(r)?(this.ssoSilentMeasurement?.add({isPlatformBrokerRequest:!0}),o=this.acquireTokenNative(r,ee.ssoSilent).catch(i=>{if(this.ssoSilentMeasurement?.add({brokerErrorName:i.name,brokerErrorCode:i.errorCode}),i instanceof Yt&&vo(i))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw i})):o=this.createSilentIframeClient(r.correlationId).acquireToken(r),o.then(i=>(this.eventHandler.emitEvent(b.SSO_SILENT_SUCCESS,k.Silent,i),this.ssoSilentMeasurement?.end({success:!0,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length,accountType:Qn(i.account)}),i)).catch(i=>{throw this.eventHandler.emitEvent(b.SSO_SILENT_FAILURE,k.Silent,null,i),this.ssoSilentMeasurement?.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenByCode(e){return p(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);let r=this.performanceClient.startMeasurement(d.AcquireTokenByCode,t);xp(this.initialized,r),this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_BY_CODE_START,k.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw w(Na);if(e.code){let o=e.code,i=this.hybridAuthCodeResponses.get(o);return i?(this.logger.verbose("Existing acquireTokenByCode request found",t),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),i=this.acquireTokenByCodeAsync(S(m({},e),{correlationId:t})).then(s=>(this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_BY_CODE_SUCCESS,k.Silent,s),this.hybridAuthCodeResponses.delete(o),r.end({success:!0,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:Qn(s.account)}),s)).catch(s=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_BY_CODE_FAILURE,k.Silent,null,s),r.end({success:!1},s),s}),this.hybridAuthCodeResponses.set(o,i)),yield i}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});let o=yield this.acquireTokenNative(S(m({},e),{correlationId:t}),ee.acquireTokenByCode,e.nativeAccountId).catch(i=>{throw i instanceof Yt&&vo(i)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:i.name,brokerErrorCode:i.errorCode}),i});return r.end({accountType:Qn(o.account),success:!0}),o}else throw w(Oa);else throw w(ka)}catch(o){throw this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_BY_CODE_FAILURE,k.Silent,null,o),r.end({success:!1},o),o}})}acquireTokenByCodeAsync(e){return p(this,null,function*(){return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(d.AcquireTokenByCodeAsync,e.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),yield this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(o=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:o.fromCache}),o)).catch(o=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},o),o}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenFromCache(e,t){return p(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(d.AcquireTokenFromCache,e.correlationId),t){case Ge.Default:case Ge.AccessToken:case Ge.AccessTokenAndRefreshToken:let r=this.createSilentCacheClient(e.correlationId);return y(r.acquireToken.bind(r),d.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw E(He.tokenRefreshRequired)}})}acquireTokenByRefreshToken(e,t){return p(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(d.AcquireTokenByRefreshToken,e.correlationId),t){case Ge.Default:case Ge.AccessTokenAndRefreshToken:case Ge.RefreshToken:case Ge.RefreshTokenAndNetwork:let r=this.createSilentRefreshClient(e.correlationId);return y(r.acquireToken.bind(r),d.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw E(He.tokenRefreshRequired)}})}acquireTokenBySilentIframe(e){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(d.AcquireTokenBySilentIframe,e.correlationId);let t=this.createSilentIframeClient(e.correlationId);return y(t.acquireToken.bind(t),d.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)})}logout(e){return p(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect(m({correlationId:t},e))})}logoutRedirect(e){return p(this,null,function*(){let t=this.getRequestCorrelationId(e);return up(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,hn.SIGNOUT),this.createRedirectClient(t).logout(e)})}logoutPopup(e){try{let t=this.getRequestCorrelationId(e);return Ru(this.initialized),this.browserStorage.setInteractionInProgress(!0,hn.SIGNOUT),this.createPopupClient(t).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(t){return Promise.reject(t)}}clearCache(e){return p(this,null,function*(){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}let t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)})}getAllAccounts(e){let t=this.getRequestCorrelationId();return nb(this.logger,this.browserStorage,this.isBrowserEnvironment,t,e)}getAccount(e){let t=this.getRequestCorrelationId();return rb(e,this.logger,this.browserStorage,t)}getAccountByUsername(e){let t=this.getRequestCorrelationId();return ob(e,this.logger,this.browserStorage,t)}getAccountByHomeId(e){let t=this.getRequestCorrelationId();return ib(e,this.logger,this.browserStorage,t)}getAccountByLocalId(e){let t=this.getRequestCorrelationId();return sb(e,this.logger,this.browserStorage,t)}setActiveAccount(e){let t=this.getRequestCorrelationId();ab(e,this.browserStorage,t)}getActiveAccount(){let e=this.getRequestCorrelationId();return cb(this.browserStorage,e)}hydrateCache(e,t){return p(this,null,function*(){this.logger.verbose("hydrateCache called");let r=Ke.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return yield this.browserStorage.setAccount(r,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)})}acquireTokenNative(e,t,r,o){return p(this,null,function*(){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw w(go);return new Co(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,o)})}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!Pr(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case Re.NONE:case Re.CONSENT:case Re.LOGIN:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!t&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){let t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new _p(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new bp(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new Mp(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ee.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new Ya(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new kp(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new Pp(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ee.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return cp(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==ue.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==ue.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?je():v.EMPTY_STRING}loginRedirect(e){return p(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect(m({correlationId:t},e||rE))})}loginPopup(e){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(m({correlationId:t},e||rE))}acquireTokenSilent(e){return p(this,null,function*(){let t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(d.AcquireTokenSilent,t);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),xp(this.initialized,r),this.logger.verbose("acquireTokenSilent called",t);let o=e.account||this.getActiveAccount();if(!o)throw w(Sa);return r.add({accountType:Qn(o)}),this.acquireTokenSilentDeduped(e,o,t).then(i=>(r.end({success:!0,fromCache:i.fromCache,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length}),S(m({},i),{state:e.state,correlationId:t}))).catch(i=>{throw i instanceof P&&i.setCorrelationId(t),r.end({success:!1},i),i})})}acquireTokenSilentDeduped(e,t,r){return p(this,null,function*(){let o=Rr(this.config.auth.clientId,S(m({},e),{authority:e.authority||this.config.auth.authority,correlationId:r}),t.homeAccountId),i=JSON.stringify(o),s=this.activeSilentTokenRequests.get(i);if(typeof s>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);let a=y(this.acquireTokenSilentAsync.bind(this),d.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)(S(m({},e),{correlationId:r}),t);return this.activeSilentTokenRequests.set(i,a),a.finally(()=>{this.activeSilentTokenRequests.delete(i)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),s})}acquireTokenSilentAsync(e,t){return p(this,null,function*(){let r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(d.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_START,k.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);let o=yield y(lb,d.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),i=e.cacheLookupPolicy||Ge.Default;return this.acquireTokenSilentNoIframe(o,i).catch(a=>p(this,null,function*(){if(M1(a,i))if(this.activeIframeRequest)if(i!==Ge.Skip){let[l,u]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${u}`,o.correlationId);let h=this.performanceClient.startMeasurement(d.AwaitConcurrentIframe,o.correlationId);h.add({awaitIframeCorrelationId:u});let g=yield l;if(h.end({success:g}),g)return this.logger.verbose(`Parallel iframe request with correlationId: ${u} succeeded. Retrying cache and/or RT redemption`,o.correlationId),this.acquireTokenSilentNoIframe(o,i);throw this.logger.info(`Iframe request with correlationId: ${u} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",o.correlationId),y(this.acquireTokenBySilentIframe.bind(this),d.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o);else{let l;return this.activeIframeRequest=[new Promise(u=>{l=u}),o.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",o.correlationId),y(this.acquireTokenBySilentIframe.bind(this),d.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o).then(u=>(l(!0),u)).catch(u=>{throw l(!1),u}).finally(()=>{this.activeIframeRequest=void 0})}else throw a})).then(a=>(this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_SUCCESS,k.Silent,a),e.correlationId&&this.performanceClient.addFields({fromCache:a.fromCache},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_FAILURE,k.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",r)})})}acquireTokenSilentNoIframe(e,t){return p(this,null,function*(){return Pr(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),this.acquireTokenNative(e,ee.acquireTokenSilent_silentFlow,e.account.nativeAccountId,t).catch(r=>p(this,null,function*(){throw this.performanceClient.addFields({brokerErrorName:r.name,brokerErrorCode:r.errorCode},e.correlationId),r instanceof Yt&&vo(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,E(He.tokenRefreshRequired)):r}))):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===Ge.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),y(this.acquireTokenFromCache.bind(this),d.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,t).catch(r=>{if(t===Ge.AccessToken)throw r;return this.eventHandler.emitEvent(b.ACQUIRE_TOKEN_NETWORK_START,k.Silent,e),y(this.acquireTokenByRefreshToken.bind(this),d.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,t)}))})}preGeneratePkceCodes(e){return p(this,null,function*(){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=yield y(Eo,d.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()})}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");let t=this.pkceCode?m({},this.pkceCode):void 0;return this.pkceCode=void 0,this.logger.verbose(`${t?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){let t=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),Ab(t,e,this.logger)}};function M1(n,e){let t=!(n instanceof ze&&n.subError!==Bn.badToken),r=n.errorCode===Ee.INVALID_GRANT_ERROR||n.errorCode===He.tokenRefreshRequired,o=t&&r||n.errorCode===Bn.noTokensFound||n.errorCode===Bn.refreshTokenExpired,i=S_.includes(e);return o&&i}function Db(n,e){return p(this,null,function*(){let t=new mp(n);return yield t.initialize(),tc.createController(t,e)})}var wE=class n{static createPublicClientApplication(e){return p(this,null,function*(){let t=yield Db(e);return new n(e,t)})}constructor(e,t){this.isBroker=!1,this.controller=t||new tc(new mp(e))}initialize(e){return p(this,null,function*(){return this.controller.initialize(e,this.isBroker)})}acquireTokenPopup(e){return p(this,null,function*(){return this.controller.acquireTokenPopup(e)})}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(e,t){return p(this,null,function*(){return this.controller.hydrateCache(e,t)})}clearCache(e){return this.controller.clearCache(e)}};var Ou=class{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case b.LOGIN_START:return Oe.Login;case b.SSO_SILENT_START:return Oe.SsoSilent;case b.ACQUIRE_TOKEN_START:if(e.interactionType===k.Redirect||e.interactionType===k.Popup)return Oe.AcquireToken;break;case b.HANDLE_REDIRECT_START:return Oe.HandleRedirect;case b.LOGOUT_START:return Oe.Logout;case b.SSO_SILENT_SUCCESS:case b.SSO_SILENT_FAILURE:if(t&&t!==Oe.SsoSilent)break;return Oe.None;case b.LOGOUT_END:if(t&&t!==Oe.Logout)break;return Oe.None;case b.HANDLE_REDIRECT_END:if(t&&t!==Oe.HandleRedirect)break;return Oe.None;case b.LOGIN_SUCCESS:case b.LOGIN_FAILURE:case b.ACQUIRE_TOKEN_SUCCESS:case b.ACQUIRE_TOKEN_FAILURE:case b.RESTORE_FROM_BFCACHE:if(e.interactionType===k.Redirect||e.interactionType===k.Popup){if(t&&t!==Oe.Login&&t!==Oe.AcquireToken)break;return Oe.None}break}return null}};var Fp="@azure/msal-angular",Pu="4.0.19",SE=new D("MSAL_INSTANCE"),_b=new D("MSAL_GUARD_CONFIG"),k1=new D("MSAL_INTERCEPTOR_CONFIG"),N1=new D("MSAL_BROADCAST_CONFIG"),AE=(()=>{class n{constructor(t,r){this.msalInstance=t,this.msalBroadcastConfig=r,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.msalInstance.getLogger().clone(Fp,Pu).verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new uc(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new we,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new xe(Oe.Startup),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(o=>{this._msalSubject.next(o);let i=Ou.getInteractionStatusFromEvent(o,this._inProgress.value);i!==null&&(this.msalInstance.getLogger().clone(Fp,Pu).verbose(`BroadcastService - ${o.eventType} results in setting inProgress from ${this._inProgress.value} to ${i}`),this._inProgress.next(i))})}resetInProgressEvent(){this._inProgress.value===Oe.Startup&&this._inProgress.next(Oe.None)}}return n.\u0275fac=function(t){return new(t||n)(R(SE),R(N1,8))},n.\u0275prov=M({token:n,factory:n.\u0275fac}),n})(),bb=(()=>{class n{constructor(t,r,o){this.instance=t,this.location=r,this.injector=o;let i=this.location.path(!0).split("#").pop();i&&(this.redirectHash=`#${i}`),this.instance.initializeWrapperLibrary(iE.Angular,Pu)}initialize(){return Z(this.instance.initialize())}acquireTokenPopup(t){return Z(this.instance.acquireTokenPopup(t))}acquireTokenRedirect(t){return Z(this.instance.acquireTokenRedirect(t))}acquireTokenSilent(t){return Z(this.instance.acquireTokenSilent(t))}handleRedirectObservable(t){return Z(this.instance.initialize().then(()=>this.instance.handleRedirectPromise(t||this.redirectHash)).finally(()=>{this.injector.get(AE).resetInProgressEvent()}))}loginPopup(t){return Z(this.instance.loginPopup(t))}loginRedirect(t){return Z(this.instance.loginRedirect(t))}logout(t){return Z(this.instance.logout(t))}logoutRedirect(t){return Z(this.instance.logoutRedirect(t))}logoutPopup(t){return Z(this.instance.logoutPopup(t))}ssoSilent(t){return Z(this.instance.ssoSilent(t))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(Fp,Pu)),this.logger}setLogger(t){this.logger=t.clone(Fp,Pu),this.instance.setLogger(t)}}return n.\u0275fac=function(t){return new(t||n)(R(SE),R(nn),R(qe))},n.\u0275prov=M({token:n,factory:n.\u0275fac}),n})(),O1=(()=>{class n{constructor(t,r,o,i,s){this.msalGuardConfig=t,this.msalBroadcastService=r,this.authService=o,this.location=i,this.router=s,this.msalBroadcastService.inProgress$.subscribe()}parseUrl(t){return this.router.parseUrl(t)}getDestinationUrl(t){this.authService.getLogger().verbose("Guard - getting destination url");let r=document.getElementsByTagName("base"),o=this.location.normalize(r.length?r[0].href:window.location.origin),i=this.location.prepareExternalUrl(t);return i.startsWith("#")?(this.authService.getLogger().verbose("Guard - destination by hash routing"),`${o}/${i}`):`${o}${t}`}loginInteractively(t){let r=typeof this.msalGuardConfig.authRequest=="function"?this.msalGuardConfig.authRequest(this.authService,t):m({},this.msalGuardConfig.authRequest);if(this.msalGuardConfig.interactionType===k.Popup)return this.authService.getLogger().verbose("Guard - logging in by popup"),this.authService.loginPopup(r).pipe(V(i=>(this.authService.getLogger().verbose("Guard - login by popup successful, can activate, setting active account"),this.authService.instance.setActiveAccount(i.account),!0)));this.authService.getLogger().verbose("Guard - logging in by redirect");let o=this.getDestinationUrl(t.url);return this.authService.loginRedirect(m({redirectStartPage:o},r)).pipe(V(()=>!1))}activateHelper(t){if(this.msalGuardConfig.interactionType!==k.Popup&&this.msalGuardConfig.interactionType!==k.Redirect)throw new $a("invalid_interaction_type","Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration");if(this.authService.getLogger().verbose("MSAL Guard activated"),typeof window<"u"){if(j.hashContainsKnownProperties(window.location.hash)&&dp.isInIframe()&&!this.authService.instance.getConfiguration().system.allowRedirectInIframe)return this.authService.getLogger().warning("Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),N(!1)}else return this.authService.getLogger().info("Guard - window is undefined, MSAL does not support server-side token acquisition"),N(!0);this.msalGuardConfig.loginFailedRoute&&(this.loginFailedRoute=this.parseUrl(this.msalGuardConfig.loginFailedRoute));let r=this.location.path(!0);return this.authService.initialize().pipe(Mt(()=>this.authService.handleRedirectObservable()),Mt(()=>{if(!this.authService.instance.getAllAccounts().length)return t?(this.authService.getLogger().verbose("Guard - no accounts retrieved, log in required to activate"),this.loginInteractively(t)):(this.authService.getLogger().verbose("Guard - no accounts retrieved, no state, cannot load"),N(!1));if(this.authService.getLogger().verbose("Guard - at least 1 account exists, can activate or load"),t){let o=this.includesCode(t.url),i=!!t.root&&!!t.root.fragment&&this.includesCode(`#${t.root.fragment}`),s=this.location.prepareExternalUrl(t.url).indexOf("#")===0;if(o&&(i||s))return this.authService.getLogger().info("Guard - Hash contains known code response, stopping navigation."),r.indexOf("#")>-1?N(this.parseUrl(this.location.path())):N(this.parseUrl(""))}return N(!0)}),Bt(o=>(this.authService.getLogger().error("Guard - error while logging in, unable to activate"),this.authService.getLogger().errorPii(`Guard - error: ${o.message}`),this.loginFailedRoute&&t?(this.authService.getLogger().verbose("Guard - loginFailedRoute set, redirecting"),N(this.loginFailedRoute)):N(!1))))}includesCode(t){return t.lastIndexOf("/code")>-1&&t.lastIndexOf("/code")===t.length-5||t.indexOf("#code=")>-1||t.indexOf("&code=")>-1}canActivate(t,r){return this.authService.getLogger().verbose("Guard - canActivate"),this.activateHelper(r)}canActivateChild(t,r){return this.authService.getLogger().verbose("Guard - canActivateChild"),this.activateHelper(r)}canMatch(){return this.authService.getLogger().verbose("Guard - canLoad"),this.activateHelper()}}return n.\u0275fac=function(t){return new(t||n)(R(_b),R(AE),R(bb),R(nn),R(Nn))},n.\u0275prov=M({token:n,factory:n.\u0275fac}),n})();var see=(()=>{class n{static forRoot(t,r,o){return{ngModule:n,providers:[{provide:SE,useValue:t},{provide:_b,useValue:r},{provide:k1,useValue:o},bb]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Gt({type:n}),n.\u0275inj=zt({providers:[O1,AE],imports:[Gc]}),n})();var xr=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(xr||{}),lee="*";function uee(n,e){return{type:xr.Trigger,name:n,definitions:e,options:{}}}function dee(n,e=null){return{type:xr.Animate,styles:e,timings:n}}function hee(n,e=null){return{type:xr.Sequence,steps:n,options:e}}function fee(n){return{type:xr.Style,styles:n,offset:null}}function pee(n,e,t){return{type:xr.State,name:n,styles:e,options:t}}function gee(n,e,t=null){return{type:xr.Transition,expr:n,animation:e,options:t}}function mee(n,e=null){return{type:xr.Reference,animation:n,options:e}}function yee(n,e=null){return{type:xr.AnimateRef,animation:n,options:e}}var Rb=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Mb=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,o=0,i=this.players.length;i==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==i&&this._onFinish()}),s.onDestroy(()=>{++r==i&&this._onDestroy()}),s.onStart(()=>{++o==i&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let o=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(o)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},vee="!";export{we as a,xe as b,Z as c,N as d,V as e,sR as f,lg as g,Bt as h,fR as i,Xn as j,Qe as k,Ve as l,A as m,JI as n,M as o,zt as p,D as q,R as r,T as s,bc as t,pz as u,gz as v,mz as w,ey as x,qe as y,yt as z,ie as A,ar as B,yz as C,Ns as D,vz as E,Cz as F,Uo as G,Es as H,Nc as I,me as J,lr as K,Ry as L,Gt as M,ur as N,XO as O,aP as P,xc as Q,yS as R,ES as S,bP as T,RP as U,MP as V,Rz as W,Mz as X,OS as Y,PS as Z,Ly as _,xS as $,FS as aa,$P as ba,kz as ca,LS as da,Nz as ea,Oz as fa,Pz as ga,tx as ha,nx as ia,xz as ja,rx as ka,ox as la,Fz as ma,Lz as na,sx as oa,HS as pa,ax as qa,cx as ra,Uz as sa,lx as ta,Hz as ua,Bz as va,jz as wa,Vz as xa,$z as ya,zz as za,Gz as Aa,qz as Ba,Kz as Ca,Wz as Da,Qz as Ea,Yz as Fa,Jz as Ga,Uc as Ha,QS as Ia,Hx as Ja,Bx as Ka,Zz as La,jx as Ma,De as Na,Dn as Oa,v0 as Pa,SA as Qa,C0 as Ra,E0 as Sa,I0 as Ta,w0 as Ua,S0 as Va,Gc as Wa,_0 as Xa,sv as Ya,K0 as Za,Y0 as _a,gr as $a,WA as ab,YA as bb,CF as cb,EF as db,wE as eb,kv as fb,Nn as gb,XL as hb,SE as ib,bb as jb,see as kb,xr as lb,lee as mb,uee as nb,dee as ob,hee as pb,fee as qb,pee as rb,gee as sb,mee as tb,yee as ub,Rb as vb,Mb as wb,vee as xb};
